(()=>{"use strict";function e(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==o.return||o.return()}finally{if(s)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");n.textContent=e,n.style.position="fixed",n.style.bottom="20px",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.padding="10px 20px",n.style.backgroundColor="success"===t?"#28a745":"#dc3545",n.style.color="#fff",n.style.borderRadius="5px",n.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",n.style.zIndex="10001",n.style.fontSize="14px",n.style.fontWeight="bold",n.style.transition="opacity 0.3s ease, transform 0.3s ease",n.style.opacity="1",n.style.animation="fadeInOut 3s ease",document.body.appendChild(n),setTimeout((function(){n.style.opacity="0",setTimeout((function(){return n.remove()}),300)}),3e3)}function o(e){return e&&e.nodeType===Node.ELEMENT_NODE?function(e){var t=e.tagName.toLowerCase();if(e.id)return t+="#".concat(e.id);if(e.className){var n=e.className.split(" ").filter((function(e){return""!==e.trim()})).map((function(e){return".".concat(e)})).join("");t+=n}return["name","type","aria-label","data-pc-name"].forEach((function(n){e.hasAttribute(n)&&(t+="[".concat(n,'="').concat(e.getAttribute(n),'"]'))})),t}(e):null}function r(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return null;if(t.id&&1===document.querySelectorAll("#".concat(CSS.escape(t.id))).length)return"//*[@id='".concat(t.id,"']");for(var n=["data-testid","data-qa","name","aria-label","title"],o=0,r=n;o<r.length;o++){var i=r[o],a=t.getAttribute(i);if(a&&1===document.querySelectorAll("[".concat(i,"='").concat(a,"']")).length)return"//*[@".concat(i,"='").concat(a,"']")}for(var l="",s=t;s&&s.nodeType===Node.ELEMENT_NODE&&s!==document.body;){var d,c=s.tagName.toLowerCase(),p=e(n);try{for(p.s();!(d=p.n()).done;){var u=d.value,y=s.getAttribute(u);if(y&&1===document.querySelectorAll("[".concat(u,"='").concat(y,"']")).length)return l="//*[@".concat(u,"='").concat(y,"']").concat(l?"/"+l:"")}}catch(e){p.e(e)}finally{p.f()}var g=Array.from(s.parentNode.children).filter((function(e){return e.tagName===s.tagName}));if(g.length>1){var m=g.indexOf(s)+1;c+="[".concat(m,"]")}l=l?"".concat(c,"/").concat(l):c,s=s.parentNode}return"//"+l}function i(e){var t="";t+='\n        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; min-height: 40px;">\n            <h3 style="margin: 0; font-size: 18px; color: #007bff; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);">GERADOR DE TESTES AUTOMATIZADOS</h3>\n            <div class="button-container-top" style="display: flex; gap: 6px; align-items: center;">\n                <button id="gherkin-reopen" title="Reabrir" style="display: none; background-color: transparent; border: none; cursor: pointer; font-size: 14px; font-weight: bold; color: #28a745;">Abrir</button>\n                <button id="gherkin-minimize" title="Minimizar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffc107" viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>\n                </button>\n                <button id="gherkin-close" title="Fechar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#dc3545" viewBox="0 0 24 24"><path d="M18.3 5.71L12 12l6.3 6.29-1.42 1.42L12 13.41l-6.29 6.3-1.42-1.42L10.59 12 4.29 5.71 5.71 4.29 12 10.59l6.29-6.3z"/></svg>\n                </button>\n            </div>\n        </div>\n    ',"feature"===window.gherkinPanelState?t+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="feature-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome da Feature:</label>\n                <input id="feature-name" type="text" placeholder="Ex: Login" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-feature" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Feature</button>\n            </div>\n        ':"cenario"===window.gherkinPanelState?t+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="cenario-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome do Cenário:</label>\n                <input id="cenario-name" type="text" placeholder="Ex: Login com sucesso" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-cenario" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Cenário</button>\n            </div>\n        ':"gravando"===window.gherkinPanelState?t+='\n            <div class="gherkin-content">\n                <p id="gherkin-status" style="font-size: 14px; margin: 5px 0; color: #555;">Status: Gravando</p>\n                <p style="font-size: 14px; color: #0D47A1; font-weight: bold;">Feature: '.concat(window.currentFeature?window.currentFeature.name:"",'</p>\n                <p style="font-size: 14px; color: #007bff; font-weight: bold;">Cenário: ').concat(window.currentCenario?window.currentCenario.name:"",'</p>\n                <div id="recording-indicator" style="display: none; margin: 10px auto; width: 10px; height: 10px; background-color: #ff0000; border-radius: 50%; animation: pulse 1s infinite;"></div>\n                <p id="gherkin-timer" style="font-size: 14px; margin: 5px 0; color: #555;">Tempo de execução: 00:00</p>\n                <label for="gherkin-action-select" style="font-size: 13px; margin-top: 8px;">Ação:</label>\n                <select id="gherkin-action-select" style="width: 100%; padding: 7px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 10px; font-size: 14px;">\n                    <optgroup label="Ações">\n                        <option value="clica">Clicar</option>\n                        <option value="altera">Alterar</option>\n                        <option value="preenche">Preencher</option>\n                        <option value="seleciona">Selecionar</option>\n                        <option value="radio">Botão de rádio</option>\n                        <option value="caixa">Caixa de seleção</option>\n                        <option value="navega">Navegar</option>\n                    </optgroup>\n                    <optgroup label="Validações">\n                        <option value="valida_existe">Validar que existe</option>\n                        <option value="valida_nao_existe">Validar que não existe</option>\n                        <option value="valida_contem">Validar que contém</option>\n                        <option value="valida_nao_contem">Validar que não contém</option>\n                        <option value="valida_deve_ser">Validar que deve ser</option>\n                        <option value="valida_nao_deve_ser">Validar que não deve ser</option>\n                    </optgroup>\n                    <optgroup label="Esperas">\n                        <option value="espera_segundos">Esperar segundos</option>\n                        <option value="espera_existe">Esperar que o elemento exista</option>\n                        <option value="espera_nao_existe">Esperar que o elemento não exista</option>\n                        <option value="espera_habilitado">Esperar que o elemento esteja habilitado</option>\n                        <option value="espera_desabilitado">Esperar que o elemento esteja desabilitado</option>\n                    </optgroup>\n                </select>\n                <div id="gherkin-log" style="overflow-y: auto; height: 350px; margin-top: 10px; border: 1px solid #ccc; padding: 5px; font-size: 13px; background-color: #f9f9f9;"></div>\n                <div style="display: flex; flex-wrap: nowrap; gap: 4px; margin-top: 10px; justify-content: center; align-items: center; width: 100%;">\n                    <button id="end-cenario" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;">Encerrar Cenário</button>\n                    <button id="end-feature" style="background-color: #6c757d; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;" disabled>Encerrar Feature</button>\n                    <button id="gherkin-pause" style="background-color: #ffc107; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Pausar</button>\n                    <button id="gherkin-clear" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Limpar</button>\n                </div>\n            </div>\n        '):"exportar"===window.gherkinPanelState&&(t+='<div class="gherkin-content" style="padding: 10px;">\n            <h4 style="color: #0D47A1;">Selecione as features para exportar:</h4>\n            <form id="export-form" style="max-height: 250px; overflow-y: auto; margin-bottom: 15px;">',window.gherkinFeatures.forEach((function(e,n){t+="<div style='margin-bottom: 8px;'><input type='checkbox' id='feature-export-".concat(n,"' name='feature-export' value='").concat(n,"'><label for='feature-export-").concat(n,"' style='margin-left: 8px;'>").concat(e.name,"</label></div>")})),t+='</form>\n            <button id="export-selected" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px;">Exportar Selecionadas</button>\n            <button id="new-feature" style="background-color: #28a745; color: white; border: none; border-radius: 5px; padding: 10px 20px; margin-left: 10px;">Nova Feature</button>\n        </div>'),t+='<p id="gherkin-footer" style="position: absolute; bottom: 0px; right: 10px; font-size: 10px; margin: 0; color: #555;">By: Matheus Ferreira de Oliveira</p>',e.innerHTML=t}function a(){var e=document.getElementById("gherkin-log");e&&(e.innerHTML="",window.interactions&&0!==window.interactions.length?(window.interactions.forEach((function(t,n){var o="";"acessa_url"===t.acao?o="Given que o usuário acessa ".concat(t.nomeElemento):"preenche"===t.acao?(o="".concat(t.step," ").concat(t.acaoTexto.toLowerCase()," no ").concat(t.nomeElemento),void 0!==t.valorPreenchido&&(o+=' (valor: "'.concat(t.valorPreenchido,'")'))):"espera_segundos"===t.acao?(o="".concat(t.step," ").concat(t.acaoTexto.toLowerCase()," no ").concat(t.nomeElemento),void 0!==t.tempoEspera&&(o+=" (".concat(t.tempoEspera," segundos)"))):o="".concat(t.step," ").concat(t.acaoTexto.toLowerCase()," no ").concat(t.nomeElemento);var r=o.length>300,i=document.createElement("div");i.className="gherkin-log-entry";var l=!1;if(r){var s=document.createElement("span"),d=o.slice(0,80);o.length>80&&(d+="..."),s.textContent=d,s.style.color="#dc3545",s.style.flex="1",s.title="Clique no botão para visualizar o log completo.",i.appendChild(s);var c=document.createElement("button");c.className="gherkin-large-log-btn",c.title="Visualizar log completo",c.style.background="none",c.style.border="none",c.style.cursor="pointer",c.style.marginLeft="6px",c.style.padding="2px",c.style.display="flex",c.style.alignItems="center",c.setAttribute("aria-label","Visualizar log completo"),c.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="#007bff"/><path d="M8 12l2.5 2.5L16 9" stroke="#fff" stroke-width="2" fill="none"/></svg>',c.onclick=function(e){e.stopPropagation(),function(e){var t=document.getElementById("gherkin-modal");t&&t.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="320px",o.style.maxWidth="90vw",o.style.maxHeight="80vh";var r=document.createElement("div");r.textContent="Log completo",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var i=document.createElement("textarea");i.value=e,i.readOnly=!0,i.style.width="100%",i.style.height="200px",i.style.fontSize="13px",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.marginTop="8px",i.style.resize="vertical",o.appendChild(i);var a=document.createElement("button");a.textContent="Fechar",a.style.background="#007bff",a.style.color="#fff",a.style.border="none",a.style.borderRadius="6px",a.style.padding="8px 22px",a.style.fontSize="15px",a.style.fontWeight="bold",a.style.cursor="pointer",a.onclick=function(){return n.remove()},o.appendChild(a),n.appendChild(o),document.body.appendChild(n)}(o)},i.appendChild(c)}else{var p=document.createElement("span");p.textContent=o,p.style.flex="1",setTimeout((function(){p.offsetHeight<p.scrollHeight||p.offsetWidth<p.scrollWidth?p.title=o:p.removeAttribute("title")}),0),i.appendChild(p);var u=document.createElement("button");u.className="gherkin-expand-btn",u.title="Expandir log",u.style.background="none",u.style.border="none",u.style.cursor="pointer",u.style.marginLeft="6px",u.style.padding="2px",u.style.display="flex",u.style.alignItems="center",u.setAttribute("aria-label","Expandir log"),u.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',u.onclick=function(e){e.stopPropagation(),(l=!l)?(p.textContent=o,i.classList.add("expanded"),u.title="Recolher log",u.setAttribute("aria-label","Recolher log"),u.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>'):(i.classList.remove("expanded"),u.title="Expandir log",u.setAttribute("aria-label","Expandir log"),u.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>')},i.appendChild(u)}var y=document.createElement("div");y.className="gherkin-action-menu",y.style.position="relative",y.style.marginLeft="6px",y.style.display="inline-block";var g=document.createElement("button");g.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></svg>',g.style.background="none",g.style.border="none",g.style.cursor="pointer",g.style.padding="2px",g.title="Ações",y.appendChild(g);var m=document.createElement("div");m.className="gherkin-action-dropdown",m.style.display="none",m.style.position="absolute",m.style.right="0",m.style.top="24px",m.style.background="#fff",m.style.border="1px solid #ccc",m.style.borderRadius="6px",m.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",m.style.zIndex="10002",m.style.minWidth="120px";var f=document.createElement("button");f.textContent="Editar",f.style.display="block",f.style.width="100%",f.style.background="none",f.style.border="none",f.style.padding="8px 12px",f.style.cursor="pointer",f.style.textAlign="left",f.onclick=function(e){e.stopPropagation(),m.style.display="none",function(e){var t=window.interactions[e];if(t){var n=document.getElementById("gherkin-modal");n&&n.remove();var o=document.createElement("div");o.id="gherkin-modal",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.background="rgba(0,0,0,0.25)",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="10003";var r=document.createElement("div");r.style.background="#fff",r.style.padding="28px 32px 22px 32px",r.style.borderRadius="12px",r.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="18px",r.style.minWidth="260px";var i=document.createElement("div");i.textContent="Editar interação",i.style.fontSize="17px",i.style.color="#0D47A1",i.style.textAlign="center",r.appendChild(i);var l=document.createElement("label");l.textContent="Passo BDD:",l.style.fontWeight="bold",l.style.marginBottom="4px",r.appendChild(l);var s=document.createElement("select");s.style.width="100%",s.style.padding="7px",s.style.borderRadius="5px",s.style.border="1px solid #ccc",s.style.fontSize="14px",["Given","When","Then"].forEach((function(e){var n=document.createElement("option");n.value=e,n.textContent=e,t.step===e&&(n.selected=!0),s.appendChild(n)})),r.appendChild(s);var d,c=document.createElement("label");if(c.textContent="Ação:",c.style.fontWeight="bold",c.style.marginBottom="4px",r.appendChild(c),"acessa_url"===t.acao)(d=document.createElement("input")).type="text",d.value="acessa_url",d.disabled=!0,d.style.width="100%",d.style.padding="7px",d.style.borderRadius="5px",d.style.border="1px solid #ccc",d.style.fontSize="14px",d.style.background="#f5f5f5";else{(d=document.createElement("select")).style.width="100%",d.style.padding="7px",d.style.borderRadius="5px",d.style.border="1px solid #ccc",d.style.fontSize="14px";var p=document.getElementById("gherkin-action-select");p&&p.innerHTML.trim()?d.innerHTML=p.innerHTML:d.innerHTML='<option value="clica">Clicar</option>',d.value=t.acao}r.appendChild(d);var u=document.createElement("label");u.textContent="Nome do elemento:",u.style.fontWeight="bold",u.style.marginBottom="4px",r.appendChild(u);var y=document.createElement("input");y.type="text",y.value=t.nomeElemento,y.style.width="100%",y.style.padding="7px",y.style.borderRadius="5px",y.style.border="1px solid #ccc",y.style.fontSize="14px",r.appendChild(y);var g=document.createElement("div");g.style.display="flex",g.style.gap="18px",g.style.marginTop="12px";var m=document.createElement("button");m.textContent="Salvar",m.style.background="#007bff",m.style.color="#fff",m.style.border="none",m.style.borderRadius="6px",m.style.padding="8px 22px",m.style.fontSize="15px",m.style.fontWeight="bold",m.style.cursor="pointer",m.onclick=function(){if(t.step=s.value,"acessa_url"===t.acao)t.acao="acessa_url",t.acaoTexto="Acessa";else{t.acao=d.value;var e=d.options?d.options[d.selectedIndex]:null;t.acaoTexto=e?e.text:d.value}t.nomeElemento=y.value.trim()||t.nomeElemento,saveInteractionsToStorage(),a(),o.remove()};var f=document.createElement("button");f.textContent="Cancelar",f.style.background="#dc3545",f.style.color="#fff",f.style.border="none",f.style.borderRadius="6px",f.style.padding="8px 22px",f.style.fontSize="15px",f.style.fontWeight="bold",f.style.cursor="pointer",f.onclick=function(){return o.remove()},g.appendChild(m),g.appendChild(f),r.appendChild(g),o.appendChild(r),document.body.appendChild(o)}}(n)};var x=document.createElement("button");x.textContent="Ver XPath",x.style.display="block",x.style.width="100%",x.style.background="none",x.style.border="none",x.style.padding="8px 12px",x.style.cursor="pointer",x.style.textAlign="left",x.onmouseover=function(){return x.style.background="#f1f1f1"},x.onmouseout=function(){return x.style.background="none"},x.onclick=function(e){e.stopPropagation(),m.style.display="none",function(e){var t=document.getElementById("gherkin-modal");t&&t.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="260px";var r=document.createElement("div");r.textContent="XPath do elemento",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var i=document.createElement("textarea");i.value=e||"",i.readOnly=!0,i.style.width="100%",i.style.height="60px",i.style.fontSize="13px",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.marginTop="8px",o.appendChild(i);var a=document.createElement("button");a.textContent="Fechar",a.style.background="#007bff",a.style.color="#fff",a.style.border="none",a.style.borderRadius="6px",a.style.padding="8px 22px",a.style.fontSize="15px",a.style.fontWeight="bold",a.style.cursor="pointer",a.onclick=function(){return n.remove()},o.appendChild(a),n.appendChild(o),document.body.appendChild(n)}(t.xpath)};var h=document.createElement("button");h.textContent="Excluir",h.style.display="block",h.style.width="100%",h.style.background="none",h.style.border="none",h.style.padding="8px 12px",h.style.cursor="pointer",h.style.textAlign="left",h.style.color="#dc3545",h.onmouseover=function(){return h.style.background="#fbe9e7"},h.onmouseout=function(){return h.style.background="none"},h.onclick=function(e){e.stopPropagation(),m.style.display="none",window.interactions.splice(n,1),saveInteractionsToStorage(),a()},m.appendChild(f),m.appendChild(x),m.appendChild(h),y.appendChild(m),g.onclick=function(e){e.stopPropagation(),document.querySelectorAll(".gherkin-action-dropdown").forEach((function(e){e!==m&&(e.style.display="none")})),m.style.display="block"===m.style.display?"none":"block"},document.addEventListener("click",(function(){m.style.display="none"})),i.appendChild(y),e.appendChild(i)})),e.scrollTop=e.scrollHeight):e.innerHTML="<p>Clique para capturar um elemento XPATH.</p>")}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(){window.timerInterval&&(clearInterval(window.timerInterval),window.timerInterval=null);var e=document.getElementById("gherkin-timer");e&&(e.textContent="Tempo de execução: 00:00")}function p(e){var t=e.querySelector("#gherkin-minimize"),o=e.querySelector("#gherkin-reopen"),r=e.querySelector("#gherkin-close");t&&(t.onclick=function(){return toggleMinimizePanel(e)}),o&&(o.onclick=function(){return toggleMinimizePanel(e)}),r&&(r.onclick=function(){e.style.opacity="0",setTimeout((function(){return e.remove()}),300),window.panel=null});var a=e.querySelector("#start-feature");a&&(a.onclick=function(){var t=e.querySelector("#feature-name").value.trim();t?(window.currentFeature={name:t,cenarios:[]},window.currentCenario=null,window.gherkinPanelState="cenario",i(e),setTimeout((function(){return p(e)}),100)):n("Informe o nome da feature!","error")});var l=e.querySelector("#start-cenario");l&&(l.onclick=function(){var t=e.querySelector("#cenario-name").value.trim();if(t){var o={step:"Given",acao:"acessa_url",acaoTexto:"que o usuário acessa",nomeElemento:window.location.href,cssSelector:"",xpath:"",timestamp:Date.now()};window.currentCenario={name:t,interactions:[o]},window.interactions=window.currentCenario.interactions,window.gherkinPanelState="gravando",window.isRecording=!0,window.isPaused=!1,window.elapsedSeconds=0,i(e),setTimeout((function(){return p(e)}),100),function(){c(),window.elapsedSeconds=window.elapsedSeconds||0;var e=document.getElementById("gherkin-timer");function t(){if(window.elapsedSeconds++,e){var t=String(Math.floor(window.elapsedSeconds/60)).padStart(2,"0"),n=String(window.elapsedSeconds%60).padStart(2,"0");e.textContent="Tempo de execução: ".concat(t,":").concat(n)}}window.timerInterval=setInterval(t,1e3),t()}()}else n("Informe o nome do cenário!","error")});var s=e.querySelector("#end-cenario");s&&(s.onclick=function(){window.isRecording=!1,window.isPaused=!1,c(),window.currentFeature&&window.currentCenario&&window.currentFeature.cenarios.push(window.currentCenario),function(e,t,n){var o=document.getElementById("gherkin-modal");o&&o.remove();var r=document.createElement("div");r.id="gherkin-modal",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.background="rgba(0,0,0,0.25)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.zIndex="10001";var i=document.createElement("div");i.style.background="#fff",i.style.padding="28px 32px 22px 32px",i.style.borderRadius="12px",i.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.gap="18px",i.style.minWidth="260px";var a=document.createElement("div");a.textContent="Deseja cadastrar um novo cenário?",a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="center",i.appendChild(a);var l=document.createElement("div");l.style.display="flex",l.style.gap="18px";var s=document.createElement("button");s.textContent="Sim",s.style.background="#007bff",s.style.color="#fff",s.style.border="none",s.style.borderRadius="6px",s.style.padding="8px 22px",s.style.fontSize="15px",s.style.fontWeight="bold",s.style.cursor="pointer",s.onclick=function(){r.remove(),t&&t()};var d=document.createElement("button");d.textContent="Não",d.style.background="#dc3545",d.style.color="#fff",d.style.border="none",d.style.borderRadius="6px",d.style.padding="8px 22px",d.style.fontSize="15px",d.style.fontWeight="bold",d.style.cursor="pointer",d.onclick=function(){r.remove(),n&&n()},l.appendChild(s),l.appendChild(d),i.appendChild(l),r.appendChild(i),document.body.appendChild(r)}(0,(function(){window.currentCenario=null,window.interactions=[],window.gherkinPanelState="cenario",i(e),setTimeout((function(){return p(e)}),100)}),(function(){var t=e.querySelector("#end-feature");t&&(t.disabled=!1,t.style.backgroundColor="#dc3545"),n("Cenário encerrado! Você pode encerrar a feature.","success")}))})}if(window.gherkinFeatures||(window.gherkinFeatures=[]),window.currentFeature||(window.currentFeature=null),window.currentCenario||(window.currentCenario=null),window.gherkinPanelState||(window.gherkinPanelState="feature"),void 0===window.isRecording&&(window.isRecording=!1),void 0===window.isPaused&&(window.isPaused=!1),void 0===window.timerInterval&&(window.timerInterval=null),void 0===window.elapsedSeconds&&(window.elapsedSeconds=0),window.interactions||(window.interactions=[]),window.panel||(window.panel=((y=document.createElement("div")).id="gherkin-panel",y.className="gherkin-panel",y.style.position="fixed",y.style.top="10px",y.style.left="10px",y.style.width="480px",y.style.height="700px",y.style.background="#ffffff",y.style.border="1px solid #ccc",y.style.borderRadius="12px",y.style.boxShadow="0 8px 16px rgba(0, 0, 0, 0.2)",y.style.padding="10px",y.style.zIndex="10000",y.style.fontFamily="Roboto, Arial, sans-serif",y.style.transition="opacity 0.3s ease, transform 0.3s ease",y.setAttribute("role","dialog"),y.setAttribute("aria-label","Painel Gherkin Generator"),i(y),document.body.appendChild(y),setTimeout((function(){return initializePanelEvents(y)}),100),y),i(window.panel)),void 0===window.lastInputTarget&&(window.lastInputTarget=null),void 0===window.inputDebounceTimeout&&(window.inputDebounceTimeout=null),void 0===window.lastInputValue&&(window.lastInputValue=""),setTimeout((function(){p(window.panel),chrome.storage.local.get("theme",(function(e){var t=document.getElementById("gherkin-panel");"dark"===e.theme?t.classList.add("dark-theme"):t.classList.remove("dark-theme")})),function(e){var t,n,o=!1;e.addEventListener("mousedown",(function(r){r.target.closest(".button-container")||(o=!0,t=r.clientX-e.getBoundingClientRect().left,n=r.clientY-e.getBoundingClientRect().top,e.style.cursor="move")})),document.addEventListener("mousemove",(function(r){o&&(e.style.left="".concat(r.clientX-t,"px"),e.style.top="".concat(r.clientY-n,"px"),e.style.right="auto",e.style.bottom="auto")})),document.addEventListener("mouseup",(function(){o&&(o=!1,e.style.cursor="default")}))}(window.panel)}),100),document.addEventListener("click",(function(e){if(window.isRecording&&!window.isPaused)try{if("undefined"==typeof chrome||!chrome.runtime||!chrome.runtime.id)return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)return;var t=o(e.target),n=r(e.target),i=(e.target.innerText||e.target.value||e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.tagName).trim();i||(i=e.target.tagName);var l=document.getElementById("gherkin-action-select"),c=l?l.options[l.selectedIndex].text:"Clicar",p=l?l.value:"clica",u={};if("espera_segundos"===p){var y=document.getElementById("gherkin-wait-seconds"),m=1;y&&y.value&&(m=parseInt(y.value,10),(isNaN(m)||m<1)&&(m=1)),u.tempoEspera=m}var f=window.interactions[window.interactions.length-1],x=f&&f.acao===p&&f.cssSelector===t&&f.nomeElemento===i;if("espera_segundos"===p&&f&&void 0!==f.tempoEspera&&(x=x&&f.tempoEspera===u.tempoEspera),x)return;var h="Then",w=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(w=1),0===window.interactions.length?h="Given":1===window.interactions.length&&0===w||1===window.interactions.length&&1===w?h="When":2===window.interactions.length&&1===w&&(h="Then"),window.givenAcessaUrlAdded=!1,window.interactions.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({step:h,acao:p,acaoTexto:c,nomeElemento:i,cssSelector:t,xpath:n,timestamp:Date.now()},u)),a(),g()}catch(e){console.error("Erro ao registrar clique:",e)}})),document.addEventListener("input",(function(e){window.isRecording&&!window.isPaused&&e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)&&(e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content")||(window.lastInputTarget=e.target,window.lastInputValue=e.target.value,window.inputDebounceTimeout&&clearTimeout(window.inputDebounceTimeout),window.inputDebounceTimeout=setTimeout((function(){if(window.lastInputTarget){var e=window.lastInputTarget.value;if(""!==e&&void 0!==e){var t=o(window.lastInputTarget),n=r(window.lastInputTarget),i=(window.lastInputTarget.getAttribute("aria-label")||window.lastInputTarget.getAttribute("name")||window.lastInputTarget.id||window.lastInputTarget.className||window.lastInputTarget.tagName).toString().trim();i||(i=window.lastInputTarget.tagName),document.getElementById("gherkin-action-select");var l="preenche",s=window.interactions[window.interactions.length-1];if(!s||s.acao!==l||s.cssSelector!==t||s.nomeElemento!==i||s.valorPreenchido!==e){var d="Then",c=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(c=1),0===window.interactions.length?d="Given":1===window.interactions.length&&0===c||1===window.interactions.length&&1===c?d="When":2===window.interactions.length&&1===c&&(d="Then"),window.givenAcessaUrlAdded=!1,window.interactions.push({step:d,acao:l,acaoTexto:"Preencher",nomeElemento:i,cssSelector:t,xpath:n,valorPreenchido:e,timestamp:Date.now()}),a(),g(),window.lastInputTarget=null}}}}),700)))}),!0),void 0!==i){var u=i;i=function(e){u(e),"gravando"===window.gherkinPanelState&&setTimeout(a,10)}}var y;function g(){try{chrome.storage.local.set({gherkinInteractions:window.interactions})}catch(e){}}"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((function(e,t,n){"keepAlive"===e.action&&n({status:"alive"})}))})();