/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==o.return||o.return()}finally{if(c)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("div");n.textContent=e,n.style.position="fixed",n.style.bottom="20px",n.style.left="50%",n.style.transform="translateX(-50%)",n.style.padding="10px 20px",n.style.backgroundColor="success"===t?"#28a745":"#dc3545",n.style.color="#fff",n.style.borderRadius="5px",n.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",n.style.zIndex="10001",n.style.fontSize="14px",n.style.fontWeight="bold",n.style.transition="opacity 0.3s ease, transform 0.3s ease",n.style.opacity="1",n.style.animation="fadeInOut 3s ease",document.body.appendChild(n),setTimeout((function(){n.style.opacity="0",setTimeout((function(){return n.remove()}),300)}),3e3)}function o(e){return e&&e.nodeType===Node.ELEMENT_NODE?function(e){var t=e.tagName.toLowerCase();if(e.id)return t+="#".concat(e.id);if(e.className){var n=e.className.split(" ").filter((function(e){return""!==e.trim()})).map((function(e){return".".concat(e)})).join("");t+=n}return["name","type","aria-label","data-pc-name"].forEach((function(n){e.hasAttribute(n)&&(t+="[".concat(n,'="').concat(e.getAttribute(n),'"]'))})),t}(e):null}function r(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return null;if(t.id&&1===document.querySelectorAll("#".concat(CSS.escape(t.id))).length)return"//*[@id='".concat(t.id,"']");for(var n=["data-testid","data-qa","name","aria-label","title"],o=0,r=n;o<r.length;o++){var a=r[o],i=t.getAttribute(a);if(i&&1===document.querySelectorAll("[".concat(a,"='").concat(i,"']")).length)return"//*[@".concat(a,"='").concat(i,"']")}for(var l="",c=t;c&&c.nodeType===Node.ELEMENT_NODE&&c!==document.body;){var s,d=c.tagName.toLowerCase(),u=e(n);try{for(u.s();!(s=u.n()).done;){var p=s.value,m=c.getAttribute(p);if(m&&1===document.querySelectorAll("[".concat(p,"='").concat(m,"']")).length)return l="//*[@".concat(p,"='").concat(m,"']").concat(l?"/"+l:"")}}catch(e){u.e(e)}finally{u.f()}var y=Array.from(c.parentNode.children).filter((function(e){return e.tagName===c.tagName}));if(y.length>1){var g=y.indexOf(c)+1;d+="[".concat(g,"]")}l=l?"".concat(d,"/").concat(l):d,c=c.parentNode}return"//"+l}var a={nomePadraoFeature:"Nova Feature",nomePadraoCenario:"Novo Cenário",templateStep:{Given:"Given que o usuário {acao}",When:"When o usuário {acao}",Then:"Then o usuário {acao}"},templateUpload:'When faz upload do arquivo "{arquivo}" no campo {elemento}',templateLogin:'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"',templateEspera:"When espera o elemento aparecer: {seletor}"};function i(e){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.get("bddConfig",(function(t){e(Object.assign({},a,t.bddConfig||{}))})):e(a)}function l(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function a(n,o,r,a){var l=o&&o.prototype instanceof s?o:s,d=Object.create(l.prototype);return c(d,"_invoke",function(n,o,r){var a,l,c,s=0,d=r||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return a=t,l=0,c=e,p.n=n,i}};function m(n,o){for(l=n,c=o,t=0;!u&&s&&!r&&t<d.length;t++){var r,a=d[t],m=p.p,y=a[2];n>3?(r=y===o)&&(l=a[4]||3,c=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=m&&((r=n<2&&m<a[1])?(l=0,p.v=o,p.n=a[1]):m<y&&(r=n<3||a[0]>o||o>y)&&(a[4]=n,a[5]=o,p.n=y,l=0))}if(r||n>1)return i;throw u=!0,o}return function(r,d,y){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,y),l=d,c=y;(t=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(p.n=-1),m(l,c)):p.n=c:p.v=c);try{if(s=2,a){if(l||(r="next"),t=a[r]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((t=(u=p.n<0)?c:n.call(o,p))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:u}}}(n,r,a),!0),d}var i={};function s(){}function d(){}function u(){}t=Object.getPrototypeOf;var p=[][o]?t(t([][o]())):(c(t={},o,(function(){return this})),t),m=u.prototype=s.prototype=Object.create(p);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,c(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=u,c(m,"constructor",u),c(u,"constructor",d),d.displayName="GeneratorFunction",c(u,r,"GeneratorFunction"),c(m),c(m,r,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),(l=function(){return{w:a,m:y}})()}function c(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}c=function(e,t,n,o){if(t)r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n;else{var a=function(t,n){c(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},c(e,t,n,o)}function s(e,t,n,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function i(e){s(a,o,r,i,l,"next",e)}function l(e){s(a,o,r,i,l,"throw",e)}i(void 0)}))}}function u(e){var t="";t+='\n        <div class="gherkin-panel-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; min-height: 40px;">\n            <h3 style="margin: 0; font-size: 18px; color: #007bff; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);">GERADOR DE TESTES AUTOMATIZADOS</h3>\n            <div class="button-container-top" style="display: flex; gap: 6px; align-items: center;">\n                <button id="gherkin-reopen" title="Reabrir" style="display: none; background-color: transparent; border: none; cursor: pointer; font-size: 14px; font-weight: bold; color: #28a745;">Abrir</button>\n                <button id="gherkin-minimize" title="Minimizar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffc107" viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>\n                </button>\n                <button id="gherkin-close" title="Fechar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#dc3545" viewBox="0 0 24 24"><path d="M18.3 5.71L12 12l6.3 6.29-1.42 1.42L12 13.41l-6.29 6.3-1.42-1.42L10.59 12 4.29 5.71 5.71 4.29 12 10.59l6.29-6.3z"/></svg>\n                </button>\n            </div>\n        </div>\n    ',"feature"===window.gherkinPanelState?t+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="feature-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome da Feature:</label>\n                <input id="feature-name" type="text" placeholder="Ex: Login" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-feature" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Feature</button>\n            </div>\n        ':"cenario"===window.gherkinPanelState?t+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="cenario-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome do Cenário:</label>\n                <input id="cenario-name" type="text" placeholder="Ex: Login com sucesso" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-cenario" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Cenário</button>\n            </div>\n        ':"gravando"===window.gherkinPanelState?t+='\n            <div class="gherkin-content">\n                <p id="gherkin-status" style="font-size: 14px; margin: 5px 0; color: #555;">Status: Gravando</p>\n                <p style="font-size: 14px; color: #0D47A1; font-weight: bold;">Feature: '.concat(window.currentFeature?window.currentFeature.name:"",'</p>\n                <p style="font-size: 14px; color: #007bff; font-weight: bold;">Cenário: ').concat(window.currentCenario?window.currentCenario.name:"",'</p>\n                <div id="recording-indicator" style="display: none; margin: 10px auto; width: 10px; height: 10px; background-color: #ff0000; border-radius: 50%; animation: pulse 1s infinite;"></div>\n                <p id="gherkin-timer" style="font-size: 14px; margin: 5px 0; color: #555;">Tempo de execução: 00:00</p>\n                <label for="gherkin-action-select" style="font-size: 13px; margin-top: 8px;">Ação:</label>\n                <select id="gherkin-action-select" style="width: 100%; padding: 7px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 10px; font-size: 14px;">\n                    <optgroup label="Ações">\n                        <option value="clica">Clicar</option>\n                        <option value="altera">Alterar</option>\n                        <option value="preenche">Preencher</option>\n                        <option value="seleciona">Selecionar</option>\n                        <option value="radio">Botão de rádio</option>\n                        <option value="caixa">Caixa de seleção</option>\n                        <option value="navega">Navegar</option>\n                        <option value="login">Login</option>\n                        <option value="upload">Upload de arquivo</option>\n                    </optgroup>\n                    <optgroup label="Validações">\n                        <option value="valida_existe">Validar que existe</option>\n                        <option value="valida_nao_existe">Validar que não existe</option>\n                        <option value="valida_contem">Validar que contém</option>\n                        <option value="valida_nao_contem">Validar que não contém</option>\n                        <option value="valida_deve_ser">Validar que deve ser</option>\n                        <option value="valida_nao_deve_ser">Validar que não deve ser</option>\n                    </optgroup>\n                    <optgroup label="Esperas">\n                        <option value="espera_segundos">Esperar segundos</option>\n                        <option value="espera_elemento">Esperar elemento aparecer</option>\n                        <option value="espera_nao_existe">Esperar elemento desaparecer</option>\n                        <option value="espera_existe">Esperar que o elemento exista</option>\n                        <option value="espera_habilitado">Esperar que o elemento esteja habilitado</option>\n                        <option value="espera_desabilitado">Esperar que o elemento esteja desabilitado</option>\n                    </optgroup>\n                </select>\n                <div style="font-size:12px;color:#0D47A1;margin-bottom:8px;">\n                    Dica: Para gravar upload de arquivo, clique em um campo de upload na página ou selecione "Upload de arquivo" acima.<br>\n                    Para cada ação, siga a orientação exibida abaixo do seletor.\n                </div>\n                <div id="gherkin-log" style="overflow-y: auto; height: 350px; margin-top: 10px; border: 1px solid #ccc; padding: 5px; font-size: 13px; background-color: #f9f9f9;"></div>\n                <div style="display: flex; flex-wrap: nowrap; gap: 4px; margin-top: 10px; justify-content: center; align-items: center; width: 100%;">\n                    <button id="end-cenario" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;">Encerrar Cenário</button>\n                    <button id="end-feature" style="background-color: #6c757d; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;" disabled>Encerrar Feature</button>\n                    <button id="gherkin-pause" style="background-color: #ffc107; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Pausar</button>\n                    <button id="gherkin-clear" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Limpar</button>\n                </div>\n            </div>\n        '):"exportar"===window.gherkinPanelState&&(t+='<div class="gherkin-content" style="padding: 10px;">\n            <h4 style="color: #0D47A1;">Selecione as features para exportar:</h4>\n            <form id="export-form" style="max-height: 250px; overflow-y: auto; margin-bottom: 15px;">',window.gherkinFeatures.forEach((function(e,n){t+="<div style='margin-bottom: 8px;'><input type='checkbox' id='feature-export-".concat(n,"' name='feature-export' value='").concat(n,"'><label for='feature-export-").concat(n,"' style='margin-left: 8px;'>").concat(e.name,"</label></div>")})),t+='</form>\n            <button id="export-selected" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px;">Exportar Selecionadas</button>\n            <button id="new-feature" style="background-color: #28a745; color: white; border: none; border-radius: 5px; padding: 10px 20px; margin-left: 10px;">Nova Feature</button>\n        </div>'),t+='<p id="gherkin-footer" style="position: absolute; bottom: 0px; right: 10px; font-size: 10px; margin: 0; color: #555;">By: Matheus Ferreira de Oliveira</p>',e.innerHTML=t}function p(e){var t,n,o=!1,r=e.querySelector(".gherkin-panel-header");function a(r){r.target.closest(".button-container-top")||0===r.button&&(o=!0,t=r.clientX-e.getBoundingClientRect().left,n=r.clientY-e.getBoundingClientRect().top,e.style.cursor="move",document.body.style.userSelect="none")}function i(r){o&&(e.style.left="".concat(r.clientX-t,"px"),e.style.top="".concat(r.clientY-n,"px"),e.style.right="auto",e.style.bottom="auto")}function l(){o&&(o=!1,e.style.cursor="default",document.body.style.userSelect="")}r||(r=e.querySelector('div[style*="display: flex"][style*="justify-content: space-between"]')||e),r.removeEventListener("mousedown",a),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l),r.addEventListener("mousedown",a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function m(e,t,n){var o=document.getElementById("gherkin-modal");o&&o.remove();var r=document.createElement("div");r.id="gherkin-modal",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.background="rgba(0,0,0,0.25)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.zIndex="10001";var a=document.createElement("div");a.style.background="#fff",a.style.padding="28px 32px 22px 32px",a.style.borderRadius="12px",a.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.gap="18px",a.style.minWidth="260px";var i=document.createElement("div");i.textContent=e,i.style.fontSize="17px",i.style.color="#0D47A1",i.style.textAlign="center",a.appendChild(i);var l=document.createElement("div");l.style.display="flex",l.style.gap="18px";var c=document.createElement("button");c.textContent="Sim",c.style.background="#007bff",c.style.color="#fff",c.style.border="none",c.style.borderRadius="6px",c.style.padding="8px 22px",c.style.fontSize="15px",c.style.fontWeight="bold",c.style.cursor="pointer",c.onclick=function(){r.remove(),t&&t()};var s=document.createElement("button");s.textContent="Não",s.style.background="#dc3545",s.style.color="#fff",s.style.border="none",s.style.borderRadius="6px",s.style.padding="8px 22px",s.style.fontSize="15px",s.style.fontWeight="bold",s.style.cursor="pointer",s.onclick=function(){r.remove(),n&&n()},l.appendChild(c),l.appendChild(s),a.appendChild(l),r.appendChild(a),document.body.appendChild(r)}function y(){window.__lastLogHighlight&&window.__lastLogHighlight.classList.remove("gherkin-log-highlight");var e=document.getElementById("gherkin-log");if(e)if(e.innerHTML="",window.interactions&&0!==window.interactions.length){if(i((function(t){window.interactions.forEach((function(n,o){var r="";if(n.stepText)r=n.stepText;else if("acessa_url"===n.acao){var a=t.templateStep&&t.templateStep.Given||"Given que o usuário acessa {url}";r=a.replace("{url}",n.nomeElemento||"URL")}else if("login"===n.acao)r=t.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"';else if("upload"===n.acao){var i=t.templateUpload||'{step} faz upload do arquivo "{arquivo}" no campo {elemento}';r=i.replace("{step}",n.step||"When").replace("{arquivo}",n.nomeArquivo||"ARQUIVO_EXEMPLO").replace("{elemento}",n.nomeElemento||"CAMPO_UPLOAD")}else if("preenche"===n.acao){var l=t.templateStep&&t.templateStep[n.step]||"".concat(n.step," ").concat(n.acaoTexto?n.acaoTexto.toLowerCase():""," no {elemento}");r=l.replace("{acao}",n.acaoTexto?n.acaoTexto.toLowerCase():"preenche").replace("{elemento}",n.nomeElemento||"ELEMENTO"),void 0!==n.valorPreenchido&&(r+=' (valor: "'.concat(n.valorPreenchido,'")'))}else if("espera_segundos"===n.acao){var c=t.templateStep&&t.templateStep[n.step]||"".concat(n.step," ").concat(n.acaoTexto?n.acaoTexto.toLowerCase():"espera"," no {elemento}");r=c.replace("{acao}",n.acaoTexto?n.acaoTexto.toLowerCase():"espera").replace("{elemento}",n.nomeElemento||"ELEMENTO"),void 0!==n.tempoEspera&&(r+=" (".concat(n.tempoEspera," segundos)"))}else if("espera_elemento"===n.acao){var s=t.templateEspera||"{step} espera o elemento aparecer: {seletor}";r=s.replace("{step}",n.step||"When").replace("{seletor}",n.esperaSeletor||n.cssSelector||"SELETOR_ELEMENTO")}else{var d=t.templateStep&&t.templateStep[n.step]||"".concat(n.step," ").concat(n.acaoTexto?n.acaoTexto.toLowerCase():""," no {elemento}");r=d.replace("{acao}",n.acaoTexto?n.acaoTexto.toLowerCase():"").replace("{elemento}",n.nomeElemento||"ELEMENTO")}var u=r.length>300,p=document.createElement("div");p.className="gherkin-log-entry";var g=!1;if(u){var f=document.createElement("span"),h=r.slice(0,80);r.length>80&&(h+="..."),f.textContent=h,f.style.color="#dc3545",f.style.flex="1",f.title="Clique no botão para visualizar o log completo.",p.appendChild(f);var v=document.createElement("button");v.className="gherkin-large-log-btn",v.title="Visualizar log completo",v.style.background="none",v.style.border="none",v.style.cursor="pointer",v.style.marginLeft="6px",v.style.padding="2px",v.style.display="flex",v.style.alignItems="center",v.setAttribute("aria-label","Visualizar log completo"),v.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="#007bff"/><path d="M8 12l2.5 2.5L16 9" stroke="#fff" stroke-width="2" fill="none"/></svg>',v.onclick=function(e){e.stopPropagation(),function(e){var t=document.getElementById("gherkin-modal");t&&t.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="320px",o.style.maxWidth="90vw",o.style.maxHeight="80vh";var r=document.createElement("div");r.textContent="Log completo",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a=document.createElement("textarea");a.value=e,a.readOnly=!0,a.style.width="100%",a.style.height="200px",a.style.fontSize="13px",a.style.padding="7px",a.style.borderRadius="5px",a.style.border="1px solid #ccc",a.style.marginTop="8px",a.style.resize="vertical",o.appendChild(a);var i=document.createElement("button");i.textContent="Fechar",i.style.background="#007bff",i.style.color="#fff",i.style.border="none",i.style.borderRadius="6px",i.style.padding="8px 22px",i.style.fontSize="15px",i.style.fontWeight="bold",i.style.cursor="pointer",i.onclick=function(){return n.remove()},o.appendChild(i),n.appendChild(o),document.body.appendChild(n)}(r)},p.appendChild(v)}else{var x=document.createElement("span");x.textContent=r,x.style.flex="1",setTimeout((function(){x.offsetHeight<x.scrollHeight||x.offsetWidth<x.scrollWidth?x.title=r:x.removeAttribute("title")}),0),p.appendChild(x);var w=document.createElement("button");w.className="gherkin-expand-btn",w.title="Expandir log",w.style.background="none",w.style.border="none",w.style.cursor="pointer",w.style.marginLeft="6px",w.style.padding="2px",w.style.display="flex",w.style.alignItems="center",w.setAttribute("aria-label","Expandir log"),w.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',w.onclick=function(e){e.stopPropagation(),(g=!g)?(x.textContent=r,p.classList.add("expanded"),w.title="Recolher log",w.setAttribute("aria-label","Recolher log"),w.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>'):(p.classList.remove("expanded"),w.title="Expandir log",w.setAttribute("aria-label","Expandir log"),w.innerHTML='<svg width="18" height="18" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>')},p.appendChild(w)}var b=document.createElement("div");b.className="gherkin-action-menu",b.style.position="relative",b.style.marginLeft="6px",b.style.display="inline-block";var E=document.createElement("button");E.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></svg>',E.style.background="none",E.style.border="none",E.style.cursor="pointer",E.style.padding="2px",E.title="Ações",b.appendChild(E);var k=document.createElement("div");k.className="gherkin-action-dropdown",k.style.display="none",k.style.position="absolute",k.style.right="0",k.style.top="24px",k.style.background="#fff",k.style.border="1px solid #ccc",k.style.borderRadius="6px",k.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)",k.style.zIndex="10002",k.style.minWidth="120px";var S=document.createElement("button");S.textContent="Editar",S.style.display="block",S.style.width="100%",S.style.background="none",S.style.border="none",S.style.padding="8px 12px",S.style.cursor="pointer",S.style.textAlign="left",S.onclick=function(e){e.stopPropagation(),k.style.display="none",function(e){var t=window.interactions[e];if(t){var n=document.getElementById("gherkin-modal");n&&n.remove();var o=document.createElement("div");o.id="gherkin-modal",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.background="rgba(0,0,0,0.25)",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="10003";var r=document.createElement("div");r.style.background="#fff",r.style.padding="28px 32px 22px 32px",r.style.borderRadius="12px",r.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="18px",r.style.minWidth="260px";var a=document.createElement("div");a.textContent="Editar interação",a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="center",r.appendChild(a);var i=document.createElement("label");i.textContent="Passo BDD:",i.style.fontWeight="bold",i.style.marginBottom="4px",r.appendChild(i);var l=document.createElement("select");l.style.width="100%",l.style.padding="7px",l.style.borderRadius="5px",l.style.border="1px solid #ccc",l.style.fontSize="14px",["Given","When","Then"].forEach((function(e){var n=document.createElement("option");n.value=e,n.textContent=e,t.step===e&&(n.selected=!0),l.appendChild(n)})),r.appendChild(l);var c,s=document.createElement("label");if(s.textContent="Ação:",s.style.fontWeight="bold",s.style.marginBottom="4px",r.appendChild(s),"acessa_url"===t.acao)(c=document.createElement("input")).type="text",c.value="acessa_url",c.disabled=!0,c.style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px",c.style.background="#f5f5f5";else{(c=document.createElement("select")).style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px";var d=document.getElementById("gherkin-action-select");d&&d.innerHTML.trim()?c.innerHTML=d.innerHTML:c.innerHTML='<option value="clica">Clicar</option>',c.value=t.acao}r.appendChild(c);var u=document.createElement("label");u.textContent="Nome do elemento:",u.style.fontWeight="bold",u.style.marginBottom="4px",r.appendChild(u);var p=document.createElement("input");p.type="text",p.value=t.nomeElemento,p.style.width="100%",p.style.padding="7px",p.style.borderRadius="5px",p.style.border="1px solid #ccc",p.style.fontSize="14px",r.appendChild(p);var m=null;if("upload"===t.acao){var g=document.createElement("label");g.textContent="Nome do arquivo de exemplo:",g.style.fontWeight="bold",g.style.marginBottom="4px",r.appendChild(g),(m=document.createElement("input")).type="text",m.value=t.nomeArquivo||"",m.style.width="100%",m.style.padding="7px",m.style.borderRadius="5px",m.style.border="1px solid #ccc",m.style.fontSize="14px",r.appendChild(m)}var f=document.createElement("div");f.style.display="flex",f.style.gap="18px",f.style.marginTop="12px";var h=document.createElement("button");h.textContent="Salvar",h.style.background="#007bff",h.style.color="#fff",h.style.border="none",h.style.borderRadius="6px",h.style.padding="8px 22px",h.style.fontSize="15px",h.style.fontWeight="bold",h.style.cursor="pointer",h.onclick=function(){if(t.step=l.value,"acessa_url"===t.acao)t.acao="acessa_url",t.acaoTexto="Acessa";else{t.acao=c.value;var e=c.options?c.options[c.selectedIndex]:null;t.acaoTexto=e?e.text:c.value}t.nomeElemento=p.value.trim()||t.nomeElemento,"upload"===t.acao&&m&&(t.nomeArquivo=m.value.trim()||t.nomeArquivo),saveInteractionsToStorage(),y(),o.remove()};var v=document.createElement("button");v.textContent="Cancelar",v.style.background="#dc3545",v.style.color="#fff",v.style.border="none",v.style.borderRadius="6px",v.style.padding="8px 22px",v.style.fontSize="15px",v.style.fontWeight="bold",v.style.cursor="pointer",v.onclick=function(){return o.remove()},f.appendChild(h),f.appendChild(v),r.appendChild(f),o.appendChild(r),document.body.appendChild(o)}}(o)};var T=document.createElement("button");T.textContent="Ver XPath",T.style.display="block",T.style.width="100%",T.style.background="none",T.style.border="none",T.style.padding="8px 12px",T.style.cursor="pointer",T.style.textAlign="left",T.onmouseover=function(){return T.style.background="#f1f1f1"},T.onmouseout=function(){return T.style.background="none"},T.onclick=function(e){e.stopPropagation(),k.style.display="none",function(e){var t=document.getElementById("gherkin-modal");t&&t.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="260px";var r=document.createElement("div");r.textContent="XPath do elemento",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a=document.createElement("textarea");a.value=e||"",a.readOnly=!0,a.style.width="100%",a.style.height="60px",a.style.fontSize="13px",a.style.padding="7px",a.style.borderRadius="5px",a.style.border="1px solid #ccc",a.style.marginTop="8px",o.appendChild(a);var i=document.createElement("button");i.textContent="Fechar",i.style.background="#007bff",i.style.color="#fff",i.style.border="none",i.style.borderRadius="6px",i.style.padding="8px 22px",i.style.fontSize="15px",i.style.fontWeight="bold",i.style.cursor="pointer",i.onclick=function(){return n.remove()},o.appendChild(i),n.appendChild(o),document.body.appendChild(n)}(n.xpath)};var C=document.createElement("button");if(C.textContent="Excluir",C.style.display="block",C.style.width="100%",C.style.background="none",C.style.border="none",C.style.padding="8px 12px",C.style.cursor="pointer",C.style.textAlign="left",C.style.color="#dc3545",C.onmouseover=function(){return C.style.background="#fbe9e7"},C.onmouseout=function(){return C.style.background="none"},C.onclick=function(e){e.stopPropagation(),k.style.display="none",m("Tem certeza que deseja excluir esta ação?",(function(){window.interactions.splice(o,1),saveInteractionsToStorage(),y()}))},["login","espera_elemento","espera_nao_existe","upload"].includes(n.acao)){var L=document.createElement("button");L.textContent="Ver exemplo Selenium",L.style.display="block",L.style.width="100%",L.style.background="none",L.style.border="none",L.style.padding="8px 12px",L.style.cursor="pointer",L.style.textAlign="left",L.onmouseover=function(){return L.style.background="#e3f2fd"},L.onmouseout=function(){return L.style.background="none"},L.onclick=function(e){e.stopPropagation(),k.style.display="none",function(e){var t=document.getElementById("gherkin-modal");t&&t.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="320px",o.style.maxWidth="90vw",o.style.maxHeight="80vh";var r=document.createElement("div");r.textContent="Exemplo Selenium (Python)",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a="";"login"===e.acao?a="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\ndriver = webdriver.Chrome()\ndriver.get('URL_DA_PAGINA')\n\n# Preencher usuário\ndriver.find_element(By.CSS_SELECTOR, '".concat(e.userField||"SELETOR_USUARIO","').send_keys('SEU_USUARIO')\n# Preencher senha\ndriver.find_element(By.CSS_SELECTOR, '").concat(e.passField||"SELETOR_SENHA","').send_keys('SUA_SENHA')\n# Clicar no botão de login\ndriver.find_element(By.CSS_SELECTOR, '").concat(e.cssSelector||"SELETOR_BOTAO_LOGIN","').click()\n"):"espera_elemento"===e.acao?a="from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\n# Esperar até o elemento aparecer\nWebDriverWait(driver, 10).until(\n    EC.presence_of_element_located((By.CSS_SELECTOR, '".concat(e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO","'))\n)\n"):"espera_nao_existe"===e.acao?a="from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\n# Esperar até o elemento desaparecer\nWebDriverWait(driver, 10).until_not(\n    EC.presence_of_element_located((By.CSS_SELECTOR, '".concat(e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO","'))\n)\n"):"upload"===e.acao&&(a="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\ndriver = webdriver.Chrome()\ndriver.get('URL_DA_PAGINA')\n\n# Upload de arquivo\ndriver.find_element(By.CSS_SELECTOR, '".concat(e.cssSelector||"SELETOR_INPUT_FILE","').send_keys(r'C:/caminho/para/").concat(e.nomeArquivo||"ARQUIVO_EXEMPLO","')\n"));var i=document.createElement("textarea");i.value=a,i.readOnly=!0,i.style.width="100%",i.style.height="220px",i.style.fontSize="13px",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.marginTop="8px",i.style.resize="vertical",o.appendChild(i);var l=document.createElement("button");l.textContent="Fechar",l.style.background="#007bff",l.style.color="#fff",l.style.border="none",l.style.borderRadius="6px",l.style.padding="8px 22px",l.style.fontSize="15px",l.style.fontWeight="bold",l.style.cursor="pointer",l.onclick=function(){return n.remove()},o.appendChild(l),n.appendChild(o),document.body.appendChild(n)}(n)},k.appendChild(L)}k.appendChild(S),k.appendChild(T),k.appendChild(C),b.appendChild(k),E.onclick=function(e){e.stopPropagation(),document.querySelectorAll(".gherkin-action-dropdown").forEach((function(e){e!==k&&(e.style.display="none")})),k.style.display="block"===k.style.display?"none":"block"},setTimeout((function(){document.addEventListener("click",(function e(t){k.style.display="none",document.removeEventListener("click",e)}))}),0),p.appendChild(b),e.appendChild(p),setTimeout((function(){p.classList.add("gherkin-log-highlight"),window.__lastLogHighlight=p,setTimeout((function(){p.classList.remove("gherkin-log-highlight")}),700)}),10)})),e.scrollTop=e.scrollHeight})),!document.getElementById("gherkin-log-style")){var t=document.createElement("style");t.id="gherkin-log-style",t.innerHTML="\n.gherkin-log-highlight {\n    animation: gherkinHighlight 0.7s;\n    background: #e3f2fd !important;\n}\n@keyframes gherkinHighlight {\n    0% { background: #e3f2fd; }\n    100% { background: transparent; }\n}\n.gherkin-action-menu button, .gherkin-action-dropdown button, .gherkin-content button, #gherkin-panel button {\n    transition: background 0.2s, color 0.2s, box-shadow 0.2s;\n}\n.gherkin-action-menu button:hover, .gherkin-action-dropdown button:hover, .gherkin-content button:hover, #gherkin-panel button:hover {\n    background: #e3f2fd !important;\n    color: #0D47A1 !important;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n.gherkin-action-menu button:focus, .gherkin-action-dropdown button:focus, .gherkin-content button:focus, #gherkin-panel button:focus {\n    outline: 2px solid #1976d2;\n    outline-offset: 2px;\n}\n",document.head.appendChild(t)}}else e.innerHTML="<p>Clique para capturar um elemento XPATH.</p>"}function g(e){var t=e.querySelector("#gherkin-minimize"),o=e.querySelector("#gherkin-reopen"),r=e.querySelector("#gherkin-close");t&&(t.onclick=function(){return toggleMinimizePanel(e)}),o&&(o.onclick=function(){return toggleMinimizePanel(e)}),r&&(r.onclick=function(){e.style.opacity="0",setTimeout((function(){return e.remove()}),300),window.panel=null});var a=e.querySelector("#start-feature");a&&(a.onclick=function(){var t=e.querySelector("#feature-name").value.trim();t?(window.currentFeature={name:t,cenarios:[]},window.currentCenario=null,window.gherkinPanelState="cenario",u(e),setTimeout((function(){return g(e)}),100)):n("Informe o nome da feature!","error")});var i=e.querySelector("#start-cenario");i&&(i.onclick=function(){var t=e.querySelector("#cenario-name").value.trim();if(t){var o={step:"Given",acao:"acessa_url",acaoTexto:"que o usuário acessa",nomeElemento:window.location.href,cssSelector:"",xpath:"",timestamp:Date.now()};window.currentCenario={name:t,interactions:[o]},window.interactions=window.currentCenario.interactions,window.gherkinPanelState="gravando",window.isRecording=!0,window.isPaused=!1,window.elapsedSeconds=0,u(e),setTimeout((function(){return g(e)}),100),"function"==typeof startTimer&&startTimer()}else n("Informe o nome do cenário!","error")});var c=e.querySelector("#end-cenario");c&&(c.onclick=function(){window.isRecording=!1,window.isPaused=!1,"function"==typeof stopTimer&&stopTimer(),window.currentFeature&&window.currentCenario&&window.currentFeature.cenarios.push(window.currentCenario),m("Deseja cadastrar um novo cenário?",(function(){window.currentCenario=null,window.interactions=[],window.gherkinPanelState="cenario",u(e),setTimeout((function(){return g(e)}),100)}),(function(){var t=e.querySelector("#end-feature");t&&(t.disabled=!1,t.style.backgroundColor="#dc3545"),n("Cenário encerrado! Você pode encerrar a feature.","success")}))});var s=e.querySelector("#export-project");s&&(s.onclick=d(l().m((function t(){var o,r;return l().w((function(t){for(;;)switch(t.n){case 0:if(o=e.querySelector("#export-form"),0!==(r=Array.from(o.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}))).length){t.n=1;break}return n("Selecione ao menos uma feature!","error"),t.a(2);case 1:"function"==typeof exportSelectedFeatures&&exportSelectedFeatures(r);case 2:return t.a(2)}}),t)}))));var p=e.querySelector("#end-feature");p&&(p.onclick=function(){m("Deseja cadastrar uma nova feature?",(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),n("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",u(e),setTimeout((function(){return g(e)}),100)):n("Adicione pelo menos um cenário!","error")}),(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),n("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="exportar",u(e),setTimeout((function(){return g(e)}),100)):n("Adicione pelo menos um cenário!","error")}))});var y=e.querySelector("#export-selected");y&&(y.onclick=function(){var t=e.querySelector("#export-form");if(t){var o=Array.from(t.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}));0!==o.length?"function"==typeof exportSelectedFeatures?exportSelectedFeatures(o):window.exportSelectedFeatures&&window.exportSelectedFeatures(o):n("Selecione ao menos uma feature!","error")}else n("Formulário de exportação não encontrado!","error")});var f=e.querySelector("#new-feature");f&&(f.onclick=function(){window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",u(e),setTimeout((function(){return g(e)}),100)})}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function v(e,t,n){return(t=function(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}if(window.gherkinFeatures||(window.gherkinFeatures=[]),window.currentFeature||(window.currentFeature=null),window.currentCenario||(window.currentCenario=null),window.gherkinPanelState||(window.gherkinPanelState="feature"),void 0===window.isRecording&&(window.isRecording=!1),void 0===window.isPaused&&(window.isPaused=!1),void 0===window.timerInterval&&(window.timerInterval=null),void 0===window.elapsedSeconds&&(window.elapsedSeconds=0),window.interactions||(window.interactions=[]),window.panel||(window.panel=function(){var e=document.getElementById("gherkin-panel");e&&e.remove();var t=document.createElement("div");return t.id="gherkin-panel",t.className="gherkin-panel",t.style.position="fixed",t.style.top="10px",t.style.left="10px",t.style.width="480px",t.style.height="700px",t.style.background="#ffffff",t.style.border="1px solid #ccc",t.style.borderRadius="12px",t.style.boxShadow="0 8px 16px rgba(0, 0, 0, 0.2)",t.style.padding="10px",t.style.zIndex="10000",t.style.fontFamily="Roboto, Arial, sans-serif",t.style.transition="opacity 0.3s ease, transform 0.3s ease",t.setAttribute("role","dialog"),t.setAttribute("aria-label","Painel Gherkin Generator"),u(t),document.body.appendChild(t),t}(),u(window.panel)),void 0===window.lastInputTarget&&(window.lastInputTarget=null),void 0===window.inputDebounceTimeout&&(window.inputDebounceTimeout=null),void 0===window.lastInputValue&&(window.lastInputValue=""),setTimeout((function(){g(window.panel),chrome.storage.local.get("theme",(function(e){var t=document.getElementById("gherkin-panel");"dark"===e.theme?t.classList.add("dark-theme"):t.classList.remove("dark-theme")})),window.panel.querySelector(".gherkin-panel-header")&&p(window.panel)}),100),document.addEventListener("click",(function(e){if(window.isRecording&&!window.isPaused)try{if("undefined"==typeof chrome||!chrome.runtime||!chrome.runtime.id)return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if("INPUT"===e.target.tagName&&"file"===e.target.type){var t=o(e.target),a=r(e.target),l=(e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.id||e.target.className||e.target.tagName).toString().trim();return l||(l=e.target.tagName),void("function"==typeof window.showUploadModal?window.showUploadModal(l,t,a,(function(e){e&&i((function(n){var o=(n.templateUpload||'When faz upload do arquivo "{arquivo}" no campo {elemento}').replace("{arquivo}",e).replace("{elemento}",l);window.interactions.push({step:"When",acao:"upload",acaoTexto:"Upload de arquivo",nomeElemento:l,cssSelector:t,xpath:a,nomeArquivo:e,stepText:o,timestamp:Date.now()}),y(),w()}))})):n("Função de upload não disponível!","error"))}if("INPUT"===e.target.tagName&&"file"!==e.target.type||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)return;var c=!1;if("BUTTON"===e.target.tagName||"submit"===e.target.type){var s=e.target.closest("form");if(s){var d=s.querySelectorAll("input"),u=!1,p=!1;d.forEach((function(e){var t=e.getAttribute("type")||"",n=(e.getAttribute("name")||"").toLowerCase();("password"===t||n.includes("senha")||n.includes("password"))&&(p=!0),("text"===t||"email"===t||n.includes("user")||n.includes("email"))&&(u=!0)})),u&&p&&(c=!0)}}var m=o(e.target),g=r(e.target),f=(e.target.innerText||e.target.value||e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.tagName).trim();f||(f=e.target.tagName);var x=document.getElementById("gherkin-action-select"),b=x?x.options[x.selectedIndex].text:"Clicar",E=x?x.value:"clica",k={};if("espera_segundos"===E){var S=document.getElementById("gherkin-wait-seconds"),T=1;S&&S.value&&(T=parseInt(S.value,10),(isNaN(T)||T<1)&&(T=1)),k.tempoEspera=T}if("espera_elemento"===E&&(k.esperaSeletor=m),"login"===E||c){var C="",L="",A=e.target.closest("form");return A&&A.querySelectorAll("input").forEach((function(e){var t=e.getAttribute("type")||"",n=(e.getAttribute("name")||"").toLowerCase();C||"text"!==t&&"email"!==t&&!n.includes("user")&&!n.includes("email")||(C=o(e)),L||"password"!==t&&!n.includes("senha")&&!n.includes("password")||(L=o(e))})),void i((function(e){var t=e.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"';window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:"login",userField:C,passField:L,cssSelector:m,xpath:g,stepText:t,timestamp:Date.now()}),y(),w()}))}var _=window.interactions[window.interactions.length-1],O=_&&_.acao===E&&_.cssSelector===m&&_.nomeElemento===f;if("espera_segundos"===E&&_&&void 0!==_.tempoEspera&&(O=O&&_.tempoEspera===k.tempoEspera),"espera_elemento"===E&&_&&_.esperaSeletor&&(O=O&&_.esperaSeletor===k.esperaSeletor),O)return;var I="Then",P=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(P=1),0===window.interactions.length?I="Given":1===window.interactions.length&&0===P||1===window.interactions.length&&1===P?I="When":2===window.interactions.length&&1===P&&(I="Then"),window.givenAcessaUrlAdded=!1,window.interactions.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({step:I,acao:E,acaoTexto:b,nomeElemento:f,cssSelector:m,xpath:g,timestamp:Date.now()},k)),y(),w()}catch(e){console.error("Erro ao registrar clique:",e)}})),document.addEventListener("input",(function(e){window.isRecording&&!window.isPaused&&e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)&&(e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content")||(window.lastInputTarget=e.target,window.lastInputValue=e.target.value,window.inputDebounceTimeout&&clearTimeout(window.inputDebounceTimeout),window.inputDebounceTimeout=setTimeout((function(){if(window.lastInputTarget){var e=window.lastInputTarget.value;if(""!==e&&void 0!==e){var t=o(window.lastInputTarget),n=r(window.lastInputTarget),a=(window.lastInputTarget.getAttribute("aria-label")||window.lastInputTarget.getAttribute("name")||window.lastInputTarget.id||window.lastInputTarget.className||window.lastInputTarget.tagName).toString().trim();a||(a=window.lastInputTarget.tagName),document.getElementById("gherkin-action-select");var i="preenche",l=window.interactions[window.interactions.length-1];if(!l||l.acao!==i||l.cssSelector!==t||l.nomeElemento!==a||l.valorPreenchido!==e){var c="Then",s=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(s=1),0===window.interactions.length?c="Given":1===window.interactions.length&&0===s||1===window.interactions.length&&1===s?c="When":2===window.interactions.length&&1===s&&(c="Then"),window.givenAcessaUrlAdded=!1,window.interactions.push({step:c,acao:i,acaoTexto:"Preencher",nomeElemento:a,cssSelector:t,xpath:n,valorPreenchido:e,timestamp:Date.now()}),y(),w(),window.lastInputTarget=null}}}}),700)))}),!0),void 0!==u){var x=u;u=function(e){x(e),"gravando"===window.gherkinPanelState&&setTimeout(y,10),e.querySelector(".gherkin-panel-header")&&p(e)}}function w(){try{chrome.storage.local.set({gherkinInteractions:window.interactions})}catch(e){}}window.exportSelectedFeatures=function(e){i((function(t){var o="";if(window.gherkinFeatures&&Array.isArray(window.gherkinFeatures)){var r=window.gherkinFeatures.filter((function(t,n){return e.includes(n)}));if(0!==r.length){r.forEach((function(e){o+="Feature: ".concat(e.name,"\n"),(e.cenarios||[]).forEach((function(e){o+="  Scenario: ".concat(e.name,"\n"),(e.interactions||[]).forEach((function(e){var n="";e.stepText?n=e.stepText:"acessa_url"===e.acao?n=(t.templateStep&&t.templateStep.Given||"Given que o usuário acessa {url}").replace("{url}",e.nomeElemento||"URL"):"login"===e.acao?n=t.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"':"upload"===e.acao?n=(t.templateUpload||'{step} faz upload do arquivo "{arquivo}" no campo {elemento}').replace("{step}",e.step||"When").replace("{arquivo}",e.nomeArquivo||"ARQUIVO_EXEMPLO").replace("{elemento}",e.nomeElemento||"CAMPO_UPLOAD"):"preenche"===e.acao?(n=(t.templateStep&&t.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():"preenche"," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"preenche").replace("{elemento}",e.nomeElemento||"ELEMENTO"),void 0!==e.valorPreenchido&&(n+=' (valor: "'.concat(e.valorPreenchido,'")'))):"espera_segundos"===e.acao?(n=(t.templateStep&&t.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():"espera"," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"espera").replace("{elemento}",e.nomeElemento||"ELEMENTO"),void 0!==e.tempoEspera&&(n+=" (".concat(e.tempoEspera," segundos)"))):n="espera_elemento"===e.acao?(t.templateEspera||"{step} espera o elemento aparecer: {seletor}").replace("{step}",e.step||"When").replace("{seletor}",e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO"):(t.templateStep&&t.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():""," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"").replace("{elemento}",e.nomeElemento||"ELEMENTO"),o+="    ".concat(n,"\n")})),o+="\n"})),o+="\n"}));var a=new Blob([o],{type:"text/plain"}),i=URL.createObjectURL(a),l=document.createElement("a");l.href=i,l.download="features_exportadas.feature",document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),URL.revokeObjectURL(i)}),100),r.forEach((function(e){var t="# Feature: ".concat(e.name,"\n\n");t+="## Descrição do fluxo\n",t+="Esta feature cobre o(s) seguinte(s) cenário(s):\n\n",(e.cenarios||[]).forEach((function(e){t+="### Cenário: ".concat(e.name,"\n"),t+="**Fluxo resumido:**\n",(e.interactions||[]).forEach((function(e){var n=e.step||"",o=e.acaoTexto||e.acao||"",r=e.nomeElemento||"",a=e.valorPreenchido?' (valor: "'.concat(e.valorPreenchido,'")'):"",i="";"upload"===e.acao&&e.nomeArquivo&&(i=" (arquivo: ".concat(e.nomeArquivo,")")),t+="- ".concat(n," ").concat(o,' em "').concat(r,'"').concat(a).concat(i,"\n")})),t+="\n"})),t+="## Pré-requisitos\n",t+="- Navegador Google Chrome com extensão Selenium WebDriver instalada (ou ambiente Python/Selenium configurado)\n",t+="- Acesso ao ambiente de testes\n\n",t+="## Exemplo de execução (Python + Selenium)\n",t+="```python\n",t+="# Exemplo básico de inicialização do Selenium\n",t+="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n",t+="driver = webdriver.Chrome()\n",t+='driver.get("URL_DO_SISTEMA")\n',t+="# ...seguir os passos do cenário conforme descrito acima...\n",t+="```\n\n",t+="## Observações\n",t+="- Adapte os seletores e valores conforme necessário para o seu ambiente.\n",t+="- Prints das telas podem ser adicionados manualmente após a execução dos testes.\n",function(e,t){var n;n=t instanceof Blob?t:new Blob([t],{type:"text/plain"});var o=URL.createObjectURL(n),r=document.createElement("a");r.href=o,r.download=e.replace(/\//g,"_"),document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),URL.revokeObjectURL(o)}),100)}("README_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".md"),t)})),n("Exportação realizada com sucesso!")}else n("Selecione ao menos uma feature!","error")}else n("Nenhuma feature para exportar!","error")}))},"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((function(e,t,n){"keepAlive"===e.action&&n({status:"alive"})}))})();