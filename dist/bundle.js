/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==o.return||o.return()}finally{if(c)throw i}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function t(e){return e.toString().toLowerCase().normalize("NFD").replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u0898-\u089F\u08C9-\u08D2\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C3C\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u1714\u1715\u1734\u17C9-\u17D3\u17DD\u1939-\u193B\u1A60\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABE\u1AC1-\u1ACB\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1BE6\u1BF2\u1BF3\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA806\uA82C\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDD4E\uDD69-\uDD6D\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC46\uDC70\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3B\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74\uDFCE-\uDFD0\uDFD2\uDFD3\uDFE1\uDFE2]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97\uDF41\uDF42\uDF5A]|\uD80D[\uDC47-\uDC55]|\uD818\uDD2F|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDD6B\uDD6C\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDC30-\uDC6D\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}function o(e,n){var t;t=n instanceof Blob?n:new Blob([n],{type:"text/plain"});var o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=e.replace(/\//g,"_"),document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),URL.revokeObjectURL(o)}),100)}function r(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.querySelector(".feedback");t&&t.remove();var o=document.createElement("div");function r(e){"Escape"===e.key&&(o.remove(),document.removeEventListener("keydown",r))}o.className="feedback",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.style.backgroundColor="success"===n?"#28a745":"#dc3545",o.style.color="#fff",o.innerHTML="<span>".concat(e,'</span>\n        <button class="gherkin-feedback-close" aria-label="Fechar feedback" tabindex="0">&times;</button>'),document.body.appendChild(o),o.querySelector(".gherkin-feedback-close").onclick=function(){return o.remove()},document.addEventListener("keydown",r),setTimeout((function(){o.parentNode&&o.remove(),document.removeEventListener("keydown",r)}),4e3)}function a(n){for(var t={css:null,tipo:null,aviso:null,ocorrencias:0,indice:null},o=["data-testid","data-qa","formcontrolname","aria-label","data-pc-name","data-pc-section","id","name","type","placeholder","href"],a=["div","span","button","input","label","a","ul","li","tr","td","th","table","form","section","article","header","footer"],i=0,l=o;i<l.length;i++){var c=l[i],s=n.getAttribute&&n.getAttribute(c);if(s){var d="".concat(n.tagName.toLowerCase(),"[").concat(c,'="').concat(s,'"]'),u=document.querySelectorAll(d);if(1===u.length)return t.css=d,t.tipo="robusto",t.ocorrencias=1,t.indice=1,t;if(u.length>1)return t.css=d,t.tipo="nao_unico",t.ocorrencias=u.length,t.indice=Array.from(u).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(u.length," elementos. Escolha a ocorrência desejada."),t;if(d="[".concat(c,'="').concat(s,'"]'),1===(u=document.querySelectorAll(d)).length)return t.css=d,t.tipo="robusto",t.ocorrencias=1,t.indice=1,t;if(u.length>1)return t.css=d,t.tipo="nao_unico",t.ocorrencias=u.length,t.indice=Array.from(u).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(u.length," elementos. Escolha a ocorrência desejada."),t}}if(n.id&&1===document.querySelectorAll("#".concat(CSS.escape(n.id))).length&&!/^(_|auto|ember|react|ng|mat|p-)/i.test(n.id))return t.css="".concat(n.tagName.toLowerCase(),"#").concat(n.id),t.tipo="robusto",t.ocorrencias=1,t.indice=1,t;if(n.className&&"string"==typeof n.className){var p,m=e(n.className.trim().split(/\s+/).filter(Boolean));try{for(m.s();!(p=m.n()).done;){var g=p.value;if(!/^(p-|ng-|mat-|ant-|Mui|css-)/.test(g)){var f=".".concat(CSS.escape(g)),h=document.querySelectorAll(f);if(1===h.length)return t.css="".concat(n.tagName.toLowerCase(),".").concat(g),t.tipo="classe_unica",t.ocorrencias=1,t.indice=1,t;if(h.length>1)return t.css="".concat(n.tagName.toLowerCase(),".").concat(g),t.tipo="nao_unico",t.ocorrencias=h.length,t.indice=Array.from(h).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(h.length," elementos. Escolha a ocorrência desejada."),t}}}catch(e){m.e(e)}finally{m.f()}}for(var v=["p-calendar","p-inputnumber","p-fileupload","p-dropdown","p-inputmask","p-checkbox","p-radiobutton","p-inputswitch","p-autocomplete","p-multiselect","p-editor","p-slider","p-colorpicker","p-rating","p-cascadeselect","p-chips","p-password","p-inputtext","p-listbox","p-selectbutton","p-togglebutton","p-treeselect","p-inputgroup","mat-form-field","mat-select","mat-checkbox","mat-radio-button","mat-slide-toggle","mat-slider","mat-input","mat-autocomplete","button","input","select","textarea"],x=n.parentElement,b="",y=0;x&&y<4;){var w=x.tagName?x.tagName.toLowerCase():"";if(v.includes(w)){var k,E=e(o);try{for(E.s();!(k=E.n()).done;){var C=k.value,S=x.getAttribute&&x.getAttribute(C);if(S&&1===document.querySelectorAll("".concat(w,"[").concat(C,'="').concat(CSS.escape(S),'"]')).length){b="".concat(w,"[").concat(C,'="').concat(S,'"]');break}}}catch(e){E.e(e)}finally{E.f()}b||(b=w);break}x=x.parentElement,y++}if(b){var _,A=e(o);try{for(A.s();!(_=A.n()).done;){var D=_.value,F=n.getAttribute&&n.getAttribute(D);if(F){var T="".concat(b," ").concat(n.tagName.toLowerCase(),"[").concat(D,'="').concat(F,'"]'),L=document.querySelectorAll(T);if(1===L.length)return t.css=T,t.tipo="componente_pai",t.ocorrencias=1,t.indice=1,t;if(L.length>1)return t.css=T,t.tipo="nao_unico",t.ocorrencias=L.length,t.indice=Array.from(L).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(L.length," elementos. Escolha a ocorrência desejada."),t}}}catch(e){A.e(e)}finally{A.f()}var q="".concat(b," ").concat(n.tagName.toLowerCase()),P=document.querySelectorAll(q);if(1===P.length)return t.css=q,t.tipo="componente_pai",t.ocorrencias=1,t.indice=1,t;if(P.length>1)return t.css=q,t.tipo="nao_unico",t.ocorrencias=P.length,t.indice=Array.from(P).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(P.length," elementos. Escolha a ocorrência desejada."),t}for(var N=n.parentElement,O="",R=0;N&&R<4;){var z,B=e(o);try{for(B.s();!(z=B.n()).done;){var I=z.value,j=N.getAttribute&&N.getAttribute(I);if(j&&1===document.querySelectorAll("".concat(N.tagName.toLowerCase(),"[").concat(I,'="').concat(CSS.escape(j),'"]')).length){O="".concat(N.tagName.toLowerCase(),"[").concat(I,'="').concat(j,'"]');break}}}catch(e){B.e(e)}finally{B.f()}if(O)break;N=N.parentElement,R++}if(O){var M,W=e(o);try{for(W.s();!(M=W.n()).done;){var U=M.value,H=n.getAttribute&&n.getAttribute(U);if(H){var V="".concat(O," ").concat(n.tagName.toLowerCase(),"[").concat(U,'="').concat(H,'"]'),G=document.querySelectorAll(V);if(1===G.length)return t.css=V,t.tipo="ancestral",t.ocorrencias=1,t.indice=1,t;if(G.length>1)return t.css=V,t.tipo="nao_unico",t.ocorrencias=G.length,t.indice=Array.from(G).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(G.length," elementos. Escolha a ocorrência desejada."),t}}}catch(e){W.e(e)}finally{W.f()}var X=Array.from(N.querySelectorAll(n.tagName.toLowerCase()));if(X.length>1){var Y=X.indexOf(n)+1;if(Y>0)return t.css="".concat(O," ").concat(n.tagName.toLowerCase(),":nth-of-type(").concat(Y,")"),t.tipo="ancestral",t.ocorrencias=X.length,t.indice=Y,t.aviso="Seletor não é único. Existem ".concat(X.length," elementos. Escolha a ocorrência desejada."),t}else if(1===X.length)return t.css="".concat(O," ").concat(n.tagName.toLowerCase()),t.tipo="ancestral",t.ocorrencias=1,t.indice=1,t}for(var $=n.tagName.toLowerCase(),K=n.parentElement,J=0;K&&J<3;)$="".concat(K.tagName.toLowerCase()," > ").concat($),K=K.parentElement,J++;if(!a.includes($)&&!/^([a-z]+)(\s*[> ]\s*[a-z]+)?$/i.test($)){var Z=document.querySelectorAll($);if(1===Z.length)return t.css=$,t.tipo="hierarquico",t.ocorrencias=1,t.indice=1,t;if(Z.length>1)return t.css=$,t.tipo="nao_unico",t.ocorrencias=Z.length,t.indice=Array.from(Z).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(Z.length," elementos. Escolha a ocorrência desejada."),t}if(!n||n.nodeType!==Node.ELEMENT_NODE)return t.aviso="Elemento inválido.",t;var Q=n.tagName.toLowerCase();for(x=n.parentElement,y=0;x&&y<2;){if(x.id&&1===document.querySelectorAll("#".concat(CSS.escape(x.id))).length&&!/^(_|auto|ember|react|ng|mat|p-)/i.test(x.id)){Q="".concat(x.tagName.toLowerCase(),"#").concat(x.id," > ").concat(Q);break}x=x.parentElement,y++}if(a.includes(Q)||/^([a-z]+)(\s*[> ]\s*[a-z]+)?$/i.test(Q)){var ee="Atenção: seletor CSS genérico detectado ('".concat(Q,"'). Adicione um atributo único (ex: data-testid) ao elemento para garantir robustez nos testes.");return t.aviso=ee,t.tipo="generico",t.css=null,r(ee,"error"),"undefined"!=typeof console&&console.warn(ee),t}var ne=document.querySelectorAll(Q);return 1===ne.length?(t.css=Q,t.tipo="generico",t.ocorrencias=1,t.indice=1,t):ne.length>1?(t.css=Q,t.tipo="nao_unico",t.ocorrencias=ne.length,t.indice=Array.from(ne).indexOf(n)+1,t.aviso="Seletor não é único. Existem ".concat(ne.length," elementos. Escolha a ocorrência desejada."),t):(t.css=Q,t.tipo="generico",t.ocorrencias=0,t.indice=null,t)}function i(n){var t={xpath:null,tipo:null,aviso:null,ocorrencias:0,indice:null},o=["data-testid","data-qa","formcontrolname","aria-label","data-pc-name","data-pc-section","name","type","placeholder","title","role"];if(n.id&&1===document.querySelectorAll("#".concat(CSS.escape(n.id))).length&&!/^(_|auto|ember|react|ng|mat|p-)/i.test(n.id))return t.xpath='//*[@id="'.concat(n.id,'"]'),t.tipo="robusto",t.ocorrencias=1,t.indice=1,t;for(var r=0,a=o;r<a.length;r++){var i=a[r],l=n.getAttribute&&n.getAttribute(i);if(l){var c="//".concat(n.tagName.toLowerCase(),"[@").concat(i,"='").concat(l,"']");try{var s=document.evaluate("count(".concat(c,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue;if(1===s)return t.xpath=c,t.tipo="robusto",t.ocorrencias=1,t.indice=1,t;if(s>1){var d=Array.from(document.querySelectorAll(n.tagName.toLowerCase()+"[".concat(i,"='").concat(l,"']")));return t.xpath=c,t.tipo="nao_unico",t.ocorrencias=s,t.indice=d.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(s," elementos. Escolha a ocorrência desejada."),t}}catch(e){}}}for(var u=["p-calendar","p-inputnumber","p-fileupload","p-dropdown","p-inputmask","p-checkbox","p-radiobutton","p-inputswitch","p-autocomplete","p-multiselect","p-editor","p-slider","p-colorpicker","p-rating","p-cascadeselect","p-chips","p-password","p-inputtext","p-listbox","p-selectbutton","p-togglebutton","p-treeselect","p-inputgroup","mat-form-field","mat-select","mat-checkbox","mat-radio-button","mat-slide-toggle","mat-slider","mat-input","mat-autocomplete","button","input","select","textarea"],p=n.parentElement,m="",g=0;p&&g<4;){var f=p.tagName?p.tagName.toLowerCase():"";if(u.includes(f)){var h,v=e(o);try{for(v.s();!(h=v.n()).done;){var x=h.value,b=p.getAttribute&&p.getAttribute(x);if(b){var y="//".concat(f,"[@").concat(x,"='").concat(b,"']");try{if(1===document.evaluate("count(".concat(y,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue){m=y;break}}catch(e){}}}}catch(e){v.e(e)}finally{v.f()}m||(m="//".concat(f));break}p=p.parentElement,g++}if(m){var w,k=e(o);try{for(k.s();!(w=k.n()).done;){var E=w.value,C=n.getAttribute&&n.getAttribute(E);if(C){var S="".concat(m,"//").concat(n.tagName.toLowerCase(),"[@").concat(E,"='").concat(C,"']");try{var _=document.evaluate("count(".concat(S,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue;if(1===_)return t.xpath=S,t.tipo="componente_pai",t.ocorrencias=1,t.indice=1,t;if(_>1){var A=Array.from(document.querySelectorAll(n.tagName.toLowerCase()+"[".concat(E,"='").concat(C,"']")));return t.xpath=S,t.tipo="nao_unico",t.ocorrencias=_,t.indice=A.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(_," elementos. Escolha a ocorrência desejada."),t}}catch(e){}}}}catch(e){k.e(e)}finally{k.f()}var D="".concat(m,"//").concat(n.tagName.toLowerCase());try{var F=Array.from(document.querySelectorAll(n.tagName.toLowerCase()));if(1===F.length)return t.xpath=D,t.tipo="componente_pai",t.ocorrencias=1,t.indice=1,t;if(F.length>1)return t.xpath=D,t.tipo="nao_unico",t.ocorrencias=F.length,t.indice=F.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(F.length," elementos. Escolha a ocorrência desejada."),t}catch(e){}}for(var T=n.parentElement,L="",q=0;T&&q<4;){var P,N=e(o);try{for(N.s();!(P=N.n()).done;){var O=P.value,R=T.getAttribute&&T.getAttribute(O);if(R){var z="//".concat(T.tagName.toLowerCase(),"[@").concat(O,"='").concat(R,"']");try{if(1===document.evaluate("count(".concat(z,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue){L=z;break}}catch(e){}}}}catch(e){N.e(e)}finally{N.f()}if(L)break;T=T.parentElement,q++}if(L){var B,I=e(o);try{for(I.s();!(B=I.n()).done;){var j=B.value,M=n.getAttribute&&n.getAttribute(j);if(M){var W="".concat(L,"//").concat(n.tagName.toLowerCase(),"[@").concat(j,"='").concat(M,"']");try{var U=document.evaluate("count(".concat(W,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue;if(1===U)return t.xpath=W,t.tipo="ancestral",t.ocorrencias=1,t.indice=1,t;if(U>1){var H=Array.from(document.querySelectorAll(n.tagName.toLowerCase()+"[".concat(j,"='").concat(M,"']")));return t.xpath=W,t.tipo="nao_unico",t.ocorrencias=U,t.indice=H.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(U," elementos. Escolha a ocorrência desejada."),t}}catch(e){}}}}catch(e){I.e(e)}finally{I.f()}var V=Array.from(T.querySelectorAll(n.tagName.toLowerCase()));if(V.length>1){var G=V.indexOf(n)+1;if(G>0)return t.xpath="".concat(L,"//").concat(n.tagName.toLowerCase(),"[").concat(G,"]"),t.tipo="ancestral",t.ocorrencias=V.length,t.indice=G,t.aviso="XPath não é único. Existem ".concat(V.length," elementos. Escolha a ocorrência desejada."),t}else if(1===V.length)return t.xpath="".concat(L,"//").concat(n.tagName.toLowerCase()),t.tipo="ancestral",t.ocorrencias=1,t.indice=1,t}if(n.className&&"string"==typeof n.className){var X,Y=e(n.className.trim().split(/\s+/).filter(Boolean));try{for(Y.s();!(X=Y.n()).done;){var $=X.value;if(!/^(p-|ng-|mat-|ant-|Mui|css-)/.test($)){var K="//".concat(n.tagName.toLowerCase(),"[contains(concat(' ',normalize-space(@class),' '),' ").concat($," ')]");try{var J=document.evaluate("count(".concat(K,")"),document,null,XPathResult.NUMBER_TYPE,null).numberValue;if(1===J)return t.xpath=K,t.tipo="classe_unica",t.ocorrencias=1,t.indice=1,t;if(J>1){var Z=Array.from(document.querySelectorAll(n.tagName.toLowerCase()+".".concat($)));return t.xpath=K,t.tipo="nao_unico",t.ocorrencias=J,t.indice=Z.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(J," elementos. Escolha a ocorrência desejada."),t}}catch(e){}}}}catch(e){Y.e(e)}finally{Y.f()}}if(n.tagName&&n.textContent){var Q=n.textContent.trim();if(Q&&Q.length>0){var ee=Array.from(document.querySelectorAll(n.tagName.toLowerCase())).filter((function(e){return e.textContent&&e.textContent.trim()===Q}));if(1===ee.length)return t.xpath="//".concat(n.tagName.toLowerCase(),"[normalize-space(text())='").concat(Q.replace(/'/g,"'"),"']"),t.tipo="texto_unico",t.ocorrencias=1,t.indice=1,t;if(ee.length>1)return t.xpath="//".concat(n.tagName.toLowerCase(),"[normalize-space(text())='").concat(Q.replace(/'/g,"'"),"']"),t.tipo="nao_unico",t.ocorrencias=ee.length,t.indice=ee.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(ee.length," elementos. Escolha a ocorrência desejada."),t}}if(!n||n.nodeType!==Node.ELEMENT_NODE)return t.aviso="Elemento inválido.",t;var ne=n.tagName.toLowerCase();for(p=n.parentElement,g=0;p&&g<2;){if(p.id&&1===document.querySelectorAll("#".concat(CSS.escape(p.id))).length&&!/^(_|auto|ember|react|ng|mat|p-)/i.test(p.id)){ne="".concat(p.tagName.toLowerCase(),'[@id="').concat(p.id,'"]/').concat(ne);break}p=p.parentElement,g++}var te="//".concat(ne);try{var oe=Array.from(document.querySelectorAll(n.tagName.toLowerCase()));if(1===oe.length)return t.xpath=te,t.tipo="generico",t.ocorrencias=1,t.indice=1,t.aviso="XPath genérico. Considere adicionar um atributo único ao elemento.",t;if(oe.length>1)return t.xpath=te,t.tipo="nao_unico",t.ocorrencias=oe.length,t.indice=oe.indexOf(n)+1,t.aviso="XPath não é único. Existem ".concat(oe.length," elementos. Escolha a ocorrência desejada."),t}catch(e){}return t.xpath=te,t.tipo="generico",t.ocorrencias=0,t.indice=null,t.aviso="XPath genérico. Considere adicionar um atributo único ao elemento.",t}function l(){return window.getRobustXPath=i,"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id}window.showSpinner=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Processando...";if(!document.getElementById("gherkin-spinner-modal")){var n=document.createElement("div");n.id="gherkin-spinner-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.18)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="2147483647";var t=document.createElement("div");t.style.background="#fff",t.style.padding="28px 32px 22px 32px",t.style.borderRadius="12px",t.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.gap="18px",t.style.minWidth="220px";var o=document.createElement("div");o.className="gherkin-spinner",o.style.marginBottom="12px",t.appendChild(o);var r=document.createElement("div");r.textContent=e,r.style.fontSize="16px",r.style.color="#0D47A1",r.style.textAlign="center",t.appendChild(r),n.appendChild(t),document.body.appendChild(n)}},window.hideSpinner=function(){var e=document.getElementById("gherkin-spinner-modal");e&&e.remove()};var c={nomePadraoFeature:"Nova Feature",nomePadraoCenario:"Novo Cenário",templateStep:{Given:"Given que o usuário {acao}",When:"When o usuário {acao}",Then:"Then o usuário {acao}"},templateUpload:'When faz upload do arquivo "{arquivo}" no campo {elemento}',templateLogin:'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"',templateEspera:"When espera o elemento aparecer: {seletor}"};function s(e){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.get("bddConfig",(function(n){e(Object.assign({},c,n.bddConfig||{}))})):e(c)}function d(){var e,n,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function a(t,o,r,a){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return u(s,"_invoke",function(t,o,r){var a,l,c,s=0,d=r||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,p.n=t,i}};function m(t,o){for(l=t,c=o,n=0;!u&&s&&!r&&n<d.length;n++){var r,a=d[n],m=p.p,g=a[2];t>3?(r=g===o)&&(l=a[4]||3,c=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=m&&((r=t<2&&m<a[1])?(l=0,p.v=o,p.n=a[1]):m<g&&(r=t<3||a[0]>o||o>g)&&(a[4]=t,a[5]=o,p.n=g,l=0))}if(r||t>1)return i;throw u=!0,o}return function(r,d,g){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,g),l=d,c=g;(n=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(p.n=-1),m(l,c)):p.n=c:p.v=c);try{if(s=2,a){if(l||(r="next"),n=a[r]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((n=(u=p.n<0)?c:t.call(o,p))!==i)break}catch(n){a=e,l=1,c=n}finally{s=1}}return{value:n,done:u}}}(t,r,a),!0),s}var i={};function l(){}function c(){}function s(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(u(n={},o,(function(){return this})),n),m=s.prototype=l.prototype=Object.create(p);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,u(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=s,u(m,"constructor",s),u(s,"constructor",c),c.displayName="GeneratorFunction",u(s,r,"GeneratorFunction"),u(m),u(m,r,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),(d=function(){return{w:a,m:g}})()}function u(e,n,t,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}u=function(e,n,t,o){if(n)r?r(e,n,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[n]=t;else{var a=function(n,t){u(e,n,(function(e){return this._invoke(n,t,e)}))};a("next",0),a("throw",1),a("return",2)}},u(e,n,t,o)}function p(e,n,t,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(o,r)}function m(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var a=e.apply(n,t);function i(e){p(a,o,r,i,l,"next",e)}function l(e){p(a,o,r,i,l,"throw",e)}i(void 0)}))}}function g(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?g(Object(t),!0).forEach((function(n){h(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(e,n,t){return(n=function(e){var n=function(e){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=v(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function x(e){var n="";n+='\n        <div class="gherkin-panel-header">\n            <h3>GERADOR DE TESTES AUTOMATIZADOS EM PYTHON. v1.0</h3>\n            <div class="button-container-top">\n                <button id="gherkin-highlight-toggle" title="Selecionar elemento na página" style="background:none; border:none; cursor:pointer; font-size:1.2rem; padding:2px 6px;">\n                    <span id="gherkin-highlight-icon" style="display:inline-block; vertical-align:middle;">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="#00bfff" viewBox="0 0 24 24">\n                            <circle cx="12" cy="12" r="10" stroke="#00bfff" stroke-width="2" fill="none"/>\n                            <path d="M12 7v5l3 3" stroke="#00bfff" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>\n                        </svg>\n                    </span>\n                </button>\n                <button id="gherkin-reopen" title="Reabrir" style="display: none;">Abrir</button>\n                <button id="gherkin-minimize" title="Minimizar">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffc107" viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>\n                </button>\n                <button id="gherkin-close" title="Fechar">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#dc3545" viewBox="0 0 24 24"><path d="M18.3 5.71L12 12l6.3 6.29-1.42 1.42L12 13.41l-6.29 6.3-1.42-1.42L10.59 12 4.29 5.71 5.71 4.29 12 10.59l6.29-6.3z"/></svg>\n                </button>\n            </div>\n        </div>\n    ',"feature"===window.gherkinPanelState?n+='\n            <div class="gherkin-content" style="align-items: center; justify-content: center; flex: 1;">\n                <label for="feature-name">Informe o nome da Feature:</label>\n                <input id="feature-name" type="text" placeholder="Ex: Login" />\n                <button id="start-feature" class="gherkin-btn gherkin-btn-main">Iniciar Feature</button>\n            </div>\n        ':"cenario"===window.gherkinPanelState?n+='\n            <div class="gherkin-content" style="align-items: center; justify-content: center; flex: 1;">\n                <label for="cenario-name">Informe o nome do Cenário:</label>\n                <input id="cenario-name" type="text" placeholder="Ex: Login com sucesso" />\n                <button id="start-cenario" class="gherkin-btn gherkin-btn-main">Iniciar Cenário</button>\n            </div>\n        ':"gravando"===window.gherkinPanelState?n+='\n            <div class="gherkin-content gherkin-content-flex" style="flex:1; min-height:0; display:flex; flex-direction:column; gap:0;">\n                <div class="gherkin-status-bar" style="display:flex; align-items:center; gap:12px; font-size:0.98rem; background:#f7faff; border-radius:6px; padding:6px 10px; margin-bottom:6px; min-height:36px;">\n                    <span id="gherkin-status" style="color:#555; font-weight:500;">'.concat(window.isPaused?"Status: Pausado":"Status: Gravando",'</span>\n                    <span style="color:#0D47A1; font-weight:600;">').concat(window.currentFeature?"Feature: "+window.currentFeature.name:"",'</span>\n                    <span style="color:#0070f3; font-weight:600;">').concat(window.currentCenario?"Cenário: "+window.currentCenario.name:"",'</span>\n                    <span id="gherkin-timer" style="margin-left:auto; color:#555;">').concat(void 0!==window.elapsedSeconds?"Tempo: "+(window.gherkinTimerText||"00:00"):"",'</span>\n                </div>\n                <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">\n                    <label for="gherkin-action-select" style="margin:0; font-size:0.98rem;">Ação:</label>\n                    <select id="gherkin-action-select" style="flex:1; min-width:120px; max-width:220px;">\n                        <optgroup label="Ações">\n                            <option value="clica">Clicar</option>\n                            <option value="altera">Alterar</option>\n                            <option value="preenche">Preencher</option>\n                            <option value="seleciona">Selecionar</option>\n                            <option value="radio">Botão de rádio</option>\n                            <option value="caixa">Caixa de seleção</option>\n                            <option value="navega">Navegar</option>\n                            <option value="login">Login</option>\n                            <option value="upload">Upload de arquivo</option>\n                            <option value="valida_url">Validar URL da página</option>\n                        </optgroup>\n                        <optgroup label="Validações">\n                            <option value="valida_existe">Validar que existe</option>\n                            <option value="valida_nao_existe">Validar que não existe</option>\n                            <option value="valida_contem">Validar que contém</option>\n                            <option value="valida_nao_contem">Validar que não contém</option>\n                            <option value="valida_deve_ser">Validar que deve ser</option>\n                            <option value="valida_nao_deve_ser">Validar que não deve ser</option>\n                        </optgroup>\n                        <optgroup label="Esperas">\n                            <option value="espera_segundos">Esperar segundos</option>\n                            <option value="espera_elemento">Esperar elemento aparecer</option>\n                            <option value="espera_nao_existe">Esperar elemento desaparecer</option>\n                            <option value="espera_existe">Esperar que o elemento exista</option>\n                            <option value="espera_habilitado">Esperar que o elemento esteja habilitado</option>\n                            <option value="espera_desabilitado">Esperar que o elemento esteja desabilitado</option>\n                        </optgroup>\n                    </select>\n                    <div id="gherkin-action-params" style="flex:2;"></div>\n                </div>\n                <div id="gherkin-log" style="flex:1 1 0; min-height:0; margin-bottom:8px; border:1px solid #ccc; border-radius:8px; background-color:#f9f9f9; display:flex; flex-direction:column;"></div>\n                <div class="gherkin-actions-bar" style="display:flex; flex-wrap:wrap; gap:8px; margin-top:auto; justify-content:center; align-items:center; width:100%; padding-top:4px;">\n                    <button id="end-cenario" class="gherkin-btn gherkin-btn-danger" style="min-width:90px; height:34px; font-size:0.98rem;">Encerrar Cenário</button>\n                    <button id="end-feature" class="gherkin-btn" style="background:#6c757d; color:#fff; min-width:90px; height:34px; font-size:0.98rem;" disabled>Encerrar Feature</button>\n                    <button id="gherkin-pause" class="gherkin-btn gherkin-btn-warning" style="min-width:90px; height:34px; font-size:0.98rem;">Pausar</button>\n                    <button id="gherkin-clear" class="gherkin-btn gherkin-btn-danger" style="min-width:90px; height:34px; font-size:0.98rem;">Limpar</button>\n                    <button id="gherkin-export" class="gherkin-btn gherkin-btn-main" style="min-width:90px; height:34px; font-size:0.98rem;">Exportar</button>\n                </div>\n            </div>\n        '):"exportar"===window.gherkinPanelState&&(n+='<div class="gherkin-content" style="padding: 10px; flex:1;">\n            <h4 style="color: #0D47A1; font-size: 1.13rem; font-weight: 700; margin-bottom: 8px;">Selecione as features para exportar:</h4>\n            <form id="export-form" style="max-height: 250px; overflow-y: auto; margin-bottom: 10px;">',window.gherkinFeatures.forEach((function(e,t){n+="<div style='margin-bottom: 6px;'><input type='checkbox' id='feature-export-".concat(t,"' name='feature-export' value='").concat(t,"'><label for='feature-export-").concat(t,"' style='margin-left: 8px;'>").concat(e.name,"</label></div>")})),n+='</form>\n            <div style="display: flex; gap: 10px; margin-top: 2px;">\n                <button id="export-selected" class="gherkin-btn gherkin-btn-main">Exportar Selecionadas</button>\n                <button id="new-feature" class="gherkin-btn gherkin-btn-success">Nova Feature</button>\n            </div>\n        </div>'),n+='<p id="gherkin-footer">By: Matheus Ferreira de Oliveira</p>',e.innerHTML=n}function b(e){var n=e.querySelector("#gherkin-action-select"),t=e.querySelector("#gherkin-action-params");if(n&&t){t.innerHTML="";var o={clica:"Clique no elemento que deseja registrar o clique.",altera:"Clique no elemento que deseja alterar.",preenche:"Clique em um campo de texto e preencha. O valor será registrado automaticamente.",seleciona:"Clique no campo de seleção desejado.",radio:"Clique no botão de rádio desejado.",caixa:"Clique na caixa de seleção desejada.",navega:"Navegue para a página desejada.",login:"Preencha os campos de usuário/email e senha na página. Clique no botão abaixo para marcar como login.",upload:"Clique em um campo de upload na página ou informe o nome do arquivo de exemplo.",valida_existe:"Clique no elemento que deseja validar que existe.",valida_nao_existe:"Clique no elemento que deseja validar que não existe.",valida_contem:"Clique no elemento que deseja validar o conteúdo.",valida_nao_contem:"Clique no elemento que deseja validar que não contém determinado conteúdo.",valida_deve_ser:"Clique no elemento que deseja validar o valor.",valida_nao_deve_ser:"Clique no elemento que deseja validar que não deve ser determinado valor.",espera_segundos:"Informe o tempo de espera em segundos.",espera_elemento:"Clique no elemento que deseja aguardar aparecer.",espera_nao_existe:"Clique no elemento que deseja aguardar desaparecer.",espera_existe:"Clique no elemento que deseja aguardar que exista.",espera_habilitado:"Clique no elemento que deseja aguardar que esteja habilitado.",espera_desabilitado:"Clique no elemento que deseja aguardar que esteja desabilitado.",valida_url:"Valida se a URL atual da página é igual à informada. Use para garantir que a navegação ocorreu corretamente."}[n.value]||"";if(o){var a=document.createElement("div");a.textContent=o,a.style.background="#e3f2fd",a.style.color="#1565c0",a.style.padding="7px 10px",a.style.borderRadius="5px",a.style.fontSize="13px",a.style.marginBottom="8px",t.appendChild(a)}if("espera_segundos"===n.value){var i=document.createElement("label");i.textContent="Tempo de espera (segundos):",i.style.fontWeight="bold",i.style.marginBottom="4px",i.setAttribute("for","gherkin-wait-seconds"),t.appendChild(i);var l=document.createElement("input");l.type="number",l.id="gherkin-wait-seconds",l.min="1",l.value="1",l.style.width="100%",l.style.padding="7px",l.style.borderRadius="5px",l.style.border="1px solid #ccc",l.style.fontSize="14px",l.style.marginBottom="8px",t.appendChild(l)}else if("preenche"===n.value){var c=document.createElement("div");c.textContent="Clique em um campo de texto na página e preencha. O valor será registrado automaticamente.",c.style.background="#fffde7",c.style.color="#bfa100",c.style.padding="7px 10px",c.style.borderRadius="5px",c.style.fontSize="13px",c.style.marginBottom="8px",t.appendChild(c)}else if("login"===n.value){var s=document.createElement("div");s.textContent="Preencha os campos de usuário/email e senha na página. Clique no botão abaixo para marcar como login.",s.style.background="#e3f2fd",s.style.color="#1565c0",s.style.padding="7px 10px",s.style.borderRadius="5px",s.style.fontSize="13px",s.style.marginBottom="8px",t.appendChild(s);var d=document.createElement("button");d.textContent="Marcar ação como login",d.style.background="#007bff",d.style.color="#fff",d.style.border="none",d.style.borderRadius="6px",d.style.padding="8px 22px",d.style.fontSize="15px",d.style.fontWeight="bold",d.style.cursor="pointer",d.onclick=function(){!function(){var e=document.getElementById("gherkin-modal");e&&e.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var t=document.createElement("div");t.style.background="#fff",t.style.padding="28px 32px 22px 32px",t.style.borderRadius="12px",t.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.gap="18px",t.style.minWidth="260px",n.className="gherkin-modal-bg",t.className="gherkin-modal-content";var o=document.createElement("div");o.textContent="Marcar ação como Login",o.style.fontSize="17px",o.style.color="#0D47A1",o.style.textAlign="center",t.appendChild(o);var a=document.createElement("label");a.textContent="Usuário/Email:",a.style.fontWeight="bold",a.style.marginBottom="4px",t.appendChild(a);var i=document.createElement("input");i.type="text",i.style.width="100%",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.fontSize="14px",t.appendChild(i);var l=document.createElement("label");l.textContent="Senha:",l.style.fontWeight="bold",l.style.marginBottom="4px",t.appendChild(l);var c=document.createElement("input");c.type="password",c.style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px",t.appendChild(c);var s=document.createElement("div");s.style.display="flex",s.style.gap="18px",s.style.marginTop="12px";var d=document.createElement("button");d.textContent="Salvar Login",d.style.background="#007bff",d.style.color="#fff",d.style.border="none",d.style.borderRadius="6px",d.style.padding="8px 22px",d.style.fontSize="15px",d.style.fontWeight="bold",d.style.cursor="pointer",d.onclick=function(){var e=i.value.trim(),t=c.value;e&&t?(window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:e,valorPreenchido:t,timestamp:Date.now()}),saveInteractionsToStorage(),C(),n.remove(),r("Ação de login registrada!","success")):r("Preencha usuário e senha!","error")};var u=document.createElement("button");u.textContent="Cancelar",u.style.background="#dc3545",u.style.color="#fff",u.style.border="none",u.style.borderRadius="6px",u.style.padding="8px 22px",u.style.fontSize="15px",u.style.fontWeight="bold",u.style.cursor="pointer",u.onclick=function(){return n.remove()},s.appendChild(d),s.appendChild(u),t.appendChild(s),n.appendChild(t),document.body.appendChild(n)}()},t.appendChild(d)}else if(n.value.startsWith("valida_")){var u=document.createElement("div");u.textContent="Clique no elemento que deseja validar na página.",u.style.background="#e8f5e9",u.style.color="#388e3c",u.style.padding="7px 10px",u.style.borderRadius="5px",u.style.fontSize="13px",u.style.marginBottom="8px",t.appendChild(u)}else if(n.value.startsWith("espera_")&&"espera_segundos"!==n.value){var p=document.createElement("div");"espera_elemento"===n.value?p.textContent="Clique no elemento que deseja aguardar aparecer na página.":"espera_nao_existe"===n.value?p.textContent="Clique no elemento que deseja aguardar desaparecer da página.":p.textContent="Clique no elemento que deseja aguardar na página.",p.style.background="#fff3e0",p.style.color="#e65100",p.style.padding="7px 10px",p.style.borderRadius="5px",p.style.fontSize="13px",p.style.marginBottom="8px",t.appendChild(p)}}}function y(e){var n,t,o=!1,r=e.querySelector(".gherkin-panel-header");function a(r){r.target.closest(".button-container-top")||0===r.button&&(o=!0,n=r.clientX-e.getBoundingClientRect().left,t=r.clientY-e.getBoundingClientRect().top,e.style.cursor="move",document.body.style.userSelect="none")}function i(r){o&&(e.style.left="".concat(r.clientX-n,"px"),e.style.top="".concat(r.clientY-t,"px"),e.style.right="auto",e.style.bottom="auto")}function l(){o&&(o=!1,e.style.cursor="default",document.body.style.userSelect="")}r||(r=e.querySelector('div[style*="display: flex"][style*="justify-content: space-between"]')||e),r.removeEventListener("mousedown",a),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l),r.addEventListener("mousedown",a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function w(e,n,t){var o=document.getElementById("gherkin-modal");o&&o.remove();var r=document.createElement("div");r.id="gherkin-modal",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.background="rgba(0,0,0,0.25)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.zIndex="10001";var a=document.createElement("div");a.style.background="#fff",a.style.padding="28px 32px 22px 32px",a.style.borderRadius="12px",a.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.gap="18px",a.style.minWidth="260px",r.className="gherkin-modal-bg",a.className="gherkin-modal-content";var i=document.createElement("div");i.textContent=e,i.style.fontSize="17px",i.style.color="#0D47A1",i.style.textAlign="center",a.appendChild(i);var l=document.createElement("div");l.style.display="flex",l.style.gap="18px";var c=document.createElement("button");c.textContent="Sim",c.style.background="#007bff",c.style.color="#fff",c.style.border="none",c.style.background="#007bff",c.style.color="#fff",c.style.border="none",c.style.borderRadius="6px",c.style.padding="8px 22px",c.style.fontSize="15px",c.style.fontWeight="bold",c.style.cursor="pointer",c.onclick=function(){r.remove(),n&&n()};var s=document.createElement("button");s.textContent="Não",s.style.background="#dc3545",s.style.color="#fff",s.style.border="none",s.style.borderRadius="6px",s.style.padding="8px 22px",s.style.fontSize="15px",s.style.fontWeight="bold",s.style.cursor="pointer",s.onclick=function(){r.remove(),t&&t()},l.appendChild(c),l.appendChild(s),a.appendChild(l),r.appendChild(a),document.body.appendChild(r)}!function(){if(!document.getElementById("gherkin-global-style")){var e=document.createElement("style");e.id="gherkin-global-style",e.innerHTML='\n:root {\n    --color-bg: #f8fafc;\n    --color-bg-alt: #f4f7fb;\n    --color-primary: #0070f3;\n    --color-primary-dark: #005bb5;\n    --color-accent: #0D47A1;\n    --color-danger: #e74c3c;\n    --color-success: #28a745;\n    --color-warning: #ffc107;\n    --color-border: #e0e6ed;\n    --color-shadow: rgba(0,0,0,0.10);\n    --color-log-bg: #f1f8ff;\n    --color-log-bg-alt: #e3f2fd;\n    --color-modal-bg: #fff;\n    --color-modal-overlay: rgba(0,0,0,0.25);\n    --color-text: #1a2330;\n    --color-text-light: #fff;\n    --color-muted: #555;\n    --color-footer: #aaa;\n    --btn-radius: 9px;\n    --btn-height: 42px;\n    --btn-min-width: 110px;\n    --btn-font-size: 1.07rem;\n    --btn-shadow: 0 2px 8px rgba(0,112,243,0.08);\n    --input-radius: 8px;\n    --input-height: 38px;\n    --input-font-size: 1rem;\n}\n.dark-theme {\n    --color-bg: #181c24;\n    --color-bg-alt: #232837;\n    --color-primary: #2196f3;\n    --color-primary-dark: #1565c0;\n    --color-accent: #90caf9;\n    --color-danger: #ef5350;\n    --color-success: #66bb6a;\n    --color-warning: #ffd600;\n    --color-border: #333a4d;\n    --color-shadow: rgba(0,0,0,0.45);\n    --color-log-bg: #232837;\n    --color-log-bg-alt: #1a1d29;\n    --color-modal-bg: #232837;\n    --color-modal-overlay: rgba(0,0,0,0.55);\n    --color-text: #e3f2fd;\n    --color-text-light: #fff;\n    --color-muted: #b0bec5;\n    --color-footer: #607d8b;\n}\nbody, h1 {\n    font-family: \'Roboto\', Arial, sans-serif;\n}\n@keyframes slideIn {\n    from { transform: translateY(-20px); opacity: 0;}\n    to { transform: translateY(0); opacity: 1;}\n}\n@keyframes fadeInOut {\n    0% { opacity: 0;}\n    10% { opacity: 1;}\n    90% { opacity: 1;}\n    100% { opacity: 0;}\n}\n@keyframes gherkin-spin {\n    0% { transform: rotate(0deg);}\n    100% { transform: rotate(360deg);}\n}\n.gherkin-panel-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8px;\n    min-height: 44px;\n    padding-bottom: 0;\n}\n.gherkin-panel-header h3 {\n    margin: 0;\n    font-size: 0.85rem !important;\n    color: var(--color-primary);\n    text-align: center;\n    font-weight: 700;\n    letter-spacing: 0.5px;\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.08);\n}\n.button-container-top {\n    display: flex;\n    gap: 6px;\n    align-items: center;\n}\n.button-container-top button {\n    background: none;\n    border: none;\n    cursor: pointer;\n    font-size: 1.2rem;\n    font-weight: bold;\n    color: var(--color-accent);\n    transition: color 0.2s;\n    border-radius: var(--btn-radius);\n    min-width: 36px;\n    min-height: 36px;\n    outline: none;\n}\n.button-container-top button:focus {\n    outline: 2px solid var(--color-primary);\n    outline-offset: 2px;\n}\n.button-container-top button:hover {\n    color: var(--color-primary-dark);\n}\n.gherkin-content {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    padding: 0 2px;\n}\n.gherkin-content label {\n    font-weight: 600;\n    color: var(--color-accent);\n    margin-bottom: 2px;\n    font-size: 1.04rem;\n    letter-spacing: 0.01em;\n}\n.gherkin-content input[type="text"],\n.gherkin-content input[type="number"],\n.gherkin-content textarea,\n.gherkin-content select {\n    box-shadow: 0 1px 4px rgba(0,0,0,0.07);\n    transition: border 0.2s, background 0.2s;\n    border-radius: var(--input-radius);\n    border: 1.5px solid var(--color-border);\n    font-size: var(--input-font-size);\n    margin-bottom: 4px;\n    background: var(--color-bg-alt);\n    color: var(--color-text);\n    padding: 0 12px;\n    height: var(--input-height);\n    outline: none;\n}\n.gherkin-content input[type="text"]:focus,\n.gherkin-content input[type="number"]:focus,\n.gherkin-content textarea:focus,\n.gherkin-content select:focus {\n    border: 1.5px solid var(--color-primary);\n    background: #f1f8ff;\n    outline: 2px solid var(--color-primary);\n    outline-offset: 1px;\n}\n.gherkin-content button,\n.gherkin-btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 0 22px;\n    min-width: var(--btn-min-width);\n    height: var(--btn-height);\n    background-color: var(--color-primary);\n    color: var(--color-text-light);\n    border: none;\n    border-radius: var(--btn-radius);\n    cursor: pointer;\n    font-size: var(--btn-font-size);\n    font-weight: 600;\n    box-shadow: var(--btn-shadow);\n    margin: 0 4px 6px 0;\n    transition: background 0.18s, color 0.18s, box-shadow 0.18s, transform 0.13s;\n    outline: none;\n}\n.gherkin-content button:focus,\n.gherkin-btn:focus {\n    outline: 2px solid var(--color-primary);\n    outline-offset: 2px;\n}\n.gherkin-content button:hover,\n.gherkin-btn:hover {\n    background-color: var(--color-primary-dark);\n    color: var(--color-text-light);\n    transform: scale(1.035);\n}\n.gherkin-content button:disabled,\n.gherkin-btn:disabled {\n    background-color: #cccccc;\n    color: #eee;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n}\n.gherkin-btn-main {\n    background: var(--color-primary);\n    color: var(--color-text-light);\n    box-shadow: var(--btn-shadow);\n}\n.gherkin-btn-main:hover, .gherkin-btn-main:focus {\n    background: var(--color-primary-dark);\n}\n.gherkin-btn-danger {\n    background: var(--color-danger);\n    color: #fff;\n}\n.gherkin-btn-danger:hover, .gherkin-btn-danger:focus {\n    background: #c0392b;\n}\n.gherkin-btn-success {\n    background: var(--color-success);\n    color: #fff;\n}\n.gherkin-btn-success:hover, .gherkin-btn-success:focus {\n    background: #218838;\n}\n.gherkin-btn-warning {\n    background: var(--color-warning);\n    color: #222;\n}\n.gherkin-btn-warning:hover, .gherkin-btn-warning:focus {\n    background: #e0a800;\n}\n.gherkin-content hr, .gherkin-divider {\n    border: none;\n    border-top: 1px solid #e3e3e3;\n    margin: 12px 0 8px 0;\n}\n.gherkin-content input,\n.gherkin-content select,\n.gherkin-content textarea,\n.gherkin-content button {\n    margin-bottom: 8px !important;\n}\n.gherkin-content .gherkin-actions-row {\n    display: flex;\n    gap: 10px;\n    margin: 8px 0 0 0;\n    flex-wrap: wrap;\n}\n.gherkin-content .gherkin-checkbox-list {\n    display: flex;\n    flex-direction: column;\n    gap: 6px;\n    margin-bottom: 8px;\n}\n.gherkin-content .gherkin-checkbox-list label {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    font-weight: 400;\n    font-size: 1rem;\n    color: #222;\n    cursor: pointer;\n}\n.gherkin-content .gherkin-checkbox-list input[type="checkbox"] {\n    accent-color: var(--color-primary);\n    width: 18px;\n    height: 18px;\n}\n.gherkin-content .gherkin-feedback {\n    margin: 6px 0;\n    padding: 10px 14px;\n    border-radius: 6px;\n    font-size: 1rem;\n    font-weight: 500;\n    background: #eafaf1;\n    color: #218838;\n    border: 1.5px solid #28a745;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    min-height: 40px;\n    transition: background 0.2s, color 0.2s;\n}\n.gherkin-content .gherkin-feedback.error {\n    background: #fff6f6;\n    color: #e74c3c;\n    border-color: #e74c3c;\n}\n.gherkin-content .gherkin-feedback.info {\n    background: #f7faff;\n    color: #0070f3;\n    border-color: #0070f3;\n}\n.gherkin-content .gherkin-feedback .gherkin-feedback-icon {\n    font-size: 1.3em;\n    display: inline-block;\n    vertical-align: middle;\n}\n.gherkin-content .gherkin-tip {\n    background: #f7faff;\n    border-left: 4px solid #0070f3;\n    padding: 8px 14px;\n    border-radius: 6px;\n    color: #0070f3;\n    font-size: 0.98rem;\n    margin-bottom: 6px;\n    margin-top: 0;\n    display: flex;\n    align-items: flex-start;\n    gap: 8px;\n}\n.gherkin-content .gherkin-tip .gherkin-tip-icon {\n    font-size: 1.2em;\n    margin-right: 4px;\n    color: #0070f3;\n}\n.gherkin-content .gherkin-summary {\n    background: #f9fbfd;\n    border: 1.5px solid #e0e6ed;\n    border-radius: 8px;\n    padding: 10px 14px;\n    margin-bottom: 8px;\n    font-size: 0.98rem;\n    color: #222;\n    max-height: 140px;\n    overflow-y: auto;\n}\n.gherkin-content .gherkin-summary-title {\n    font-weight: 600;\n    color: #0070f3;\n    margin-bottom: 4px;\n    font-size: 1.05rem;\n}\n.gherkin-content .gherkin-summary-list {\n    list-style: disc inside;\n    margin: 0;\n    padding: 0 0 0 10px;\n}\n.gherkin-content .gherkin-summary-list li {\n    margin-bottom: 2px;\n    font-size: 0.97rem;\n}\n.gherkin-content .gherkin-footer {\n    text-align: right;\n    font-size: 0.92rem;\n    color: #888;\n    margin-top: 8px;\n    margin-bottom: 2px;\n}\n.feedback, .gherkin-panel-content .gherkin-feedback {\n    position: fixed;\n    left: 50%;\n    bottom: 32px;\n    transform: translateX(-50%);\n    z-index: 2147483647;\n    background: #0D47A1;\n    color: #fff;\n    border-radius: 8px;\n    padding: 14px 28px 14px 18px;\n    font-size: 16px;\n    font-weight: 600;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.13);\n    animation: fadeInOut 3s ease;\n    display: flex;\n    align-items: center;\n    gap: 12px;\n}\n.feedback .gherkin-feedback-close {\n    margin-left: 18px;\n    background: none;\n    border: none;\n    color: #fff;\n    font-size: 18px;\n    cursor: pointer;\n    opacity: 0.7;\n    transition: opacity 0.2s;\n}\n.feedback .gherkin-feedback-close:hover {\n    opacity: 1;\n}\n.gherkin-spinner {\n    border: 4px solid #e3e3e3;\n    border-top: 4px solid #007bff;\n    border-radius: 50%;\n    width: 32px;\n    height: 32px;\n    animation: gherkin-spin 1s linear infinite;\n    margin: 0 auto;\n    display: block;\n}\n#gherkin-panel, .gherkin-panel {\n    position: fixed;\n    top: 10px;\n    left: 10px;\n    width: 480px;\n    max-width: 540px;\n    min-width: 320px;\n    height: 92vh;\n    max-height: 100vh;\n    background-color: var(--color-bg);\n    border: 1.5px solid var(--color-border);\n    border-radius: 16px;\n    box-shadow: 0 8px 24px var(--color-shadow);\n    padding: 18px 14px 24px 14px;\n    z-index: 10000;\n    font-family: \'Roboto\', Arial, sans-serif;\n    transition: opacity 0.3s, transform 0.3s, background 0.3s;\n    transform: translateY(0);\n    animation: slideIn 0.5s;\n    color: var(--color-text);\n    overflow: auto;\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n@media (max-width: 600px) {\n    #gherkin-panel, .gherkin-panel {\n        left: 0 !important;\n        top: 0 !important;\n        width: 100vw !important;\n        min-width: 0 !important;\n        max-width: 100vw !important;\n        height: 100vh !important;\n        max-height: 100vh !important;\n        border-radius: 0 !important;\n        padding: 8px 2vw 16px 2vw !important;\n    }\n    .gherkin-content {\n        padding: 0 2vw !important;\n    }\n    #gherkin-panel #gherkin-log {\n        max-height: 30vh !important;\n    }\n    .gherkin-content button, .gherkin-btn {\n        min-width: 90px;\n        font-size: 0.98rem;\n        height: 38px;\n        padding: 0 12px;\n    }\n    .gherkin-content input[type="text"],\n    .gherkin-content input[type="number"],\n    .gherkin-content textarea,\n    .gherkin-content select {\n        font-size: 0.97rem;\n        height: 34px;\n        padding: 0 8px;\n    }\n}\n#gherkin-footer {\n    font-size: 10px;\n    color: var(--color-footer);\n    text-align: right;\n    margin: 0;\n    position: absolute;\n    bottom: -20px;\n    right: 10px;\n}\n#gherkin-panel-minimized {\n    position: fixed;\n    left: 18px;\n    bottom: 18px;\n    width: 54px;\n    height: 54px;\n    background: #0070f3;\n    color: #fff;\n    border-radius: 50%;\n    box-shadow: 0 4px 16px rgba(0,0,0,0.18);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 2147483647;\n    cursor: pointer;\n    font-size: 2.2em;\n    border: none;\n    transition: background 0.2s;\n}\n#gherkin-panel-minimized:focus {\n    outline: 2px solid #fff;\n}\n.dark-theme .feedback, .dark-theme .gherkin-panel-content .gherkin-feedback {\n    background: #2196f3;\n    color: #fff;\n}\n.dark-theme #gherkin-panel-minimized {\n    background: #2196f3;\n    color: #fff;\n}\n',document.head.appendChild(e)}}();var k={clica:{icon:"🖱️",color:"#007bff",label:"Clicar"},preenche:{icon:"⌨️",color:"#28a745",label:"Preencher"},seleciona:{icon:"☑️",color:"#17a2b8",label:"Selecionar"},upload:{icon:"📎",color:"#f39c12",label:"Upload"},login:{icon:"🔑",color:"#8e44ad",label:"Login"},espera_segundos:{icon:"⏲️",color:"#ffc107",label:"Esperar"},espera_elemento:{icon:"⏳",color:"#0070f3",label:"Esperar elemento"},espera_nao_existe:{icon:"🚫",color:"#e74c3c",label:"Esperar sumir"},acessa_url:{icon:"🌐",color:"#0070f3",label:"Acessar URL"},altera:{icon:"✏️",color:"#6c757d",label:"Alterar"},radio:{icon:"🔘",color:"#6c757d",label:"Radio"},caixa:{icon:"☑️",color:"#6c757d",label:"Caixa"},valida_existe:{icon:"✅",color:"#218838",label:"Validar existe"},valida_nao_existe:{icon:"❌",color:"#e74c3c",label:"Validar não existe"},valida_contem:{icon:"🔍",color:"#007bff",label:"Validar contém"},valida_nao_contem:{icon:"🚫",color:"#e74c3c",label:"Validar não contém"},valida_deve_ser:{icon:"✔️",color:"#218838",label:"Validar deve ser"},valida_nao_deve_ser:{icon:"❌",color:"#e74c3c",label:"Validar não deve ser"},valida_url:{icon:"🌐",color:"#0070f3",label:"Validar URL"}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv",n=window.interactions||[];if(n.length){var t="";"csv"===e?(t="Gherkin,Ação,Elemento,Valor,Timestamp,Selector,XPath\n"+n.map((function(e){var n;return[e.step,(null===(n=k[e.acao])||void 0===n?void 0:n.label)||e.acao,'"'.concat(e.nomeElemento||"",'"'),'"'.concat(e.valorPreenchido||e.nomeArquivo||"",'"'),e.timestamp||"",'"'.concat((e.cssSelector&&"object"===v(e.cssSelector)?e.cssSelector.css:e.cssSelector)||"",'"'),'"'.concat((e.xpath&&"object"===v(e.xpath)?e.xpath.xpath:e.xpath)||"",'"')].join(",")})).join("\n"),downloadFile("gherkin_log.csv",t)):"json"===e?(t=JSON.stringify(n,null,2),downloadFile("gherkin_log.json",t)):"md"===e&&(t="| Gherkin | Ação | Elemento | Valor | Timestamp |\n|---|---|---|---|---|\n"+n.map((function(e){var n;return"| ".concat(e.step," | ").concat((null===(n=k[e.acao])||void 0===n?void 0:n.label)||e.acao," | ").concat(e.nomeElemento||""," | ").concat(e.valorPreenchido||e.nomeArquivo||""," | ").concat(e.timestamp||""," |")})).join("\n"),downloadFile("gherkin_log.md",t)),r("Log exportado com sucesso!")}else r("Nenhum log para exportar!","error")}function C(){var e=document.getElementById("gherkin-log");if(e){e.innerHTML="";var n=document.createElement("div");n.style.flex="1 1 auto",n.style.display="flex",n.style.flexDirection="column",n.style.overflow="hidden",n.style.width="100%",n.style.minHeight="0",n.style.background="#fff",n.tabIndex=0;var t=document.createElement("div");t.style.flex="1 1 auto",t.style.overflowX="auto",t.style.overflowY="auto",t.style.width="100%",t.style.minHeight="0",t.style.background="#fff";var o=document.createElement("table");o.className="gherkin-log-table",o.style.width="100%",o.style.minWidth="700px",o.style.borderCollapse="collapse",o.style.fontSize="13px",o.style.background="#fff";var r=document.createElement("thead");r.innerHTML='\n        <tr>\n            <th style="min-width:60px;">Gherkin</th>\n            <th style="min-width:80px;">Ação</th>\n            <th style="min-width:120px;">Elemento</th>\n            <th style="min-width:100px;">Valor</th>\n            <th style="min-width:40px;">Detalhes</th>\n            <th style="min-width:40px;">Ações</th>\n        </tr>\n    ',o.appendChild(r);var a=document.createElement("tbody");if(o.appendChild(a),function(){a.innerHTML="";var e=window.interactions||[];if(!e.length){var n=document.createElement("tr"),t=document.createElement("td");return t.colSpan=5,t.textContent="Nenhuma interação encontrada.",t.style.textAlign="center",n.appendChild(t),void a.appendChild(n)}e.forEach((function(e,n){var t=document.createElement("tr");t.tabIndex=0,t.setAttribute("role","button"),t.setAttribute("aria-label","Ver detalhes da interação ".concat(n+1)),t.style.cursor="pointer",t.style.transition="background 0.15s",t.onmouseenter=function(){return t.style.background="#f7faff"},t.onmouseleave=function(){return t.style.background=""},t.onfocus=function(){return t.style.background="#e3f2fd"},t.onblur=function(){return t.style.background=""};var o=document.createElement("td");o.textContent=e.step||"",o.style.fontWeight="bold",o.style.color="#0070f3",o.style.textAlign="center",t.appendChild(o);var r=document.createElement("td"),i=k[e.acao]||{};r.innerHTML='<span style="font-size:1.2em;margin-right:4px;color:'.concat(i.color||"#222",'">').concat(i.icon||"","</span>").concat(i.label||e.acao),t.appendChild(r);var l=document.createElement("td");if("valida_url"===e.acao)l.textContent=e.urlEsperada||"";else if(e.nomeElemento&&e.nomeElemento.includes("|")){var c=e.nomeElemento.split("|");l.textContent=c[1].trim()}else l.textContent=e.nomeElemento||"";l.style.fontFamily="inherit",t.appendChild(l);var s=document.createElement("td");"preenche"===e.acao?s.textContent=e.valorPreenchido||"":"upload"===e.acao?s.textContent=e.nomeArquivo||"":"login"===e.acao?s.textContent=e.valorPreenchido||"":s.textContent="",t.appendChild(s);var d=document.createElement("td"),u=document.createElement("button");u.innerHTML='<span aria-hidden="true">🔎</span>',u.title="Ver detalhes",u.style.background="none",u.style.border="none",u.style.cursor="pointer",u.style.fontSize="1.1em",u.setAttribute("aria-label","Ver detalhes"),u.onclick=function(n){n.stopPropagation(),S(e)},d.appendChild(u),t.appendChild(d);var p=document.createElement("td");p.style.textAlign="center",p.appendChild(function(e,n){var t=document.createElement("div");t.style.position="relative",t.style.display="inline-block";var o=document.createElement("button");o.innerHTML='\n      <span class="gherkin-action-menu-icon" aria-hidden="true" style="display:inline-flex;align-items:center;justify-content:center;">\n        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">\n          <circle cx="12" cy="5" r="2" fill="#0070f3"/>\n          <circle cx="12" cy="12" r="2" fill="#0070f3"/>\n          <circle cx="12" cy="19" r="2" fill="#0070f3"/>\n        </svg>\n      </span>\n      <span class="sr-only">Ações rápidas</span>\n    ',o.title="Ações",o.style.background="none",o.style.border="none",o.style.cursor="pointer",o.style.fontSize="1.2em",o.setAttribute("aria-label","Ações rápidas"),o.setAttribute("tabindex","0"),o.style.display="inline-flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.minWidth="36px",o.style.minHeight="36px",o.style.borderRadius="50%",o.style.transition="background 0.18s",o.onkeydown=function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o.click())},t.appendChild(o);var r=document.createElement("div");r.className="gherkin-action-dropdown",r.style.display="none",r.style.position="absolute",r.style.background="#fff",r.style.border="1px solid #ccc",r.style.borderRadius="6px",r.style.boxShadow="0 8px 32px rgba(0,112,243,0.13), 0 1.5px 6px rgba(0,0,0,0.07)",r.style.zIndex="2147483647",r.style.minWidth="170px",r.style.maxWidth="90vw",r.style.maxHeight="320px",r.style.overflowY="auto",r.style.padding="8px 0";var a=document.createElement("button");a.textContent="Editar",a.onclick=function(e){e.stopPropagation(),r.style.display="none",function(e){var n=window.interactions[e];if(n){var t=document.getElementById("gherkin-modal");t&&t.remove();var o=document.createElement("div");o.id="gherkin-modal",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.background="rgba(0,0,0,0.25)",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="10003";var r=document.createElement("div");r.style.background="#fff",r.style.padding="28px 32px 22px 32px",r.style.borderRadius="12px",r.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="18px",r.style.minWidth="260px";var a=document.createElement("div");a.textContent="Editar interação",a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="center",r.appendChild(a);var i=document.createElement("label");i.textContent="Passo BDD:",i.style.fontWeight="bold",i.style.marginBottom="4px",r.appendChild(i);var l=document.createElement("select");l.style.width="100%",l.style.padding="7px",l.style.borderRadius="5px",l.style.border="1px solid #ccc",l.style.fontSize="14px",["Given","When","Then"].forEach((function(e){var t=document.createElement("option");t.value=e,t.textContent=e,n.step===e&&(t.selected=!0),l.appendChild(t)})),r.appendChild(l);var c,s=document.createElement("label");if(s.textContent="Ação:",s.style.fontWeight="bold",s.style.marginBottom="4px",r.appendChild(s),"acessa_url"===n.acao)(c=document.createElement("input")).type="text",c.value="acessa_url",c.disabled=!0,c.style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px",c.style.background="#f5f5f5";else{(c=document.createElement("select")).style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px";var d=document.getElementById("gherkin-action-select");d&&d.innerHTML.trim()?c.innerHTML=d.innerHTML:c.innerHTML='<option value="clica">Clicar</option>',c.value=n.acao}r.appendChild(c);var u=document.createElement("label");"valida_url"===n.acao?u.textContent="URL esperada:":u.textContent="Nome do elemento:",u.style.fontWeight="bold",u.style.marginBottom="4px",r.appendChild(u);var p=document.createElement("input");p.type="text","valida_url"===n.acao?p.value=n.urlEsperada||"":p.value=n.nomeElemento,p.style.width="100%",p.style.padding="7px",p.style.borderRadius="5px",p.style.border="1px solid #ccc",p.style.fontSize="14px",r.appendChild(p);var m=null;if("upload"===n.acao){var g=document.createElement("label");g.textContent="Nome do arquivo de exemplo:",g.style.fontWeight="bold",g.style.marginBottom="4px",r.appendChild(g),(m=document.createElement("input")).type="text",m.value=n.nomeArquivo||"",m.style.width="100%",m.style.padding="7px",m.style.borderRadius="5px",m.style.border="1px solid #ccc",m.style.fontSize="14px",r.appendChild(m)}var h=null;if("preenche"===n.acao){var x=document.createElement("label");x.textContent="Valor preenchido:",x.style.fontWeight="bold",x.style.marginBottom="4px",r.appendChild(x),(h=document.createElement("input")).type="text",h.value=void 0!==n.valorPreenchido?n.valorPreenchido:"",h.style.width="100%",h.style.padding="7px",h.style.borderRadius="5px",h.style.border="1px solid #ccc",h.style.fontSize="14px",h.style.marginBottom="12px",h.autocomplete="off",r.appendChild(h)}var b=null,y=null,w=n.cssSelector&&"object"===v(n.cssSelector)?n.cssSelector:null,k=n.xpath&&"object"===v(n.xpath)?n.xpath:null,E=w&&w.aviso||k&&k.aviso,S=w&&w.ocorrencias||k&&k.ocorrencias,_=w&&w.indice||k&&k.indice||1;if(E&&S>1){(y=document.createElement("div")).textContent=E,y.style.background="#fff3cd",y.style.color="#856404",y.style.padding="7px 10px",y.style.borderRadius="5px",y.style.fontSize="13px",y.style.marginBottom="8px",y.style.border="1px solid #ffeeba",r.appendChild(y);var A=document.createElement("label");A.textContent="Escolha a ocorrência desejada (1 a ".concat(S,"):"),A.style.fontWeight="bold",A.style.marginBottom="4px",r.appendChild(A),(b=document.createElement("input")).type="number",b.min="1",b.max=S,b.value=_,b.style.width="100%",b.style.padding="7px",b.style.borderRadius="5px",b.style.border="1px solid #ccc",b.style.fontSize="14px",b.style.marginBottom="12px",b.autocomplete="off",r.appendChild(b)}var D=document.createElement("div");D.style.display="flex",D.style.gap="18px",D.style.marginTop="12px";var F=document.createElement("button");F.textContent="Salvar",F.style.background="#007bff",F.style.color="#fff",F.style.border="none",F.style.borderRadius="6px",F.style.padding="8px 22px",F.style.fontSize="15px",F.style.fontWeight="bold",F.style.cursor="pointer",F.onclick=function(){if(n.step=l.value,"acessa_url"===n.acao)n.acao="acessa_url",n.acaoTexto="Acessa";else{n.acao=c.value;var e=c.options?c.options[c.selectedIndex]:null;n.acaoTexto=e?e.text:c.value}if("valida_url"===n.acao?n.urlEsperada=p.value.trim()||n.urlEsperada:n.nomeElemento=p.value.trim()||n.nomeElemento,"upload"===n.acao&&m&&(n.nomeArquivo=m.value.trim()||n.nomeArquivo),"preenche"===n.acao&&h&&(n.valorPreenchido=h.value),b&&b.value){var t=parseInt(b.value,10);if(w&&w.css){var r=w.css.replace(/:nth-of-type\(\d+\)/,"");t>1&&(r+=":nth-of-type(".concat(t,")")),n.cssSelector=f(f({},w),{},{css:r,indice:t})}if(k&&k.xpath){var a=k.xpath.replace(/\[\d+\]$/,"");t>1&&(a+="[".concat(t,"]")),n.xpath=f(f({},k),{},{xpath:a,indice:t})}}saveInteractionsToStorage(),C(),o.remove()};var T=document.createElement("button");T.textContent="Cancelar",T.style.background="#dc3545",T.style.color="#fff",T.style.border="none",T.style.borderRadius="6px",T.style.padding="8px 22px",T.style.fontSize="15px",T.style.fontWeight="bold",T.style.cursor="pointer",T.onclick=function(){return o.remove()},D.appendChild(F),D.appendChild(T),r.appendChild(D),o.appendChild(r),document.body.appendChild(o)}}(n)},r.appendChild(a);var i=document.createElement("button");i.textContent="Ver XPath",i.onclick=function(n){n.stopPropagation(),r.style.display="none",function(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="260px";var r=document.createElement("div");r.textContent="XPath do elemento",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a=document.createElement("textarea");a.value=e||"",a.readOnly=!0,a.style.width="100%",a.style.height="60px",a.style.fontSize="13px",a.style.padding="7px",a.style.borderRadius="5px",a.style.border="1px solid #ccc",a.style.marginTop="8px",o.appendChild(a);var i=document.createElement("button");i.textContent="Fechar",i.style.background="#007bff",i.style.color="#fff",i.style.border="none",i.style.borderRadius="6px",i.style.padding="8px 22px",i.style.fontSize="15px",i.style.fontWeight="bold",i.style.cursor="pointer",i.onclick=function(){return t.remove()},o.appendChild(i),t.appendChild(o),document.body.appendChild(t)}(e.xpath)},r.appendChild(i);var l=document.createElement("button");if(l.textContent="Excluir",l.style.color="#dc3545",l.onclick=function(e){e.stopPropagation(),r.style.display="none",w("Tem certeza que deseja excluir esta ação?",(function(){window.interactions.splice(n,1),"function"==typeof saveInteractionsToStorage&&saveInteractionsToStorage(),C()}))},r.appendChild(l),["login","espera_elemento","espera_nao_existe","upload"].includes(e.acao)){var c=document.createElement("button");c.textContent="Ver exemplo Selenium",c.onclick=function(n){n.stopPropagation(),r.style.display="none",function(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="flex-start",o.style.gap="12px",o.style.minWidth="320px",o.style.maxWidth="96vw",o.style.maxHeight="80vh",o.style.overflowY="auto",t.className="gherkin-modal-bg",o.className="gherkin-modal-content";var r;r="login"===e.acao?'\ndriver.find_element(By.CSS_SELECTOR, "'.concat(e.cssSelector,'").send_keys("').concat(e.nomeElemento,'");\ndriver.find_element(By.CSS_SELECTOR, "').concat(e.cssSelectorSenha,'").send_keys("').concat(e.valorPreenchido,'");\ndriver.find_element(By.CSS_SELECTOR, "').concat(e.cssSelectorBotaoLogin,'").click();\n        ').trim():"espera_elemento"===e.acao?'\nWebDriverWait(driver, 10).until(\n    EC.presence_of_element_located((By.CSS_SELECTOR, "'.concat(e.cssSelector,'"))\n)\n        ').trim():"upload"===e.acao?'\ndriver.find_element(By.CSS_SELECTOR, "'.concat(e.cssSelector,'").send_keys("/caminho/para/').concat(e.nomeArquivo,'");\n        ').trim():"# Exemplo Selenium não disponível para esta ação.";var a=document.createElement("div");a.innerHTML="<b>Exemplo Selenium</b> (".concat(e.acao,")"),a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="left",o.appendChild(a);var i=document.createElement("pre");i.textContent=r,i.style.background="#f7faff",i.style.padding="12px",i.style.borderRadius="6px",i.style.fontSize="14px",i.style.overflowX="auto",o.appendChild(i);var l=document.createElement("button");l.textContent="Fechar",l.style.background="#007bff",l.style.color="#fff",l.style.border="none",l.style.borderRadius="6px",l.style.padding="8px 22px",l.style.fontSize="15px",l.style.fontWeight="bold",l.style.cursor="pointer",l.onclick=function(){return t.remove()},o.appendChild(l),t.appendChild(o),document.body.appendChild(t)}(e)},r.appendChild(c)}return o.onclick=function(e){e.stopPropagation(),document.querySelectorAll(".gherkin-action-dropdown").forEach((function(e){e.style.display="none",e.parentElement===document.body&&e.remove()})),r.style.display="flex",r.style.position="absolute",r.style.visibility="hidden",r.style.left="0",r.style.top="0";var n=document.getElementById("gherkin-log");n?("static"===getComputedStyle(n).position&&(n.style.position="relative"),n.appendChild(r)):document.body.appendChild(r);var t=o.getBoundingClientRect(),a=r.getBoundingClientRect(),i=n?n.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight};r.style.visibility="";var l=t.left-i.left+t.width/2-a.width/2,c=t.bottom-i.top+4;l<0&&(l=0),l+a.width>i.right-i.left&&(l=i.right-i.left-a.width-2),c+a.height>i.bottom-i.top&&(c=t.top-i.top-a.height-4)<0&&(c=0),r.style.left=l+"px",r.style.top=c+"px",setTimeout((function(){r.firstChild&&r.firstChild.focus&&r.firstChild.focus()}),0),setTimeout((function(){document.addEventListener("click",(function e(n){r.contains(n.target)||n.target===o||(r.style.display="none",r.parentElement===document.body&&r.remove(),document.removeEventListener("click",e))}))}),0)},setTimeout((function(){document.addEventListener("click",(function e(n){r.contains(n.target)||n.target===o||(r.style.display="none",document.removeEventListener("click",e))}))}),0),t.appendChild(r),t}(e,n)),t.appendChild(p),t.onclick=function(){return S(e)},t.onkeydown=function(n){"Enter"!==n.key&&" "!==n.key||(S(e),n.preventDefault())},a.appendChild(t)}))}(),t.appendChild(o),n.appendChild(t),e.appendChild(n),setTimeout((function(){t.scrollTop=t.scrollHeight}),0),!document.getElementById("gherkin-log-table-style")){var i=document.createElement("style");i.id="gherkin-log-table-style",i.innerHTML="\n/* Container principal do painel de log */\n#gherkin-log {\n    display: flex !important;\n    flex-direction: column !important;\n    height: 100% !important;\n    min-height: 220px;\n    background: #f9f9f9;\n    padding: 0;\n    margin: 0;\n}\n#gherkin-log > div {\n    flex: 1 1 auto;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    min-height: 0;\n    background: #fff;\n}\n#gherkin-log .gherkin-log-table-scroll {\n    flex: 1 1 auto;\n    overflow-x: auto;\n    overflow-y: auto;\n    min-height: 0;\n    background: #fff;\n    /* Barra de rolagem sempre visível */\n    scrollbar-width: thin;\n    scrollbar-color: #007bff #f9f9f9;\n}\n#gherkin-log .gherkin-log-table-scroll::-webkit-scrollbar {\n    height: 12px;\n    background: #f9f9f9;\n}\n#gherkin-log .gherkin-log-table-scroll::-webkit-scrollbar-thumb {\n    background: #007bff;\n    border-radius: 6px;\n    min-width: 40px;\n}\n#gherkin-log .gherkin-log-table-scroll::-webkit-scrollbar-thumb:hover {\n    background: #005bb5;\n}\n#gherkin-log .gherkin-log-table-scroll::-webkit-scrollbar-corner {\n    background: #f9f9f9;\n}\n.gherkin-log-table th, .gherkin-log-table td {\n    padding: 6px 8px;\n    border-bottom: 1px solid #e0e6ed;\n    text-align: left;\n    background: #fff;\n    white-space: nowrap;\n    max-width: 340px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    height: 38px !important;\n    min-height: 38px !important;\n    line-height: 38px !important;\n    vertical-align: middle !important;\n}\n.gherkin-log-table th {\n    background: #f7faff;\n    position: sticky;\n    top: 0;\n    z-index: 1;\n}\n.gherkin-log-table tr:focus {\n    outline: 2px solid #1976d2;\n    outline-offset: 1px;\n}\n.gherkin-log-table {\n    width: 100%;\n    min-width: 700px;\n    background: #fff;\n    /* height removido para evitar esticar a linha única */\n}\n@media (max-width: 900px) {\n    .gherkin-log-table th, .gherkin-log-table td { font-size: 12px; }\n    .gherkin-log-table { min-width: 520px; }\n}\n@media (max-width: 700px) {\n    .gherkin-log-table th, .gherkin-log-table td { font-size: 11px; }\n    .gherkin-log-table { min-width: 400px; }\n}\n",document.head.appendChild(i)}setTimeout((function(){var e=document.getElementById("gherkin-clear");e&&(e.disabled=!1,e.style.opacity="",e.onclick=function(){w("Deseja realmente limpar todas as interações deste cenário?",(function(){window.interactions&&(window.interactions.length=0),"function"==typeof saveInteractionsToStorage&&saveInteractionsToStorage(),C()}))});var n=document.getElementById("gherkin-pause");n&&(n.disabled=!1,n.style.opacity="",n.onclick=function(){if(window.isPaused=!window.isPaused,window.isPaused){n.textContent="Continuar",n.style.backgroundColor="#28a745";var e=document.getElementById("gherkin-status");e&&(e.textContent="Status: Pausado"),"function"==typeof stopTimer&&stopTimer()}else{n.textContent="Pausar",n.style.backgroundColor="#ffc107";var t=document.getElementById("gherkin-status");t&&(t.textContent="Status: Gravando"),"function"==typeof startTimer&&startTimer()}});var t=document.getElementById("gherkin-export");t&&(t.onclick=function(e){e.stopPropagation();var n=document.createElement("div");n.style.position="absolute",n.style.background="#fff",n.style.border="1px solid #ccc",n.style.borderRadius="5px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.12)",n.style.zIndex="10010";var o=t.getBoundingClientRect();n.style.top="".concat(o.bottom+window.scrollY+4,"px"),n.style.left="".concat(o.left+window.scrollX,"px"),n.style.minWidth="120px",n.innerHTML='\n                    <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">CSV</button>\n                    <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">Markdown</button>\n                    <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">JSON</button>\n                ',n.children[0].onclick=function(){E("csv"),n.remove()},n.children[1].onclick=function(){E("md"),n.remove()},n.children[2].onclick=function(){E("json"),n.remove()},document.body.appendChild(n),setTimeout((function(){document.addEventListener("click",(function e(o){n.contains(o.target)||o.target===t||(n.remove(),document.removeEventListener("click",e))}))}),0)})}),0)}}function S(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="flex-start",o.style.gap="12px",o.style.minWidth="320px",o.style.maxWidth="96vw",o.style.maxHeight="80vh",o.style.overflowY="auto",t.className="gherkin-modal-bg",o.className="gherkin-modal-content";var r=k[e.acao]||{},a=document.createElement("div");a.innerHTML='<span style="font-size:1.3em;color:'.concat(r.color||"#222",'">').concat(r.icon||"","</span> <b>").concat(r.label||e.acao,"</b> (").concat(e.step,")"),a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="left",o.appendChild(a);var i=e.cssSelector&&"object"===v(e.cssSelector)?e.cssSelector:null,l=e.xpath&&"object"===v(e.xpath)?e.xpath:null,c=i&&i.ocorrencias?i.ocorrencias:1,s=i&&i.indice?i.indice:1,d=l&&l.ocorrencias?l.ocorrencias:1,u=l&&l.indice?l.indice:1;if(e.nomeElemento){var p=document.createElement("div");p.innerHTML='<b>Nome do elemento:</b> <span style="font-family:monospace">'.concat(e.nomeElemento,"</span>"),o.appendChild(p)}if(e.valorPreenchido||e.nomeArquivo){var m=document.createElement("div");m.innerHTML='<b>Valor preenchido:</b> <span style="font-family:monospace">'.concat(e.valorPreenchido||e.nomeArquivo,"</span>"),o.appendChild(m)}var g=document.createElement("div");g.style.display="flex",g.style.alignItems="center",g.style.gap="8px",g.style.marginBottom="2px";var h=document.createElement("b");h.textContent="Selector CSS:",g.appendChild(h);var x=document.createElement("span");x.style.fontFamily="monospace",x.textContent=i&&i.css?i.css:e.cssSelector||"",g.appendChild(x);var b=document.createElement("input");b.type="number",b.min="1",b.max=c,b.value=s,b.style.width="56px",b.style.marginLeft="6px",b.style.fontSize="13px",b.title="Índice da ocorrência do seletor CSS (1 a ".concat(c,")"),g.appendChild(document.createTextNode(" (índice: ")),g.appendChild(b),g.appendChild(document.createTextNode(" / ".concat(c,")"))),o.appendChild(g);var y=document.createElement("div");y.style.display="flex",y.style.alignItems="center",y.style.gap="8px",y.style.marginBottom="2px";var w=document.createElement("b");w.textContent="XPath:",y.appendChild(w);var E=document.createElement("span");E.style.fontFamily="monospace",E.textContent=l&&l.xpath?l.xpath:e.xpath||"",y.appendChild(E);var S=document.createElement("input");if(S.type="number",S.min="1",S.max=d,S.value=u,S.style.width="56px",S.style.marginLeft="6px",S.style.fontSize="13px",S.title="Índice da ocorrência do XPath (1 a ".concat(d,")"),y.appendChild(document.createTextNode(" (índice: ")),y.appendChild(S),y.appendChild(document.createTextNode(" / ".concat(d,")"))),o.appendChild(y),e.timestamp){var _=document.createElement("div");_.innerHTML='<b>Timestamp:</b> <span style="font-family:monospace">'.concat(new Date(e.timestamp).toLocaleString(),"</span>"),o.appendChild(_)}if(e.stepText){var A=document.createElement("div");A.innerHTML='<b>Texto do passo:</b> <span style="font-family:monospace">'.concat(e.stepText,"</span>"),o.appendChild(A)}b.addEventListener("change",(function(){var n=parseInt(b.value,10);if((!n||n<1)&&(n=1),n>c&&(n=c),b.value=n,i&&i.css){var t=i.css.replace(/:nth-of-type\(\d+\)/,"");n>1&&(t+=":nth-of-type(".concat(n,")")),e.cssSelector=f(f({},i),{},{css:t,indice:n})}saveInteractionsToStorage&&saveInteractionsToStorage(),C&&C(),x.textContent=e.cssSelector&&e.cssSelector.css?e.cssSelector.css:e.cssSelector||""})),S.addEventListener("change",(function(){var n=parseInt(S.value,10);if((!n||n<1)&&(n=1),n>d&&(n=d),S.value=n,l&&l.xpath){var t=l.xpath.replace(/\[\d+\]$/,"");n>1&&(t+="[".concat(n,"]")),e.xpath=f(f({},l),{},{xpath:t,indice:n})}saveInteractionsToStorage&&saveInteractionsToStorage(),C&&C(),E.textContent=e.xpath&&e.xpath.xpath?e.xpath.xpath:e.xpath||""}));var D=document.createElement("button");D.textContent="Fechar",D.style.background="#007bff",D.style.color="#fff",D.style.border="none",D.style.borderRadius="6px",D.style.padding="8px 22px",D.style.fontSize="15px",D.style.fontWeight="bold",D.style.cursor="pointer",D.onclick=function(){return t.remove()},o.appendChild(D),t.appendChild(o),document.body.appendChild(t)}function _(e){var n=e.querySelector("#gherkin-highlight-toggle"),t=e.querySelector("#gherkin-highlight-icon svg");if(n){var o=function(){window.__gherkinHighlightActive?(n.style.background="#eaf6ff",n.style.borderRadius="6px",n.title="Desativar seleção de elemento na página",t&&t.setAttribute("fill","#0070f3")):(n.style.background="none",n.title="Selecionar elemento na página",t&&t.setAttribute("fill","#00bfff"))};void 0===window.__gherkinHighlightActive&&(window.__gherkinHighlightActive=!1),o(),n.onclick=function(){window.__gherkinHighlightActive=!window.__gherkinHighlightActive,window.__gherkinHighlightActive?"function"==typeof window.enableGherkinHighlightMode&&window.enableGherkinHighlightMode():"function"==typeof window.disableGherkinHighlightMode&&window.disableGherkinHighlightMode(),o()}}window.gherkin&&"function"==typeof window.gherkin.exportSelectedFeatures&&(window.exportSelectedFeatures=window.gherkin.exportSelectedFeatures),window.gherkin&&"function"==typeof window.gherkin.exportSelectedFeatures&&(window.exportSelectedFeatures=window.gherkin.exportSelectedFeatures);var a=e.querySelector("#gherkin-minimize"),i=e.querySelector("#gherkin-reopen"),l=e.querySelector("#gherkin-close");a&&(a.onclick=function(){return toggleMinimizePanel(e)}),i&&(i.onclick=function(){return toggleMinimizePanel(e)}),l&&(l.onclick=function(){e.style.opacity="0",setTimeout((function(){return e.remove()}),300),window.panel=null});var c=e.querySelector("#start-feature");c&&(c.onclick=function(){var n=e.querySelector("#feature-name").value.trim();n?(window.currentFeature={name:n,cenarios:[]},window.currentCenario=null,window.gherkinPanelState="cenario",x(e),setTimeout((function(){return _(e)}),100)):r("Informe o nome da feature!","error")});var s=e.querySelector("#start-cenario");s&&(s.onclick=function(){var n=e.querySelector("#cenario-name").value.trim();if(n){var t={step:"Given",acao:"acessa_url",acaoTexto:"que o usuário acessa",nomeElemento:window.location.href,cssSelector:"",xpath:"",timestamp:Date.now()};window.currentCenario={name:n,interactions:[t]},window.interactions=window.currentCenario.interactions,window.gherkinPanelState="gravando",window.isRecording=!0,window.isPaused=!1,window.elapsedSeconds=0,x(e),setTimeout((function(){return _(e)}),100),"function"==typeof startTimer&&startTimer()}else r("Informe o nome do cenário!","error")});var u=e.querySelector("#end-cenario");u&&(u.onclick=function(){window.isRecording=!1,window.isPaused=!1,"function"==typeof stopTimer&&stopTimer(),window.currentFeature&&window.currentCenario&&window.currentFeature.cenarios.push(window.currentCenario),w("Deseja cadastrar um novo cenário?",(function(){window.currentCenario=null,window.interactions=[],window.gherkinPanelState="cenario",x(e),setTimeout((function(){return _(e)}),100)}),(function(){var n=e.querySelector("#end-feature");n&&(n.disabled=!1,n.style.backgroundColor="#dc3545"),r("Cenário encerrado! Você pode encerrar a feature.","success")}))});var p=e.querySelector("#export-project");p&&(p.onclick=m(d().m((function n(){var t,o;return d().w((function(n){for(;;)switch(n.n){case 0:if(t=e.querySelector("#export-form"),0!==(o=Array.from(t.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}))).length){n.n=1;break}return r("Selecione ao menos uma feature!","error"),n.a(2);case 1:"function"==typeof exportSelectedFeatures&&exportSelectedFeatures(o);case 2:return n.a(2)}}),n)}))));var g=e.querySelector("#end-feature");g&&(g.onclick=function(){w("Deseja cadastrar uma nova feature?",(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),r("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",x(e),setTimeout((function(){return _(e)}),100)):r("Adicione pelo menos um cenário!","error")}),(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),r("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="exportar",x(e),setTimeout((function(){return _(e)}),100)):r("Adicione pelo menos um cenário!","error")}))});var f=e.querySelector("#export-selected");f&&(f.onclick=function(){var n=e.querySelector("#export-form");if(n){var t=Array.from(n.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}));0!==t.length?window.exportSelectedFeatures&&"function"==typeof window.exportSelectedFeatures?window.exportSelectedFeatures(t):r("Função de exportação não encontrada! Recarregue a página.","error"):r("Selecione ao menos uma feature!","error")}else r("Formulário de exportação não encontrado!","error")});var h=e.querySelector("#new-feature");h&&(h.onclick=function(){window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",x(e),setTimeout((function(){return _(e)}),100)})}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,a,i,l=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=a.call(t)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return F(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function L(e,n,t){return(n=function(e){var n=function(e){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=A(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var q=null;if(window.enableGherkinHighlightMode=function(){function e(e){q&&q.classList.remove("gherkin-highlight-hover"),(q=e.target).classList.add("gherkin-highlight-hover")}function n(e){q&&(q.classList.remove("gherkin-highlight-hover"),q=null)}!function(){if(!document.getElementById("gherkin-highlight-style")){var e=document.createElement("style");e.id="gherkin-highlight-style",e.innerHTML="\n        .gherkin-highlight-hover {\n            outline: 2px solid #00bfff !important;\n            background: rgba(0,191,255,0.08) !important;\n            cursor: pointer !important;\n            z-index: 999999 !important;\n        }",document.head.appendChild(e)}}(),document.addEventListener("mouseover",e,!0),document.addEventListener("mouseout",n,!0),window.__gherkinHighlightOn={onMouseOver:e,onMouseOut:n}},window.disableGherkinHighlightMode=function(){window.__gherkinHighlightOn&&(document.removeEventListener("mouseover",window.__gherkinHighlightOn.onMouseOver,!0),document.removeEventListener("mouseout",window.__gherkinHighlightOn.onMouseOut,!0),q&&(q.classList.remove("gherkin-highlight-hover"),q=null),window.__gherkinHighlightOn=null)},window.gherkinFeatures||(window.gherkinFeatures=[]),window.currentFeature||(window.currentFeature=null),window.currentCenario||(window.currentCenario=null),window.gherkinPanelState||(window.gherkinPanelState="feature"),void 0===window.isRecording&&(window.isRecording=!1),void 0===window.isPaused&&(window.isPaused=!1),void 0===window.timerInterval&&(window.timerInterval=null),void 0===window.elapsedSeconds&&(window.elapsedSeconds=0),window.interactions||(window.interactions=[]),!window.panel){window.panel=function(){var e=document.getElementById("gherkin-panel");e&&e.remove();var n=document.createElement("div");return n.id="gherkin-panel",n.className="gherkin-panel",n.style.position="fixed",n.style.top="10px",n.style.left="10px",n.style.width="480px",n.style.height="700px",n.style.background="#ffffff",n.style.border="1px solid #ccc",n.style.borderRadius="12px",n.style.boxShadow="0 8px 16px rgba(0, 0, 0, 0.2)",n.style.padding="10px",n.style.zIndex="10000",n.style.fontFamily="Roboto, Arial, sans-serif",n.style.transition="opacity 0.3s ease, transform 0.3s ease",n.setAttribute("role","dialog"),n.setAttribute("aria-label","Painel Gherkin Generator"),x(n),document.body.appendChild(n),n}(),x(window.panel);var P=document.createElement("style");P.id="gherkin-panel-modern-style",P.innerHTML='\n    #gherkin-panel, .gherkin-panel {\n        font-family: \'Segoe UI\', Arial, sans-serif !important;\n        background: #fff;\n        color: #222;\n        border-radius: 12px;\n        box-shadow: 0 4px 24px rgba(0,0,0,0.10);\n        max-width: 480px;\n        min-width: 320px;\n        width: 96vw;\n        min-height: 320px;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        z-index: 2147483647;\n    }\n    .gherkin-panel-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: #f7faff;\n        border-bottom: 1px solid #e0e6ed;\n        padding: 18px 20px 12px 20px;\n        font-size: 1.25rem;\n        font-weight: bold;\n        color: #0070f3;\n        letter-spacing: 0.01em;\n        user-select: none;\n    }\n    .gherkin-panel-header .gherkin-panel-title {\n        font-size: 1.18rem;\n        font-weight: 700;\n        letter-spacing: 0.01em;\n    }\n    .gherkin-panel-header .gherkin-panel-actions {\n        display: flex;\n        gap: 8px;\n    }\n    .gherkin-panel-header button, .gherkin-panel-header .gherkin-close, .gherkin-panel-header .gherkin-minimize {\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 1.2rem;\n        padding: 2px 6px;\n        color: #e74c3c;\n        transition: color 0.2s;\n    }\n    .gherkin-panel-header .gherkin-minimize { color: #f1c40f; }\n    .gherkin-panel-header .gherkin-close:hover { color: #c0392b; }\n    .gherkin-panel-header .gherkin-minimize:hover { color: #b7950b; }\n\n    .gherkin-panel-content {\n        flex: 1 1 auto;\n        padding: 24px 24px 12px 24px;\n        display: flex;\n        flex-direction: column;\n        gap: 18px;\n        background: #fff;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content h2, .gherkin-panel-content h3 {\n        margin: 0 0 8px 0;\n        font-weight: 600;\n        color: #0070f3;\n    }\n    .gherkin-panel-content label {\n        font-weight: 500;\n        margin-bottom: 4px;\n        display: block;\n        color: #222;\n    }\n    .gherkin-panel-content input[type="text"], .gherkin-panel-content input[type="number"], .gherkin-panel-content textarea, .gherkin-panel-content select {\n        width: 100%;\n        padding: 10px 12px;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 6px;\n        font-size: 1rem;\n        margin-bottom: 10px;\n        background: #f9fbfd;\n        transition: border-color 0.2s;\n    }\n    .gherkin-panel-content input:focus, .gherkin-panel-content textarea:focus, .gherkin-panel-content select:focus {\n        outline: none;\n        border-color: #0070f3;\n        background: #fff;\n    }\n    .gherkin-panel-content input[aria-invalid="true"], .gherkin-panel-content textarea[aria-invalid="true"] {\n        border-color: #e74c3c;\n        background: #fff6f6;\n    }\n    .gherkin-panel-content .gherkin-actions-row {\n        display: flex;\n        gap: 12px;\n        margin: 12px 0 0 0;\n        flex-wrap: wrap;\n    }\n    .gherkin-panel-content button, .gherkin-panel-content .gherkin-btn {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        padding: 10px 18px;\n        border: none;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 600;\n        cursor: pointer;\n        transition: background 0.2s, color 0.2s, box-shadow 0.2s;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        margin-bottom: 0;\n        outline: none;\n    }\n    .gherkin-panel-content .gherkin-btn-primary {\n        background: #0070f3;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-primary:hover, .gherkin-panel-content .gherkin-btn-primary:focus {\n        background: #005bb5;\n    }\n    .gherkin-panel-content .gherkin-btn-success {\n        background: #28a745;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-success:hover, .gherkin-panel-content .gherkin-btn-success:focus {\n        background: #218838;\n    }\n    .gherkin-panel-content .gherkin-btn-danger {\n        background: #e74c3c;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-danger:hover, .gherkin-panel-content .gherkin-btn-danger:focus {\n        background: #c0392b;\n    }\n    .gherkin-panel-content .gherkin-btn-warning {\n        background: #ffc107;\n        color: #222;\n    }\n    .gherkin-panel-content .gherkin-btn-warning:hover, .gherkin-panel-content .gherkin-btn-warning:focus {\n        background: #e0a800;\n    }\n    .gherkin-panel-content .gherkin-btn[disabled], .gherkin-panel-content button[disabled] {\n        opacity: 0.6;\n        cursor: not-allowed;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        margin-bottom: 12px;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list label {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 400;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list input[type="checkbox"] {\n        accent-color: #0070f3;\n        width: 18px;\n        height: 18px;\n    }\n    .gherkin-panel-content .gherkin-feedback {\n        margin: 8px 0;\n        padding: 10px 14px;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 500;\n        background: #eafaf1;\n        color: #218838;\n        border: 1.5px solid #28a745;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        min-height: 40px;\n        transition: background 0.2s, color 0.2s;\n    }\n    .gherkin-panel-content .gherkin-feedback.error {\n        background: #fff6f6;\n        color: #e74c3c;\n        border-color: #e74c3c;\n    }\n    .gherkin-panel-content .gherkin-feedback.info {\n        background: #f7faff;\n        color: #0070f3;\n        border-color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-feedback .gherkin-feedback-icon {\n        font-size: 1.3em;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    .gherkin-panel-content .gherkin-tip {\n        background: #f7faff;\n        border-left: 4px solid #0070f3;\n        padding: 10px 16px;\n        border-radius: 6px;\n        color: #0070f3;\n        font-size: 0.98rem;\n        margin-bottom: 8px;\n        margin-top: 0;\n        display: flex;\n        align-items: flex-start;\n        gap: 8px;\n    }\n    .gherkin-panel-content .gherkin-tip .gherkin-tip-icon {\n        font-size: 1.2em;\n        margin-right: 4px;\n        color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-summary {\n        background: #f9fbfd;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 10px;\n        font-size: 0.98rem;\n        color: #222;\n        max-height: 180px;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content .gherkin-summary-title {\n        font-weight: 600;\n        color: #0070f3;\n        margin-bottom: 6px;\n        font-size: 1.05rem;\n    }\n    .gherkin-panel-content .gherkin-summary-list {\n        list-style: disc inside;\n        margin: 0;\n        padding: 0 0 0 10px;\n    }\n    .gherkin-panel-content .gherkin-summary-list li {\n        margin-bottom: 2px;\n        font-size: 0.97rem;\n    }\n    .gherkin-panel-content .gherkin-footer {\n        text-align: right;\n        font-size: 0.92rem;\n        color: #888;\n        margin-top: 10px;\n        margin-bottom: 2px;\n    }\n    /* Dropdown de ações (três pontos) */\n    .gherkin-action-dropdown {\n        position: absolute !important;\n        min-width: 170px;\n        background: #fff;\n        border-radius: 10px;\n        box-shadow: 0 8px 32px rgba(0,112,243,0.13), 0 1.5px 6px rgba(0,0,0,0.07);\n        border: 1.5px solid #e0e6ed;\n        z-index: 2147483646 !important;\n        padding: 8px 0;\n        display: none;\n        flex-direction: column;\n        animation: fadeInDropdown 0.18s;\n        /* Novo: ajuste para garantir que o dropdown nunca fique fora da janela */\n        right: auto !important;\n        left: 0 !important;\n        top: 36px !important;\n        max-width: 90vw;\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    .gherkin-action-dropdown.open {\n        display: flex !important;\n    }\n    .gherkin-action-dropdown button,\n    .gherkin-action-dropdown .gherkin-action-item {\n        background: none;\n        border: none;\n        width: 100%;\n        text-align: left;\n        padding: 10px 18px;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n        transition: background 0.18s, color 0.18s;\n        border-radius: 0;\n        display: flex;\n        align-items: center;\n        gap: 10px;\n    }\n    .gherkin-action-dropdown button:hover,\n    .gherkin-action-dropdown .gherkin-action-item:hover {\n        background: #f7faff;\n        color: #0070f3;\n    }\n    .gherkin-action-dropdown .gherkin-action-separator {\n        height: 1px;\n        background: #e0e6ed;\n        margin: 4px 0;\n        border: none;\n    }\n    @keyframes fadeInDropdown {\n        from { opacity: 0; transform: translateY(-8px);}\n        to { opacity: 1; transform: translateY(0);}\n    }\n\n    /* Painel de logs aprimorado */\n    .gherkin-log-panel {\n        background: #f9fbfd;\n        border-radius: 10px;\n        border: 1.5px solid #e0e6ed;\n        padding: 12px 0 6px 0;\n        margin-bottom: 10px;\n        max-height: 260px;\n        overflow-y: auto;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        font-size: 0.98rem;\n        scrollbar-width: thin;\n        scrollbar-color: #0070f3 #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar {\n        width: 8px;\n        background: #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar-thumb {\n        background: #e0e6ed;\n        border-radius: 6px;\n    }\n    .gherkin-log-list {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    .gherkin-log-item {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        padding: 10px 18px 10px 16px;\n        border-bottom: 1px solid #e0e6ed;\n        background: transparent;\n        transition: background 0.15s;\n        position: relative;\n    }\n    .gherkin-log-item:last-child {\n        border-bottom: none;\n    }\n    .gherkin-log-item:hover {\n        background: #f7faff;\n    }\n    .gherkin-log-icon {\n        font-size: 1.25em;\n        width: 28px;\n        height: 28px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        background: #eaf6ff;\n        color: #0070f3;\n        flex-shrink: 0;\n    }\n    .gherkin-log-item[data-action="preenche"] .gherkin-log-icon { background: #f6f9e8; color: #28a745; }\n    .gherkin-log-item[data-action="upload"] .gherkin-log-icon { background: #fff6e6; color: #f39c12; }\n    .gherkin-log-item[data-action="login"] .gherkin-log-icon { background: #f6e8f9; color: #8e44ad; }\n    .gherkin-log-item[data-action="clica"] .gherkin-log-icon { background: #eafaf1; color: #218838; }\n    .gherkin-log-item[data-action="espera"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-item[data-action="espera_elemento"] .gherkin-log-icon { background: #f7faff; color: #0070f3; }\n    .gherkin-log-item[data-action="acessa_url"] .gherkin-log-icon { background: #eaf6ff; color: #0070f3; }\n    .gherkin-log-item[data-action="seleciona"] .gherkin-log-icon { background: #f6f9e8; color: #218838; }\n    .gherkin-log-item[data-action="espera_nao_existe"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-content {\n        flex: 1 1 auto;\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n    }\n    .gherkin-log-title {\n        font-weight: 600;\n        color: #222;\n        font-size: 1.01em;\n        margin-bottom: 2px;\n    }\n    .gherkin-log-desc {\n        color: #555;\n        font-size: 0.97em;\n        margin-bottom: 0;\n    }\n    .gherkin-log-meta {\n        color: #888;\n        font-size: 0.93em;\n        margin-top: 2px;\n    }\n    /* Ajuste para dropdown não sair da tela */\n    .gherkin-action-dropdown {\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    @media (max-width: 600px) {\n        .gherkin-action-dropdown {\n            left: 0 !important;\n            right: auto !important;\n            max-width: 96vw;\n        }\n        .gherkin-log-panel {\n            max-height: 40vw;\n        }\n    }\n    ',document.head.appendChild(P)}function N(e){try{if(!window.isRecording||window.isPaused)return;if(!l())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content")||"gherkin-feature-name"===e.target.id||e.target.classList&&e.target.classList.contains("gherkin-feature-name")||e.target.closest&&e.target.closest(".gherkin-feature-name"))return;var n=document.getElementById("gherkin-action-select"),o="preenche";if(n&&n.selectedIndex>=0&&(o=n.value),"preenche"===o){if(window.__gherkinPreencheBlurChangeHandler||(window.__gherkinPreencheBlurChangeHandler=function(e){var n,o;if(window.isRecording&&!window.isPaused&&l()){var r=e.target;if("P-INPUTNUMBER"===r.tagName||r.classList&&r.classList.contains("p-inputnumber")){var i=r.querySelector("input.p-inputnumber-input, input.p-inputtext");i&&(r=i)}if("keydown"!==e.type||"Tab"===e.key){var c=null===(n=a(r))||void 0===n?void 0:n.css,s="function"==typeof getRobustXPath?null===(o=getRobustXPath(r))||void 0===o?void 0:o.xpath:"",d="";if(r.id){var u=document.querySelector('label[for="'+r.id+'"]');u&&u.textContent&&(d=u.textContent.trim())}if(!d&&r.closest){var p=r.closest("label");p&&p.textContent&&(d=p.textContent.trim())}!d&&r.getAttribute("aria-label")&&(d=r.getAttribute("aria-label").trim()),!d&&r.getAttribute("placeholder")&&(d=r.getAttribute("placeholder").trim()),!d&&r.getAttribute("name")&&(d=r.getAttribute("name").trim()),d||!r.id||/^([0-9_\-]+|input|field|campo)$/i.test(r.id)||(d=r.id.trim()),!d&&"string"==typeof r.innerText&&r.innerText.trim().length>2&&r.innerText.trim().length<60&&(d=r.innerText.trim()),!d&&r.tagName&&(d=r.tagName.toLowerCase()),d=(d||"").toString().trim();var m="",g=r.closest&&(r.closest("tr")||r.closest("tbody")||r.closest("table"));if(g){var f;m=null===(f=a(g))||void 0===f?void 0:f.css;var h=null;"TR"===g.tagName&&(h=Array.from(g.parentElement?g.parentElement.children:[]).indexOf(g)+1);var v="";if(r.closest){var x=r.closest("td,th");if(x&&void 0!==x.cellIndex&&x.cellIndex>=0){var b=x.closest("table");if(b){var y=null;if(y=b.tHead&&b.tHead.rows.length>0?b.tHead.rows[0]:b.querySelector("tr")){var w=y.querySelectorAll("th");w&&w.length>x.cellIndex&&(v=w[x.cellIndex].textContent.trim())}}}}var k="";k="INPUT_".concat(v?t(v).toUpperCase():t(d).toUpperCase()),h&&(k+="_LINHA_".concat(h));var E=0;window.interactions&&Array.isArray(window.interactions)&&(E=window.interactions.filter((function(e){return e.parentSelector===m&&e.nomeElemento===k})).length),E>0&&(k+="_".concat(E+1)),d=k}var S="";void 0!==r.value?S=r.value:void 0!==r.innerText?S=r.innerText:void 0!==r.textContent&&(S=r.textContent);var _="Then",A=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(A=1),0===window.interactions.length?_="Given":1===window.interactions.length&&0===A||1===window.interactions.length&&1===A?_="When":2===window.interactions.length&&1===A&&(_="Then");var D=window.interactions[window.interactions.length-1];D&&"preenche"===D.acao&&D.cssSelector===c&&D.nomeElemento===d&&D.valorPreenchido===S||(window.interactions.push({step:_,acao:"preenche",acaoTexto:"Preencher",nomeElemento:d,cssSelector:c,xpath:s,valorPreenchido:S,parentSelector:m,timestamp:Date.now()}),C(),"function"==typeof window.saveInteractionsToStorage&&window.saveInteractionsToStorage())}}}),window.__gherkinPreencheKeydownHandler||(window.__gherkinPreencheKeydownHandler=function(e){"Tab"===e.key&&setTimeout((function(){var n,t;if(window.isRecording&&!window.isPaused&&l()){var o=e.target;if("P-INPUTNUMBER"===o.tagName||o.classList&&o.classList.contains("p-inputnumber")){var r=o.querySelector("input.p-inputnumber-input, input.p-inputtext");r&&(o=r)}var i=null===(n=a(o))||void 0===n?void 0:n.css,c="function"==typeof getRobustXPath?null===(t=getRobustXPath(o))||void 0===t?void 0:t.xpath:"",s="";if(o.id){var d=document.querySelector('label[for="'+o.id+'"]');d&&d.textContent&&(s=d.textContent.trim())}if(!s&&o.closest){var u=o.closest("label");u&&u.textContent&&(s=u.textContent.trim())}!s&&o.getAttribute("aria-label")&&(s=o.getAttribute("aria-label").trim()),!s&&o.getAttribute("placeholder")&&(s=o.getAttribute("placeholder").trim()),!s&&o.getAttribute("name")&&(s=o.getAttribute("name").trim()),s||!o.id||/^([0-9_\-]+|input|field|campo)$/i.test(o.id)||(s=o.id.trim()),!s&&"string"==typeof o.innerText&&o.innerText.trim().length>2&&o.innerText.trim().length<60&&(s=o.innerText.trim()),!s&&o.tagName&&(s=o.tagName.toLowerCase()),s=(s||"").toString().trim();var p="";void 0!==o.value?p=o.value:void 0!==o.innerText?p=o.innerText:void 0!==o.textContent&&(p=o.textContent);var m="Then",g=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(g=1),0===window.interactions.length?m="Given":1===window.interactions.length&&0===g||1===window.interactions.length&&1===g?m="When":2===window.interactions.length&&1===g&&(m="Then");var f=window.interactions[window.interactions.length-1];if(!f||"preenche"!==f.acao||f.cssSelector!==i||f.nomeElemento!==s||f.valorPreenchido!==p){var h,v="",x=o.closest&&(o.closest("tr")||o.closest("tbody")||o.closest("table"));x&&(v=null===(h=a(x))||void 0===h?void 0:h.css),window.interactions.push({step:m,acao:"preenche",acaoTexto:"Preencher",nomeElemento:s,cssSelector:i,xpath:c,valorPreenchido:p,parentSelector:v,timestamp:Date.now()}),C(),"function"==typeof window.saveInteractionsToStorage&&window.saveInteractionsToStorage()}}}),0)}),e.target.removeEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),e.target.removeEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),e.target.removeEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0),e.target.closest&&e.target.closest("p-inputnumber")){var r=e.target.closest("p-inputnumber");r.removeEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),r.removeEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),r.removeEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0)}if(e.target.addEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),e.target.addEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),e.target.addEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0),e.target.closest&&e.target.closest("p-inputnumber")){var i=e.target.closest("p-inputnumber");i.addEventListener("blur",window.__gherkinPreencheBlurChangeHandler,!0),i.addEventListener("change",window.__gherkinPreencheBlurChangeHandler,!0),i.addEventListener("keydown",window.__gherkinPreencheKeydownHandler,!0)}return}}catch(e){console.error("Erro no handleInputEvent:",e)}}if(void 0===window.lastInputTarget&&(window.lastInputTarget=null),void 0===window.inputDebounceTimeout&&(window.inputDebounceTimeout=null),void 0===window.lastInputValue&&(window.lastInputValue=""),setTimeout((function(){_(window.panel),window.panel.querySelector(".gherkin-panel-header")&&y(window.panel);var e=document.getElementById("gherkin-action-select");e&&(e.addEventListener("change",(function(){return b(window.panel)})),b(window.panel))}),100),document.addEventListener("click",(function(e){if(window.isRecording&&!window.isPaused)try{var n,t;if(!l())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if("INPUT"===e.target.tagName&&"file"===e.target.type){var o,i,c=null===(o=a(e.target))||void 0===o?void 0:o.css,d=null===(i=getRobustXPath(e.target))||void 0===i?void 0:i.xpath,u=(e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.id||e.target.className||e.target.tagName).toString().trim();return u||(u=e.target.tagName),void("function"==typeof window.showUploadModal?window.showUploadModal(u,c,d,(function(e){e&&Array.isArray(e)&&0!==e.length&&s((function(n){var t=e.join(", "),o=(n.templateUpload||'When faz upload dos arquivos "{arquivos}" no campo {elemento}').replace("{arquivos}",t).replace("{elemento}",u);window.interactions.push({step:"When",acao:"upload",acaoTexto:"Upload de arquivo",nomeElemento:u,cssSelector:c,xpath:d,nomesArquivos:e,stepText:o,timestamp:Date.now()}),C()}))})):r("Função de upload não disponível!","error"))}if("INPUT"===e.target.tagName&&"file"!==e.target.type||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)return;var p=!1;if("BUTTON"===e.target.tagName||"submit"===e.target.type){var m=e.target.closest("form");if(m){var g=m.querySelectorAll("input"),f=!1,h=!1;g.forEach((function(e){var n=e.getAttribute("type")||"",t=(e.getAttribute("name")||"").toLowerCase();("password"===n||t.includes("senha")||t.includes("password"))&&(h=!0),("text"===n||"email"===n||t.includes("user")||t.includes("email"))&&(f=!0)})),f&&h&&(p=!0)}}var v=e.target,x=document.getElementById("gherkin-action-select"),b=x?x.options[x.selectedIndex].text:"Clicar",y=x?x.value:"clica";if("valida_url"===y){var w=window.location.href;return void s((function(e){var n=(e&&e.templateValidaUrl?e.templateValidaUrl:'Then valida que a URL da página é "{url}"').replace("{url}",w);window.interactions.push({step:"Then",acao:"valida_url",acaoTexto:"Validar URL",urlEsperada:w,stepText:n,timestamp:Date.now()}),C()}))}if("preenche"===y){var k=function(e){if(!e)return null;if(function(e){if(!e)return!1;if("P-INPUTNUMBER"===e.tagName||e.classList&&(e.classList.contains("p-inputnumber")||e.classList.contains("p-inputnumber-input")||e.classList.contains("p-inputwrapper")))return!0;if("INPUT"===e.tagName){var n=(e.type||"").toLowerCase();if(["text","email","password","search","tel","url","number","date","datetime-local","month","time","week"].includes(n))return!0;if(e.getAttribute("inputmode")&&["decimal","numeric"].includes(e.getAttribute("inputmode")))return!0;if("spinbutton"===e.getAttribute("role"))return!0;var t=(e.className||"").split(/\s+/);if(t.includes("p-inputtext")||t.includes("p-inputnumber-input"))return!0}return"TEXTAREA"===e.tagName||!!e.isContentEditable}(e))return e;var n=e.querySelector&&e.querySelector('input:not([type=file]), textarea, [contenteditable="true"], .p-inputnumber-input, .p-inputtext');if(n)return n;var t=e.querySelector&&e.querySelector("p-inputnumber");if(t){var o=t.querySelector("input.p-inputnumber-input, input.p-inputtext");if(o)return o}return null}(e.target);k&&(v=k)}var E=null===(n=a(v))||void 0===n?void 0:n.css,S=null===(t=getRobustXPath(v))||void 0===t?void 0:t.xpath,_=v.getAttribute("aria-label")||v.getAttribute("name")||v.id||v.className||v.tagName;"string"==typeof _&&(_=_.trim()),_||(_=v.tagName);var A="";"string"==typeof v.innerText&&v.innerText.trim()?A=v.innerText.trim():"string"==typeof v.textContent&&v.textContent.trim()&&(A=v.textContent.trim()),!A||_&&_.includes(A)||(_?_+=" | ".concat(A):_=A);var D="";void 0!==v.value?D=v.value:void 0!==v.innerText?D=v.innerText:void 0!==v.textContent&&(D=v.textContent);var F={};if("espera_segundos"===y){var q=document.getElementById("gherkin-wait-seconds"),P=1;q&&q.value&&(P=parseInt(q.value,10),(isNaN(P)||P<1)&&(P=1)),F.tempoEspera=P}if("espera_elemento"===y&&(F.esperaSeletor=E),"login"===y||p){var N="",O="",R=e.target.closest("form");return R&&R.querySelectorAll("input").forEach((function(e){var n,t,o=e.getAttribute("type")||"",r=(e.getAttribute("name")||"").toLowerCase();N||"text"!==o&&"email"!==o&&!r.includes("user")&&!r.includes("email")||(N=null===(n=a(e))||void 0===n?void 0:n.css),O||"password"!==o&&!r.includes("senha")&&!r.includes("password")||(O=null===(t=a(e))||void 0===t?void 0:t.css)})),void s((function(e){var n=e.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"';window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:"login",userField:N,passField:O,cssSelector:E,xpath:S,stepText:n,timestamp:Date.now()}),C()}))}var z=window.interactions[window.interactions.length-1],B=!1;if("preenche"===y?B=z&&z.acao===y&&z.cssSelector===E&&z.nomeElemento===_&&z.valorPreenchido===D&&z.xpath===S:(B=z&&z.acao===y&&z.cssSelector===E&&z.nomeElemento===_,"espera_segundos"===y&&z&&void 0!==z.tempoEspera&&(B=B&&z.tempoEspera===F.tempoEspera),"espera_elemento"===y&&z&&z.esperaSeletor&&(B=B&&z.esperaSeletor===F.esperaSeletor)),B)return;var I,j;if(j=0===window.interactions.length?"Given":"When",window.givenAcessaUrlAdded=!1,I=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){L(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}("preenche"===y?{step:j,acao:y,acaoTexto:b,nomeElemento:_,cssSelector:E,xpath:S,valorPreenchido:D,timestamp:Date.now()}:{step:j,acao:y,acaoTexto:b,nomeElemento:_,cssSelector:E,xpath:S,timestamp:Date.now()},F),window.interactions.push(I),window.interactions.length>0){if(window.interactions[0].step="Given",window.interactions.length>2)for(var M=1;M<window.interactions.length-1;M++)window.interactions[M].step="When";window.interactions.length>1&&(window.interactions[window.interactions.length-1].step="Then")}C()}catch(e){console.error("Erro ao registrar clique:",e)}})),"function"!=typeof window.saveInteractionsToStorage&&("function"==typeof saveInteractionsToStorage?window.saveInteractionsToStorage=saveInteractionsToStorage:window.saveInteractionsToStorage=function(){}),document.removeEventListener("input",N,!0),document.addEventListener("input",N,!0),void 0!==x){var O=x;x=function(e){O(e),"gravando"===window.gherkinPanelState&&setTimeout(C,10),e.querySelector(".gherkin-panel-header")&&y(e)}}function R(e){showSpinner("Exportando arquivos..."),s((function(n){if(window.gherkinFeatures&&Array.isArray(window.gherkinFeatures)){var a=window.gherkinFeatures.filter((function(n,t){return e.includes(t)}));0!==a.length?(a.forEach((function(e){var n=(e.name||"").normalize("NFD").replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"_").replace(/^_+|_+$/g,"").toLowerCase(),t="Feature: ".concat(e.name,"\n");(e.cenarios||[]).forEach((function(e,n){t+="  Scenario: ".concat(e.name,"\n");for(var o=e.interactions||[],r=0;r<o.length;){var a=o[r],i=a.step||"When";if("preenche"!==a.acao)if("valida_url"!==a.acao){var l="";if("Given"===i&&"acessa_url"===a.acao&&a.nomeElemento&&a.nomeElemento.startsWith("http"))l='que o usuário acessa a página "'.concat(a.nomeElemento,'"');else if(a.stepText)l=a.stepText;else if("clica"===a.acao)l="o usuário clica no elemento ".concat(a.nomeElemento?'"'+a.nomeElemento+'"':"");else if("upload"===a.acao){var c=void 0!==a.nomeArquivo&&null!==a.nomeArquivo&&""!==a.nomeArquivo?a.nomeArquivo:"<arquivo>";l='o usuário faz upload do arquivo "'.concat(c,'" no campo ').concat(a.nomeElemento?'"'+a.nomeElemento+'"':"")}else l="espera_elemento"===a.acao?"o usuário espera o elemento ".concat(a.nomeElemento?'"'+a.nomeElemento+'"':""," aparecer"):"espera_segundos"===a.acao?"o usuário espera ".concat(a.tempoEspera||"<segundos>"," segundos"):a.acao&&a.acao.toLowerCase().includes("valida")?"o usuário valida que existe o elemento ".concat(a.nomeElemento?'"'+a.nomeElemento+'"':""):"".concat(a.acaoTexto||a.acao||"ação"," no elemento ").concat(a.nomeElemento?'"'+a.nomeElemento+'"':"");var s=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();t+="    ".concat(s," ").concat(l,"\n"),r++}else{var d='valida que a URL da página é "'.concat(a.urlEsperada,'"'),u=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();t+="    ".concat(u," ").concat(d,"\n"),r++}else{for(var p=[],m=a.parentSelector||"",g=r;g<o.length&&"preenche"===o[g].acao&&(o[g].parentSelector||"")===m;)p.push(o[g]),g++;if(p.length>1){var f=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();t+="    ".concat(f," preencho os campos da tabela:\n"),t+="      | Campo | Valor |\n",p.forEach((function(e){t+="      | ".concat(e.nomeElemento," | ").concat(e.valorPreenchido," |\n")})),r=g;continue}var h=void 0!==a.valorPreenchido&&null!==a.valorPreenchido&&""!==a.valorPreenchido?a.valorPreenchido:"<valor>",v="o usuário preenche o campo ".concat(a.nomeElemento?'"'+a.nomeElemento+'"':"",' com "').concat(h,'"'),x=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase();t+="    ".concat(x," ").concat(v,"\n"),r++}}t+="\n"})),o("".concat(n,".feature"),t)})),a.forEach((function(e){var n="# Feature: ".concat(e.name,"\n\n## Descrição do fluxo\nEsta feature cobre o(s) seguinte(s) cenário(s):\n\n");function r(e){return(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").replace(/^[0-9]+/,"").toUpperCase()}(e.cenarios||[]).forEach((function(e){n+="### Cenário: ".concat(e.name,"\n"),n+="**Fluxo resumido:**\n",(e.interactions||[]).forEach((function(e){var t=e.step||"",o=e.acaoTexto||e.acao||"",r=e.nomeElemento||"",a=e.valorPreenchido?' (valor: "'.concat(e.valorPreenchido,'")'):"",i="";"upload"===e.acao&&e.nomeArquivo&&(i=" (arquivo: ".concat(e.nomeArquivo,")")),n+="- ".concat(t," ").concat(o,' em "').concat(r,'"').concat(a).concat(i,"\n")})),n+="\n"})),n+="## Como executar os testes\n",n+="1. Instale as dependências:\n",n+="   ```bash\n   pip install -r requirements.txt\n   ```\n",n+="2. Execute os testes com o Behave:\n",n+="   ```bash\n   behave\n   ```\n\n",n+="## Pré-requisitos\n",n+="- Navegador Google Chrome com extensão Selenium WebDriver instalada (ou ambiente Python/Selenium configurado)\n",n+="- Acesso ao ambiente de testes\n\n",n+="## Exemplo de execução (Python + Selenium)\n",n+="```python\n",n+="# Exemplo básico de inicialização do Selenium\n",n+="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n",n+="driver = webdriver.Chrome()\n",n+='driver.get("URL_DO_SISTEMA")\n',n+="# ...seguir os passos do cenário conforme descrito acima...\n",n+="```\n\n",n+="## Observações\n",n+="- Adapte os seletores e valores conforme necessário para o seu ambiente.\n",n+="- Prints das telas podem ser adicionados manualmente após a execução dos testes.\n",n+="- Consulte os arquivos `pages.py`, `steps.py` e `environment.py` para customizações avançadas.\n",o("README_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".md"),n);var a=new Set,i={},l={},c=new Map;(e.cenarios||[]).forEach((function(e){(e.interactions||[]).forEach((function(e){if(e.cssSelector&&e.nomeElemento){var n=e.nomeElemento.trim(),t=(n||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"").replace(/^[0-9]+/,"").toLowerCase(),o=D(n.split("|").map((function(e){return e.trim()})),2),s=o[0],d=o[1],u=r(s);d&&(u+="_"+r(d)),u||(u="ELEMENTO_"+Math.random().toString(36).substring(2,8).toUpperCase());for(var p=u,m=1;a.has(u);)u=p+"_"+m,m++;a.add(u),i[u]=e.cssSelector,l[t]=u,c.has(t)||c.set(t,new Set),c.get(t).add(n)}}))}));var s=[];c.forEach((function(e,n){e.size>1&&s.push("# Atenção: O texto do .feature apresenta variações para o mesmo campo padronizado ('".concat(n,"'): ").concat(Array.from(e).join(", ")))}));var d=[];Object.entries(l).forEach((function(e){var n=D(e,2),t=n[0],o=n[1];a.has(o)||(a.add(o),i[o]="MISSING_LOCATOR",d.push("".concat(t," → ").concat(o)))})),Object.keys(c).forEach((function(e){var n=l[e];i[n]||(i[n]="MISSING_LOCATOR",d.push("".concat(e," → ").concat(n)))}));var u="";d.length>0&&(u="# Atenção: Os seguintes campos do .feature não possuem locator definido e foram adicionados como 'MISSING_LOCATOR':\n#   ".concat(d.join(", "),"\n"),"undefined"!=typeof console&&console.warn(u));var p={};Object.entries(i).forEach((function(e){var n=D(e,2),t=n[0],o=n[1];p[o]||(p[o]=[]),p[o].push(t)}));var m=Object.entries(p).filter((function(e){var n=D(e,2);return n[0],n[1].length>1})).map((function(e){var n=D(e,2),t=n[0],o=n[1];return"# Atenção: O seletor '".concat(t,"' está sendo usado para múltiplos campos: ").concat(o.join(", "))})),g=["div","span","button","input","a","p","section","article","header","footer","main","form"],f=Object.entries(i).filter((function(e){var n=D(e,2),t=(n[0],n[1]);return g.includes(t.trim().toLowerCase())})).map((function(e){var n=D(e,2),t=n[0],o=n[1];return"# Atenção: O locator '".concat(t,"' está usando um seletor genérico ('").concat(o,"'). Torne-o mais específico usando uma classe ou atributo exclusivo.")})),h=t(e.name),v="# ".concat(h,'_pages.py gerado automaticamente para a feature "').concat(e.name,'"\n # -*- coding: utf-8 -*-\n"""\nPage Object Model (POM) para a feature "').concat(e.name,'".\nContém classes de locators e métodos de interação para uso nos steps do Behave.\nInclui tratamento de exceções para maior robustez.\nTimeouts parametrizáveis e configuráveis globalmente.\n"""\n\n# IMPORTS AGRUPADOS E COMPLETOS\nimport os\nfrom selenium.webdriver.common.by import By\nfrom selenium.common.exceptions import NoSuchElementException, TimeoutException, ElementNotInteractableException, StaleElementReferenceException\nfrom selenium.webdriver.support.ui import WebDriverWait, Select\nfrom selenium.webdriver.support import expected_conditions as EC\nimport time\n\nclass Locators').concat(t(e.name),':\n    """\n    Locators para os elementos da feature "').concat(e.name,'".\n    """\n').concat(0===a.size?"    # Nenhum locator identificado":Array.from(a).map((function(e){return"    ".concat(e," = (By.CSS_SELECTOR, '").concat(i[e],"')")})).join("\n"),"\n\n\n").concat(m.length>0?m.join("\n")+"\n":"","\n").concat(f.length>0?f.join("\n")+"\n":"","\n\n\nclass Page").concat(t(e.name),':\n    """\n    Classe de Page Object para interações genéricas da feature "').concat(e.name,'".\n    """\n\n    def __init__(self, driver, default_timeout=10):\n        """\n        Inicializa o Page Object com o driver do Selenium e timeout padrão.\n        O timeout padrão pode ser sobrescrito por variável de ambiente SELENIUM_TIMEOUT.\n        Também torna todos os locators disponíveis como atributos da instância.\n        """\n        self.driver = driver\n        self.default_timeout = int(os.getenv("SELENIUM_TIMEOUT", default_timeout))\n        # Torna todos os locators disponíveis como atributos da instância\n        for attr in dir(Locators').concat(t(e.name),"):\n            if attr.isupper():\n                setattr(self, attr, getattr(Locators").concat(t(e.name),', attr))\n\n    def acessar_url(self, url):\n        """\n        Acessa a URL informada.\n        """\n        try:\n            self.driver.get(url)\n            print(f"[INFO] Acessou a URL \'{url}\' com sucesso.")\n        except Exception as e:\n            print(f"[ERRO] Falha ao acessar URL \'{url}\': {e}")\n            raise\n\n    def clicar(self, locator, tentativas=3, espera=1):\n        """\n        Clica no elemento identificado pelo locator, com retry automático em caso de StaleElementReferenceException e espera explícita para estar clicável.\n        tentativas: número de tentativas antes de falhar.\n        espera: tempo (segundos) entre as tentativas.\n        """\n        tentativa = 0\n        ultimo_erro = None\n        while tentativa < tentativas:\n            try:\n                WebDriverWait(self.driver, self.default_timeout).until(EC.element_to_be_clickable(locator))\n                self.driver.find_element(*locator).click()\n                print(f"[INFO] Clique realizado com sucesso no elemento {locator}.")\n                return\n            except StaleElementReferenceException as e:\n                print(f"[WARN] StaleElementReferenceException ao clicar no elemento {locator}: {e}. Tentando novamente ({tentativa+1}/{tentativas})...")\n                time.sleep(espera)\n                tentativa += 1\n                ultimo_erro = e\n            except (NoSuchElementException, ElementNotInteractableException) as e:\n                print(f"[ERRO] Falha ao clicar no elemento {locator}: {e}")\n                raise\n            except Exception as e:\n                print(f"[ERRO] Erro inesperado ao clicar no elemento {locator}: {e}")\n                raise\n        raise Exception(f"Não foi possível clicar no elemento {locator} após {tentativas} tentativas devido a StaleElementReferenceException. Último erro: {ultimo_erro}")\n\n    def preencher(self, locator, valor, tentativas=3, espera=1):\n        """\n        Preenche o campo identificado pelo locator com o valor informado, com retry automático em caso de StaleElementReferenceException e espera explícita para estar visível.\n        """\n        tentativa = 0\n        ultimo_erro = None\n        while tentativa < tentativas:\n            try:\n                WebDriverWait(self.driver, self.default_timeout).until(EC.visibility_of_element_located(locator))\n                el = self.driver.find_element(*locator)\n                el.clear()\n                el.send_keys(valor)\n                print(f"[INFO] Preenchimento do campo {locator} com valor \'{valor}\' realizado com sucesso.")\n                return\n            except StaleElementReferenceException as e:\n                print(f"[WARN] StaleElementReferenceException ao preencher o campo {locator}: {e}. Tentando novamente ({tentativa+1}/{tentativas})...")\n                time.sleep(espera)\n                tentativa += 1\n                ultimo_erro = e\n            except NoSuchElementException as e:\n                print(f"[ERRO] Elemento {locator} não encontrado: {e}")\n                raise\n            except ElementNotInteractableException as e:\n                print(f"[ERRO] Elemento {locator} não interagível: {e}")\n                raise\n            except Exception as e:\n                print(f"[ERRO] Erro inesperado ao preencher {locator}: {e}")\n                raise\n        raise Exception(f"Não foi possível preencher o campo {locator} após {tentativas} tentativas devido a StaleElementReferenceException. Último erro: {ultimo_erro}")\n\n    def selecionar(self, locator, valor, tentativas=3, espera=1):\n        """\n        Seleciona o valor informado em um campo select identificado pelo locator, com retry automático em caso de StaleElementReferenceException e espera explícita para estar presente.\n        """\n        tentativa = 0\n        ultimo_erro = None\n        while tentativa < tentativas:\n            try:\n                WebDriverWait(self.driver, self.default_timeout).until(EC.presence_of_element_located(locator))\n                select = Select(self.driver.find_element(*locator))\n                select.select_by_visible_text(valor)\n                print(f"[INFO] Seleção do valor \'{valor}\' realizada com sucesso em {locator}.")\n                return\n            except StaleElementReferenceException as e:\n                print(f"[WARN] StaleElementReferenceException ao selecionar valor \'{valor}\' em {locator}: {e}. Tentando novamente ({tentativa+1}/{tentativas})...")\n                time.sleep(espera)\n                tentativa += 1\n                ultimo_erro = e\n            except (NoSuchElementException, ElementNotInteractableException) as e:\n                print(f"[ERRO] Falha ao selecionar valor \'{valor}\' em {locator}: {e}")\n                raise\n            except Exception as e:\n                print(f"[ERRO] Erro inesperado ao selecionar valor \'{valor}\' em {locator}: {e}")\n                raise\n        raise Exception(f"Não foi possível selecionar o valor \'{valor}\' em {locator} após {tentativas} tentativas devido a StaleElementReferenceException. Último erro: {ultimo_erro}")\n\n    def upload_arquivo(self, locator, caminho_arquivo, tentativas=3, espera=1):\n        """\n        Realiza upload de arquivo no campo identificado pelo locator, com retry automático em caso de StaleElementReferenceException e espera explícita para estar visível.\n        """\n        tentativa = 0\n        ultimo_erro = None\n        while tentativa < tentativas:\n            try:\n                WebDriverWait(self.driver, self.default_timeout).until(EC.visibility_of_element_located(locator))\n                self.driver.find_element(*locator).send_keys(caminho_arquivo)\n                print(f"[INFO] Upload do arquivo \'{caminho_arquivo}\' realizado com sucesso em {locator}.")\n                return\n            except StaleElementReferenceException as e:\n                print(f"[WARN] StaleElementReferenceException ao fazer upload do arquivo \'{caminho_arquivo}\' em {locator}: {e}. Tentando novamente ({tentativa+1}/{tentativas})...")\n                time.sleep(espera)\n                tentativa += 1\n                ultimo_erro = e\n            except (NoSuchElementException, ElementNotInteractableException) as e:\n                print(f"[ERRO] Falha ao fazer upload do arquivo \'{caminho_arquivo}\' em {locator}: {e}")\n                raise\n            except Exception as e:\n                print(f"[ERRO] Erro inesperado ao fazer upload do arquivo \'{caminho_arquivo}\' em {locator}: {e}")\n                raise\n        raise Exception(f"Não foi possível fazer upload do arquivo \'{caminho_arquivo}\' em {locator} após {tentativas} tentativas devido a StaleElementReferenceException. Último erro: {ultimo_erro}")\n\n    def esperar_elemento(self, locator, timeout=None):\n        """\n        Aguarda até que o elemento esteja presente na tela.\n        O timeout pode ser informado no método ou será usado o padrão da classe.\n        """\n        timeout = int(timeout) if timeout is not None else self.default_timeout\n        try:\n            WebDriverWait(self.driver, timeout).until(EC.presence_of_element_located(locator))\n            print(f"[INFO] Elemento {locator} apareceu na tela (timeout={timeout}s).")\n        except TimeoutException as e:\n            print(f"[ERRO] Timeout ao esperar elemento {locator}: {e}")\n            raise\n\n    def esperar_elemento_desaparecer(self, locator, timeout=None):\n        """\n        Aguarda até que o elemento desapareça da tela.\n        O timeout pode ser informado no método ou será usado o padrão da classe.\n        """\n        timeout = int(timeout) if timeout is not None else self.default_timeout\n        try:\n            WebDriverWait(self.driver, timeout).until(EC.invisibility_of_element_located(locator))\n            print(f"[INFO] Elemento {locator} desapareceu da tela (timeout={timeout}s).")\n        except TimeoutException as e:\n            print(f"[ERRO] Timeout ao esperar elemento {locator} desaparecer: {e}")\n            raise\n\n');o("".concat(h,"_pages.py"),v);var x=Object.entries(l).filter((function(e){var n=D(e,2),t=(n[0],n[1]);return a.has(t)})).map((function(e){var n=D(e,2),t=n[0],o=n[1];return"    ".concat(JSON.stringify(t),': "').concat(o,'"')})).join(",\n"),b="# ".concat(h,'_steps.py gerado automaticamente para a feature "').concat(e.name,'"\n# -*- coding: utf-8 -*-\n"""\nSteps do Behave para a feature "').concat(e.name,'".\nContém as definições dos passos (steps) utilizados nos testes automatizados.\nInclui tratamento de exceções e logs aprimorados.\n"""\n\nfrom behave import given, when, then\nimport logging\n\n# Mapeamento do texto do .feature para o nome do locator\nLOCATOR_MAP = {\n').concat(x,'\n}\n\n# Configuração do logger\nlogger = logging.getLogger(__name__)\nlogger.setLevel(logging.INFO)\nhandler = logging.FileHandler(\'gherkin_tests.log\')\nhandler.setFormatter(logging.Formatter(\'%(asctime)s - %(levelname)s - %(message)s\'))\nif not logger.handlers:\n    logger.addHandler(handler)\n\n@given(\'que o usuário acessa a página "{url}"\')\ndef step_acessa_url(context, url):\n    """\n    Passo dado para acessar uma URL.\n    """\n    try:\n        context.page.acessar_url(url)\n        logger.info(f"Acessou a URL: {url}")\n    except Exception as e:\n        logger.error(f"Erro ao acessar a URL {url}: {e}")\n        raise\n\n@when(\'o usuário clica no elemento {elemento}\')\ndef step_clica_elemento(context, elemento):\n    """\n    Passo quando para clicar em um elemento.\n    """\n    try:\n        locator_name = LOCATOR_MAP.get(elemento)\n        locator = getattr(context.page, locator_name, None)\n        if locator is None:\n            raise Exception(f"Locator para o elemento \'{elemento}\' não encontrado.")\n        # Se o elemento tem texto após o pipe, valida o texto após o clique\n        texto_esperado = elemento.split(\'|\')[1].strip() if \'|\' in elemento else None\n        context.page.clicar(locator)\n        if texto_esperado:\n            el = context.driver.find_element(*locator)\n            if texto_esperado not in el.text:\n                raise AssertionError(f"Texto \'{texto_esperado}\' não encontrado no elemento {elemento} após o clique.")\n        logger.info(f"Clicou no elemento: {elemento}")\n    except Exception as e:\n        logger.error(f"Erro ao clicar no elemento {elemento}: {e}")\n        raise\n\n@when(\'o usuário preenche o campo {campo} com "{valor}"\')\ndef step_preenche_campo(context, campo, valor):\n    """\n    Passo quando para preencher um campo com um valor.\n    """\n    try:\n        locator_name = LOCATOR_MAP.get(campo.lower().split(\'|\')[0].strip())\n        locator = getattr(context.page, locator_name, None)\n        if locator is None:\n            raise Exception(f"Locator para o campo \'{campo}\' não encontrado.")\n        # Se o campo tem texto após o pipe, valida o texto após preencher\n        texto_esperado = campo.split(\'|\')[1].strip() if \'|\' in campo else None\n        context.page.preencher(locator, valor)\n        if texto_esperado:\n            el = context.driver.find_element(*locator)\n            if texto_esperado not in el.text:\n                raise AssertionError(f"Texto \'{texto_esperado}\' não encontrado no campo {campo} após preencher.")\n        logger.info(f"Preencheu o campo {campo} com o valor: {valor}")\n    except Exception as e:\n        logger.error(f"Erro ao preencher o campo {campo} com o valor {valor}: {e}")\n        raise\n\n@when(\'valida que a URL da página é "{url}"\')\n@then(\'valida que a URL da página é "{url}"\')\ndef step_valida_url(context, url):\n    """\n    Passo então para validar a URL da página.\n    """\n    try:\n        url_atual = context.driver.current_url\n        if url_atual != url:\n            raise AssertionError(f"URL esperada: {url}, mas a URL atual é: {url_atual}")\n        logger.info(f"URL da página validada com sucesso: {url_atual}")\n    except Exception as e:\n        logger.error(f"Erro ao validar a URL da página: {e}")\n        raise\n\n# Outros passos (steps) podem ser adicionados aqui conforme necessário\n\n\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom behave import when\n\n# Step para validar existência de elemento com texto\n@then(\'o usuário valida que existe o elemento "{elemento}"\')\ndef step_valida_existencia_elemento(context, elemento):\n    locator_name = LOCATOR_MAP.get(elemento)\n    locator = getattr(context.page, locator_name, None)\n    if locator is None:\n        raise Exception(f"Locator para o elemento \'{elemento}\' não encontrado.")\n    texto_esperado = elemento.split(\'|\')[1].strip() if \'|\' in elemento else None\n    WebDriverWait(context.driver, context.default_timeout).until(\n        EC.presence_of_element_located(locator)\n    )\n    el = context.driver.find_element(*locator)\n    if texto_esperado and texto_esperado not in el.text:\n        raise AssertionError(f"Texto \'{texto_esperado}\' não encontrado no elemento {elemento}.")\n    logger.info(f"Elemento \'{elemento}\' validado com sucesso.")\n\n@when(\'preencho os campos da tabela:\')\ndef step_preencho_tabela(context):\n    for row in context.table:\n        campo = row[\'Campo\']\n        valor = row[\'Valor\']\n        locator_name = LOCATOR_MAP.get(campo.lower().split(\'|\')[0].strip())\n        locator = getattr(context.page, locator_name, None)\n        if locator is None:\n            raise Exception(f"Locator para o campo \'{campo}\' não encontrado.")\n        context.page.preencher(locator, valor)\n        logger.info(f"Preencheu o campo {campo} com o valor: {valor}")\n');o("".concat(h,"_steps.py"),b),o("environment.py",'# environment.py gerado automaticamente para a feature "'.concat(e.name,'"\n# -*- coding: utf-8 -*-\n"""\nConfigurações do Behave para a feature "').concat(e.name,'".\nInclui inicialização do WebDriver e do Page Object Model (POM).\n"""\n\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.chrome.service import Service\nimport os\nimport sys\n\n# Importa o Page Object gerado para esta feature\nfrom ').concat(h,"_pages import Page").concat(t(e.name),"\n\ndef before_all(context):\n    \"\"\"\n    Executado uma vez antes de todos os cenários.\n    Inicializa o WebDriver e o Page Object.\n    \"\"\"\n    chrome_options = Options()\n    chrome_options.add_argument('--start-maximized')\n    # Permite customizar o caminho do chromedriver via variável de ambiente\n    chromedriver_path = os.getenv('CHROMEDRIVER_PATH')\n    if chromedriver_path:\n        service = Service(chromedriver_path)\n        context.driver = webdriver.Chrome(service=service, options=chrome_options)\n    else:\n        context.driver = webdriver.Chrome(options=chrome_options)\n    context.driver.implicitly_wait(5)\n    context.default_timeout = int(os.getenv('SELENIUM_TIMEOUT', 10))  # Timeout padrão de 10 segundos, parametrizável por variável de ambiente\n    # Inicializa o Page Object Model\n    context.page = Page").concat(t(e.name),'(context.driver)\n    print("[INFO] WebDriver e Page Object inicializados com sucesso.")\n\ndef after_all(context):\n    """\n    Executado uma vez após todos os cenários.\n    Encerra o WebDriver.\n    """\n    # TODO: Ajustar o mapeamento dos locators se necessário.\n    if hasattr(context, \'driver\'):\n        context.driver.quit()\n        print("[INFO] WebDriver finalizado.")\n    print("[INFO] Testes finalizados.")\n\n# Outros hooks e configurações podem ser adicionados aqui conforme necessário\n')),o("requirements.txt",'# requirements.txt gerado automaticamente para a feature "'.concat(e.name,'"\n# -*- coding: utf-8 -*-\n"""\nDependências necessárias para executar os testes da feature "').concat(e.name,'".\nInstale as dependências com: pip install -r requirements.txt\n"""\n\nselenium\nbehave\n'))})),hideSpinner(),r("Exportação concluída!")):r("Selecione ao menos uma feature!","error")}else r("Nenhuma feature para exportar!","error")}))}window.gherkin={exportReadmeForFeatures:function(e){s((function(n){if(window.gherkinFeatures&&Array.isArray(window.gherkinFeatures)){var t=window.gherkinFeatures.filter((function(n,t){return e.includes(t)}));0!==t.length?(t.forEach((function(e,n){var t="# Feature: ".concat(e.name,"\n\n");t+="## Descrição do fluxo\n",t+="Esta feature cobre o(s) seguinte(s) cenário(s):\n\n",(e.cenarios||[]).forEach((function(e,n){t+="### Cenário: ".concat(e.name,"\n"),t+="**Fluxo resumido:**\n",(e.interactions||[]).forEach((function(e,n){var o=e.step||"",r=e.acaoTexto||e.acao||"",a=e.nomeElemento||"",i=e.valorPreenchido?' (valor: "'.concat(e.valorPreenchido,'")'):"",l="";"upload"===e.acao&&e.nomeArquivo&&(l=" (arquivo: ".concat(e.nomeArquivo,")")),t+="- ".concat(o," ").concat(r,' em "').concat(a,'"').concat(i).concat(l,"\n")})),t+="\n"})),t+="## Pré-requisitos\n",t+="- Navegador Google Chrome com extensão Selenium WebDriver instalada (ou ambiente Python/Selenium configurado)\n",t+="- Acesso ao ambiente de testes\n\n",t+="## Exemplo de execução (Python + Selenium)\n",t+="```python\n",t+="# Exemplo básico de inicialização do Selenium\n",t+="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n",t+="driver = webdriver.Chrome()\n",t+='driver.get("URL_DO_SISTEMA")\n',t+="# ...seguir os passos do cenário conforme descrito acima...\n",t+="```\n\n",t+="## Observações\n",t+="- Adapte os seletores e valores conforme necessário para o seu ambiente.\n",t+="- Prints das telas podem ser adicionados manualmente após a execução dos testes.\n",o("README_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".md"),t)})),r("README.md exportado(s) com sucesso!")):r("Selecione ao menos uma feature!","error")}else r("Nenhuma feature para exportar!","error")}))},exportSelectedFeatures:R,exportAll:function(){R(window.gherkinFeatures.map((function(e,n){return n})))}}})();