/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";function e(e){return e.toString().toLowerCase().normalize("NFD").replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u0898-\u089F\u08C9-\u08D2\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C3C\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u1714\u1715\u1734\u17C9-\u17D3\u17DD\u1939-\u193B\u1A60\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABE\u1AC1-\u1ACB\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1BE6\u1BF2\u1BF3\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA806\uA82C\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDD4E\uDD69-\uDD6D\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC46\uDC70\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3B\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74\uDFCE-\uDFD0\uDFD2\uDFD3\uDFE1\uDFE2]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97\uDF41\uDF42\uDF5A]|\uD80D[\uDC47-\uDC55]|\uD818\uDD2F|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDD6B\uDD6C\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDC30-\uDC6D\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDDEE\uDDEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,"").replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,"")}function n(e,n){var t;t=n instanceof Blob?n:new Blob([n],{type:"text/plain"});var o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=e.replace(/\//g,"_"),document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),URL.revokeObjectURL(o)}),100)}function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.createElement("div");t.textContent=e,t.style.position="fixed",t.style.bottom="20px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.padding="10px 20px",t.style.backgroundColor="success"===n?"#28a745":"#dc3545",t.style.color="#fff",t.style.borderRadius="5px",t.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",t.style.zIndex="10001",t.style.fontSize="14px",t.style.fontWeight="bold",t.style.transition="opacity 0.3s ease, transform 0.3s ease",t.style.opacity="1",t.style.animation="fadeInOut 3s ease",document.body.appendChild(t),setTimeout((function(){t.style.opacity="0",setTimeout((function(){return t.remove()}),300)}),3e3)}function o(e){return e&&e.nodeType===Node.ELEMENT_NODE?function(e){var n=e.tagName.toLowerCase();if(e.id)return n+="#".concat(e.id);if(e.className){var t=e.className.split(" ").filter((function(e){return""!==e.trim()})).map((function(e){return".".concat(e)})).join("");n+=t}return["name","type","aria-label","data-pc-name"].forEach((function(t){e.hasAttribute(t)&&(n+="[".concat(t,'="').concat(e.getAttribute(t),'"]'))})),n}(e):null}function r(){return"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id}var a={nomePadraoFeature:"Nova Feature",nomePadraoCenario:"Novo Cenário",templateStep:{Given:"Given que o usuário {acao}",When:"When o usuário {acao}",Then:"Then o usuário {acao}"},templateUpload:'When faz upload do arquivo "{arquivo}" no campo {elemento}',templateLogin:'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"',templateEspera:"When espera o elemento aparecer: {seletor}"};function i(e){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local?chrome.storage.local.get("bddConfig",(function(n){e(Object.assign({},a,n.bddConfig||{}))})):e(a)}function l(){var e,n,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function a(t,o,r,a){var l=o&&o.prototype instanceof s?o:s,d=Object.create(l.prototype);return c(d,"_invoke",function(t,o,r){var a,l,c,s=0,d=r||[],u=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,l=0,c=e,p.n=t,i}};function m(t,o){for(l=t,c=o,n=0;!u&&s&&!r&&n<d.length;n++){var r,a=d[n],m=p.p,g=a[2];t>3?(r=g===o)&&(l=a[4]||3,c=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=m&&((r=t<2&&m<a[1])?(l=0,p.v=o,p.n=a[1]):m<g&&(r=t<3||a[0]>o||o>g)&&(a[4]=t,a[5]=o,p.n=g,l=0))}if(r||t>1)return i;throw u=!0,o}return function(r,d,g){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&m(d,g),l=d,c=g;(n=l<2?e:c)||!u;){a||(l?l<3?(l>1&&(p.n=-1),m(l,c)):p.n=c:p.v=c);try{if(s=2,a){if(l||(r="next"),n=a[r]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,l<2&&(l=0)}else 1===l&&(n=a.return)&&n.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),l=1);a=e}else if((n=(u=p.n<0)?c:t.call(o,p))!==i)break}catch(n){a=e,l=1,c=n}finally{s=1}}return{value:n,done:u}}}(t,r,a),!0),d}var i={};function s(){}function d(){}function u(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(c(n={},o,(function(){return this})),n),m=u.prototype=s.prototype=Object.create(p);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,c(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=u,c(m,"constructor",u),c(u,"constructor",d),d.displayName="GeneratorFunction",c(u,r,"GeneratorFunction"),c(m),c(m,r,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),(l=function(){return{w:a,m:g}})()}function c(e,n,t,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}c=function(e,n,t,o){if(n)r?r(e,n,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[n]=t;else{var a=function(n,t){c(e,n,(function(e){return this._invoke(n,t,e)}))};a("next",0),a("throw",1),a("return",2)}},c(e,n,t,o)}function s(e,n,t,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void t(e)}l.done?n(c):Promise.resolve(c).then(o,r)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var a=e.apply(n,t);function i(e){s(a,o,r,i,l,"next",e)}function l(e){s(a,o,r,i,l,"throw",e)}i(void 0)}))}}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,r,a,i,l=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=a.call(t)).done)&&(l.push(o.value),l.length!==n);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return p(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function m(e){var n="";n+='\n        <div class="gherkin-panel-header" style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; min-height: 40px;">\n            <h3 style="margin: 0; font-size: 15px; color: #007bff; font-weight: bold; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);">GERADOR DE TESTES AUTOMATIZADOS</h3>\n            <div class="button-container-top" style="display: flex; gap: 6px; align-items: center;">\n                <button id="gherkin-reopen" title="Reabrir" style="display: none; background-color: transparent; border: none; cursor: pointer; font-size: 14px; font-weight: bold; color: #28a745;">Abrir</button>\n                <button id="gherkin-minimize" title="Minimizar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#ffc107" viewBox="0 0 24 24"><path d="M19 13H5v-2h14v2z"/></svg>\n                </button>\n                <button id="gherkin-close" title="Fechar" style="background-color: transparent; border: none; cursor: pointer;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#dc3545" viewBox="0 0 24 24"><path d="M18.3 5.71L12 12l6.3 6.29-1.42 1.42L12 13.41l-6.29 6.3-1.42-1.42L10.59 12 4.29 5.71 5.71 4.29 12 10.59l6.29-6.3z"/></svg>\n                </button>\n            </div>\n        </div>\n    ',"feature"===window.gherkinPanelState?n+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="feature-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome da Feature:</label>\n                <input id="feature-name" type="text" placeholder="Ex: Login" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-feature" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Feature</button>\n            </div>\n        ':"cenario"===window.gherkinPanelState?n+='\n            <div class="gherkin-content" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80%;">\n                <label for="cenario-name" style="font-size: 16px; margin-bottom: 10px;">Informe o nome do Cenário:</label>\n                <input id="cenario-name" type="text" placeholder="Ex: Login com sucesso" style="width: 90%; padding: 8px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 15px; font-size: 15px;" />\n                <button id="start-cenario" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 15px;">Iniciar Cenário</button>\n            </div>\n        ':"gravando"===window.gherkinPanelState?n+='\n            <div class="gherkin-content">\n                <p id="gherkin-status" style="font-size: 14px; margin: 5px 0; color: #555;">Status: Gravando</p>\n                <p style="font-size: 14px; color: #0D47A1; font-weight: bold;">Feature: '.concat(window.currentFeature?window.currentFeature.name:"",'</p>\n                <p style="font-size: 14px; color: #007bff; font-weight: bold;">Cenário: ').concat(window.currentCenario?window.currentCenario.name:"",'</p>\n                <div id="recording-indicator" style="display: none; margin: 10px auto; width: 10px; height: 10px; background-color: #ff0000; border-radius: 50%; animation: pulse 1s infinite;"></div>\n                <p id="gherkin-timer" style="font-size: 14px; margin: 5px 0; color: #555;">Tempo de execução: 00:00</p>\n                <label for="gherkin-action-select" style="font-size: 13px; margin-top: 8px;">Ação:</label>\n                <select id="gherkin-action-select" style="width: 100%; padding: 7px; border-radius: 5px; border: 1px solid #ccc; margin-bottom: 10px; font-size: 14px;">\n                    <optgroup label="Ações">\n                        <option value="clica">Clicar</option>\n                        <option value="altera">Alterar</option>\n                        <option value="preenche">Preencher</option>\n                        <option value="seleciona">Selecionar</option>\n                        <option value="radio">Botão de rádio</option>\n                        <option value="caixa">Caixa de seleção</option>\n                        <option value="navega">Navegar</option>\n                        <option value="login">Login</option>\n                        <option value="upload">Upload de arquivo</option>\n                    </optgroup>\n                    <optgroup label="Validações">\n                        <option value="valida_existe">Validar que existe</option>\n                        <option value="valida_nao_existe">Validar que não existe</option>\n                        <option value="valida_contem">Validar que contém</option>\n                        <option value="valida_nao_contem">Validar que não contém</option>\n                        <option value="valida_deve_ser">Validar que deve ser</option>\n                        <option value="valida_nao_deve_ser">Validar que não deve ser</option>\n                    </optgroup>\n                    <optgroup label="Esperas">\n                        <option value="espera_segundos">Esperar segundos</option>\n                        <option value="espera_elemento">Esperar elemento aparecer</option>\n                        <option value="espera_nao_existe">Esperar elemento desaparecer</option>\n                        <option value="espera_existe">Esperar que o elemento exista</option>\n                        <option value="espera_habilitado">Esperar que o elemento esteja habilitado</option>\n                        <option value="espera_desabilitado">Esperar que o elemento esteja desabilitado</option>\n                    </optgroup>\n                </select>\n                <div id="gherkin-action-params"></div>\n                <div id="gherkin-log" style="overflow-y: auto; height: 350px; margin-top: 10px; border: 1px solid #ccc; padding: 5px; font-size: 13px; background-color: #f9f9f9;"></div>\n                <div style="display: flex; flex-wrap: nowrap; gap: 4px; margin-top: 10px; justify-content: center; align-items: center; width: 100%;">\n                    <button id="end-cenario" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;">Encerrar Cenário</button>\n                    <button id="end-feature" style="background-color: #6c757d; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; display: flex; align-items: center; justify-content: center;" disabled>Encerrar Feature</button>\n                    <button id="gherkin-pause" style="background-color: #ffc107; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Pausar</button>\n                    <button id="gherkin-clear" style="background-color: #dc3545; color: white; border: none; border-radius: 4px; padding: 0; width: 60px; height: 32px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center;">Limpar</button>\n                </div>\n            </div>\n        '):"exportar"===window.gherkinPanelState&&(n+='<div class="gherkin-content" style="padding: 10px;">\n            <h4 style="color: #0D47A1;">Selecione as features para exportar:</h4>\n            <form id="export-form" style="max-height: 250px; overflow-y: auto; margin-bottom: 15px;">',window.gherkinFeatures.forEach((function(e,t){n+="<div style='margin-bottom: 8px;'><input type='checkbox' id='feature-export-".concat(t,"' name='feature-export' value='").concat(t,"'><label for='feature-export-").concat(t,"' style='margin-left: 8px;'>").concat(e.name,"</label></div>")})),n+='</form>\n            <button id="export-selected" style="background-color: #007bff; color: white; border: none; border-radius: 5px; padding: 10px 20px;">Exportar Selecionadas</button>\n            <button id="new-feature" style="background-color: #28a745; color: white; border: none; border-radius: 5px; padding: 10px 20px; margin-left: 10px;">Nova Feature</button>\n        </div>'),n+='<p id="gherkin-footer" style="position: absolute; bottom: 0px; right: 10px; font-size: 10px; margin: 0; color: #555;">By: Matheus Ferreira de Oliveira</p>',e.innerHTML=n}function g(e){var n=e.querySelector("#gherkin-action-select"),o=e.querySelector("#gherkin-action-params");if(n&&o){o.innerHTML="";var r={clica:"Clique no elemento que deseja registrar o clique.",altera:"Clique no elemento que deseja alterar.",preenche:"Clique em um campo de texto e preencha. O valor será registrado automaticamente.",seleciona:"Clique no campo de seleção desejado.",radio:"Clique no botão de rádio desejado.",caixa:"Clique na caixa de seleção desejada.",navega:"Navegue para a página desejada.",login:"Preencha os campos de usuário/email e senha na página. Clique no botão abaixo para marcar como login.",upload:"Clique em um campo de upload na página ou informe o nome do arquivo de exemplo.",valida_existe:"Clique no elemento que deseja validar que existe.",valida_nao_existe:"Clique no elemento que deseja validar que não existe.",valida_contem:"Clique no elemento que deseja validar o conteúdo.",valida_nao_contem:"Clique no elemento que deseja validar que não contém determinado conteúdo.",valida_deve_ser:"Clique no elemento que deseja validar o valor.",valida_nao_deve_ser:"Clique no elemento que deseja validar que não deve ser determinado valor.",espera_segundos:"Informe o tempo de espera em segundos.",espera_elemento:"Clique no elemento que deseja aguardar aparecer.",espera_nao_existe:"Clique no elemento que deseja aguardar desaparecer.",espera_existe:"Clique no elemento que deseja aguardar que exista.",espera_habilitado:"Clique no elemento que deseja aguardar que esteja habilitado.",espera_desabilitado:"Clique no elemento que deseja aguardar que esteja desabilitado."}[n.value]||"";if(r){var a=document.createElement("div");a.textContent=r,a.style.background="#e3f2fd",a.style.color="#1565c0",a.style.padding="7px 10px",a.style.borderRadius="5px",a.style.fontSize="13px",a.style.marginBottom="8px",o.appendChild(a)}if("espera_segundos"===n.value){var i=document.createElement("label");i.textContent="Tempo de espera (segundos):",i.style.fontWeight="bold",i.style.marginBottom="4px",i.setAttribute("for","gherkin-wait-seconds"),o.appendChild(i);var l=document.createElement("input");l.type="number",l.id="gherkin-wait-seconds",l.min="1",l.value="1",l.style.width="100%",l.style.padding="7px",l.style.borderRadius="5px",l.style.border="1px solid #ccc",l.style.fontSize="14px",l.style.marginBottom="8px",o.appendChild(l)}else if("preenche"===n.value){var c=document.createElement("div");c.textContent="Clique em um campo de texto na página e preencha. O valor será registrado automaticamente.",c.style.background="#fffde7",c.style.color="#bfa100",c.style.padding="7px 10px",c.style.borderRadius="5px",c.style.fontSize="13px",c.style.marginBottom="8px",o.appendChild(c)}else if("login"===n.value){var s=document.createElement("div");s.textContent="Preencha os campos de usuário/email e senha na página. Clique no botão abaixo para marcar como login.",s.style.background="#e3f2fd",s.style.color="#1565c0",s.style.padding="7px 10px",s.style.borderRadius="5px",s.style.fontSize="13px",s.style.marginBottom="8px",o.appendChild(s);var d=document.createElement("button");d.textContent="Marcar ação como login",d.style.background="#007bff",d.style.color="#fff",d.style.border="none",d.style.borderRadius="6px",d.style.padding="8px 22px",d.style.fontSize="15px",d.style.fontWeight="bold",d.style.cursor="pointer",d.onclick=function(){!function(){var e=document.getElementById("gherkin-modal");e&&e.remove();var n=document.createElement("div");n.id="gherkin-modal",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100vw",n.style.height="100vh",n.style.background="rgba(0,0,0,0.25)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="260px";var r=document.createElement("div");r.textContent="Marcar ação como Login",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a=document.createElement("label");a.textContent="Usuário/Email:",a.style.fontWeight="bold",a.style.marginBottom="4px",o.appendChild(a);var i=document.createElement("input");i.type="text",i.style.width="100%",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.fontSize="14px",o.appendChild(i);var l=document.createElement("label");l.textContent="Senha:",l.style.fontWeight="bold",l.style.marginBottom="4px",o.appendChild(l);var c=document.createElement("input");c.type="password",c.style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px",o.appendChild(c);var s=document.createElement("div");s.style.display="flex",s.style.gap="18px",s.style.marginTop="12px";var d=document.createElement("button");d.textContent="Salvar Login",d.style.background="#007bff",d.style.color="#fff",d.style.border="none",d.style.borderRadius="6px",d.style.padding="8px 22px",d.style.fontSize="15px",d.style.fontWeight="bold",d.style.cursor="pointer",d.onclick=function(){var e=i.value.trim(),o=c.value;e&&o?(window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:e,valorPreenchido:o,timestamp:Date.now()}),saveInteractionsToStorage(),v(),n.remove(),t("Ação de login registrada!","success")):t("Preencha usuário e senha!","error")};var u=document.createElement("button");u.textContent="Cancelar",u.style.background="#dc3545",u.style.color="#fff",u.style.border="none",u.style.borderRadius="6px",u.style.padding="8px 22px",u.style.fontSize="15px",u.style.fontWeight="bold",u.style.cursor="pointer",u.onclick=function(){return n.remove()},s.appendChild(d),s.appendChild(u),o.appendChild(s),n.appendChild(o),document.body.appendChild(n)}()},o.appendChild(d)}else if(n.value.startsWith("valida_")){var u=document.createElement("div");u.textContent="Clique no elemento que deseja validar na página.",u.style.background="#e8f5e9",u.style.color="#388e3c",u.style.padding="7px 10px",u.style.borderRadius="5px",u.style.fontSize="13px",u.style.marginBottom="8px",o.appendChild(u)}else if(n.value.startsWith("espera_")&&"espera_segundos"!==n.value){var p=document.createElement("div");"espera_elemento"===n.value?p.textContent="Clique no elemento que deseja aguardar aparecer na página.":"espera_nao_existe"===n.value?p.textContent="Clique no elemento que deseja aguardar desaparecer da página.":p.textContent="Clique no elemento que deseja aguardar na página.",p.style.background="#fff3e0",p.style.color="#e65100",p.style.padding="7px 10px",p.style.borderRadius="5px",p.style.fontSize="13px",p.style.marginBottom="8px",o.appendChild(p)}}}function f(e){var n,t,o=!1,r=e.querySelector(".gherkin-panel-header");function a(r){r.target.closest(".button-container-top")||0===r.button&&(o=!0,n=r.clientX-e.getBoundingClientRect().left,t=r.clientY-e.getBoundingClientRect().top,e.style.cursor="move",document.body.style.userSelect="none")}function i(r){o&&(e.style.left="".concat(r.clientX-n,"px"),e.style.top="".concat(r.clientY-t,"px"),e.style.right="auto",e.style.bottom="auto")}function l(){o&&(o=!1,e.style.cursor="default",document.body.style.userSelect="")}r||(r=e.querySelector('div[style*="display: flex"][style*="justify-content: space-between"]')||e),r.removeEventListener("mousedown",a),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l),r.addEventListener("mousedown",a),document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function h(e,n,t){var o=document.getElementById("gherkin-modal");o&&o.remove();var r=document.createElement("div");r.id="gherkin-modal",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.background="rgba(0,0,0,0.25)",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.zIndex="10001";var a=document.createElement("div");a.style.background="#fff",a.style.padding="28px 32px 22px 32px",a.style.borderRadius="12px",a.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",a.style.display="flex",a.style.flexDirection="column",a.style.alignItems="center",a.style.gap="18px",a.style.minWidth="260px";var i=document.createElement("div");i.textContent=e,i.style.fontSize="17px",i.style.color="#0D47A1",i.style.textAlign="center",a.appendChild(i);var l=document.createElement("div");l.style.display="flex",l.style.gap="18px";var c=document.createElement("button");c.textContent="Sim",c.style.background="#007bff",c.style.color="#fff",c.style.border="none",c.style.background="#007bff",c.style.color="#fff",c.style.border="none",c.style.borderRadius="6px",c.style.padding="8px 22px",c.style.fontSize="15px",c.style.fontWeight="bold",c.style.cursor="pointer",c.onclick=function(){r.remove(),n&&n()};var s=document.createElement("button");s.textContent="Não",s.style.background="#dc3545",s.style.color="#fff",s.style.border="none",s.style.borderRadius="6px",s.style.padding="8px 22px",s.style.fontSize="15px",s.style.fontWeight="bold",s.style.cursor="pointer",s.onclick=function(){r.remove(),t&&t()},l.appendChild(c),l.appendChild(s),a.appendChild(l),r.appendChild(a),document.body.appendChild(r)}var x={clica:{icon:"🖱️",color:"#007bff",label:"Clicar"},preenche:{icon:"⌨️",color:"#28a745",label:"Preencher"},seleciona:{icon:"☑️",color:"#17a2b8",label:"Selecionar"},upload:{icon:"📎",color:"#f39c12",label:"Upload"},login:{icon:"🔑",color:"#8e44ad",label:"Login"},espera_segundos:{icon:"⏲️",color:"#ffc107",label:"Esperar"},espera_elemento:{icon:"⏳",color:"#0070f3",label:"Esperar elemento"},espera_nao_existe:{icon:"🚫",color:"#e74c3c",label:"Esperar sumir"},acessa_url:{icon:"🌐",color:"#0070f3",label:"Acessar URL"},altera:{icon:"✏️",color:"#6c757d",label:"Alterar"},radio:{icon:"🔘",color:"#6c757d",label:"Radio"},caixa:{icon:"☑️",color:"#6c757d",label:"Caixa"},valida_existe:{icon:"✅",color:"#218838",label:"Validar existe"},valida_nao_existe:{icon:"❌",color:"#e74c3c",label:"Validar não existe"},valida_contem:{icon:"🔍",color:"#007bff",label:"Validar contém"},valida_nao_contem:{icon:"🚫",color:"#e74c3c",label:"Validar não contém"},valida_deve_ser:{icon:"✔️",color:"#218838",label:"Validar deve ser"},valida_nao_deve_ser:{icon:"❌",color:"#e74c3c",label:"Validar não deve ser"}};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv",n=window.interactions||[];if(n.length){var o="";"csv"===e?(o="Gherkin,Ação,Elemento,Valor,Timestamp,Selector,XPath\n"+n.map((function(e){var n;return[e.step,(null===(n=x[e.acao])||void 0===n?void 0:n.label)||e.acao,'"'.concat(e.nomeElemento||"",'"'),'"'.concat(e.valorPreenchido||e.nomeArquivo||"",'"'),e.timestamp||"",'"'.concat(e.cssSelector||"",'"'),'"'.concat(e.xpath||"",'"')].join(",")})).join("\n"),downloadFile("gherkin_log.csv",o)):"json"===e?(o=JSON.stringify(n,null,2),downloadFile("gherkin_log.json",o)):"md"===e&&(o="| Gherkin | Ação | Elemento | Valor | Timestamp |\n|---|---|---|---|---|\n"+n.map((function(e){var n;return"| ".concat(e.step," | ").concat((null===(n=x[e.acao])||void 0===n?void 0:n.label)||e.acao," | ").concat(e.nomeElemento||""," | ").concat(e.valorPreenchido||e.nomeArquivo||""," | ").concat(e.timestamp||""," |")})).join("\n"),downloadFile("gherkin_log.md",o)),t("Log exportado com sucesso!")}else t("Nenhum log para exportar!","error")}function v(){var e=document.getElementById("gherkin-log");if(e){e.innerHTML="",e.style.display="flex",e.style.flexDirection="column",e.style.height="350px",e.style.maxHeight="350px",e.style.minHeight="220px",e.style.background="#f9f9f9",e.style.padding="0",e.style.margin="0",e.style.overflowY="auto",e.style.overflowX="hidden";var n=document.createElement("div");n.style.display="flex",n.style.flexWrap="wrap",n.style.gap="8px",n.style.margin="8px 8px 8px 8px",n.style.alignItems="center";var t=document.createElement("input");t.type="search",t.placeholder="Buscar por elemento, ação ou Gherkin...",t.setAttribute("aria-label","Buscar logs"),t.style.flex="2",t.style.minWidth="120px",t.style.padding="6px 10px",t.style.borderRadius="5px",t.style.border="1px solid #ccc",t.style.fontSize="13px";var o=document.createElement("select");o.style.flex="1",o.style.minWidth="100px",o.style.padding="6px 10px",o.style.borderRadius="5px",o.style.border="1px solid #ccc",o.style.fontSize="13px",o.innerHTML='<option value="">Todas as ações</option>'+Object.entries(x).map((function(e){var n=u(e,2),t=n[0],o=n[1];return'<option value="'.concat(t,'">').concat(o.label,"</option>")})).join("");var r=document.createElement("button");r.textContent="Exportar",r.title="Exportar log",r.style.background="#007bff",r.style.color="#fff",r.style.border="none",r.style.borderRadius="5px",r.style.padding="6px 14px",r.style.fontSize="13px",r.style.cursor="pointer",r.style.marginLeft="auto",r.onclick=function(e){e.stopPropagation();var n=document.createElement("div");n.style.position="absolute",n.style.background="#fff",n.style.border="1px solid #ccc",n.style.borderRadius="5px",n.style.boxShadow="0 2px 8px rgba(0,0,0,0.12)",n.style.zIndex="10010",n.style.top="".concat(r.offsetTop+r.offsetHeight,"px"),n.style.left="".concat(r.offsetLeft,"px"),n.style.minWidth="120px",n.innerHTML='\n            <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">CSV</button>\n            <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">Markdown</button>\n            <button style="width:100%;border:none;background:none;padding:8px;cursor:pointer;text-align:left;" tabindex="0">JSON</button>\n        ',n.children[0].onclick=function(){y("csv"),n.remove()},n.children[1].onclick=function(){y("md"),n.remove()},n.children[2].onclick=function(){y("json"),n.remove()},document.body.appendChild(n),setTimeout((function(){document.addEventListener("click",(function e(t){n.contains(t.target)||(n.remove(),document.removeEventListener("click",e))}))}),0)},n.appendChild(t),n.appendChild(o),n.appendChild(r),e.appendChild(n);var a=document.createElement("div");a.style.flex="1 1 0%",a.style.display="flex",a.style.flexDirection="column",a.style.overflowX="auto",a.style.overflowY="auto",a.style.width="100%",a.style.minHeight="0",a.style.background="#fff",a.tabIndex=0;var i=document.createElement("table");i.className="gherkin-log-table",i.style.width="100%",i.style.minWidth="700px",i.style.borderCollapse="collapse",i.style.fontSize="13px",i.style.background="#fff";var l=document.createElement("thead");l.innerHTML='\n        <tr>\n            <th style="min-width:60px;">Gherkin</th>\n            <th style="min-width:80px;">Ação</th>\n            <th style="min-width:120px;">Elemento</th>\n            <th style="min-width:40px;">Detalhes</th>\n            <th style="min-width:40px;">Ações</th>\n        </tr>\n    ',i.appendChild(l);var c=document.createElement("tbody");if(i.appendChild(c),t.oninput=d,o.onchange=d,d(),a.appendChild(i),e.appendChild(n),e.appendChild(a),setTimeout((function(){e.scrollTop=e.scrollHeight}),0),!document.getElementById("gherkin-log-table-style")){var s=document.createElement("style");s.id="gherkin-log-table-style",s.innerHTML="\n/* Container principal do painel de log */\n#gherkin-log {\n    display: flex !important;\n    flex-direction: column !important;\n    height: 100% !important;\n    min-height: 220px;\n    background: #f9f9f9;\n    padding: 0;\n    margin: 0;\n}\n#gherkin-log > div {\n    flex: 1 1 0%;\n    display: flex;\n    flex-direction: column;\n    overflow-x: auto;\n    overflow-y: auto;\n    min-height: 0;\n    background: #fff;\n    /* Barra de rolagem sempre visível */\n    scrollbar-width: thin;\n    scrollbar-color: #007bff #f9f9f9;\n}\n#gherkin-log > div::-webkit-scrollbar {\n    height: 12px;\n    background: #f9f9f9;\n}\n#gherkin-log > div::-webkit-scrollbar-thumb {\n    background: #007bff;\n    border-radius: 6px;\n    min-width: 40px;\n}\n#gherkin-log > div::-webkit-scrollbar-thumb:hover {\n    background: #005bb5;\n}\n#gherkin-log > div::-webkit-scrollbar-corner {\n    background: #f9f9f9;\n}\n.gherkin-log-table th, .gherkin-log-table td {\n    padding: 6px 8px;\n    border-bottom: 1px solid #e0e6ed;\n    text-align: left;\n    background: #fff;\n    white-space: nowrap;\n    max-width: 340px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n.gherkin-log-table th {\n    background: #f7faff;\n    position: sticky;\n    top: 0;\n    z-index: 1;\n}\n.gherkin-log-table tr:focus {\n    outline: 2px solid #1976d2;\n    outline-offset: 1px;\n}\n.gherkin-log-table {\n    width: 100%;\n    min-width: 700px;\n    background: #fff;\n}\n@media (max-width: 900px) {\n    .gherkin-log-table th, .gherkin-log-table td { font-size: 12px; }\n    .gherkin-log-table { min-width: 520px; }\n}\n@media (max-width: 700px) {\n    .gherkin-log-table th, .gherkin-log-table td { font-size: 11px; }\n    .gherkin-log-table { min-width: 400px; }\n}\n",document.head.appendChild(s)}setTimeout((function(){var e=document.getElementById("gherkin-clear");e&&(e.disabled=!1,e.style.opacity="",e.onclick=function(){h("Deseja realmente limpar todas as interações deste cenário?",(function(){window.interactions&&(window.interactions.length=0),"function"==typeof saveInteractionsToStorage&&saveInteractionsToStorage(),v()}))});var n=document.getElementById("gherkin-pause");n&&(n.disabled=!1,n.style.opacity="",n.onclick=function(){if(window.isPaused=!window.isPaused,window.isPaused){n.textContent="Continuar",n.style.backgroundColor="#28a745";var e=document.getElementById("gherkin-status");e&&(e.textContent="Status: Pausado"),"function"==typeof stopTimer&&stopTimer()}else{n.textContent="Pausar",n.style.backgroundColor="#ffc107";var t=document.getElementById("gherkin-status");t&&(t.textContent="Status: Gravando"),"function"==typeof startTimer&&startTimer()}})}),0)}function d(){c.innerHTML="";var e=t.value.trim().toLowerCase(),n=o.value,r=(window.interactions||[]).filter((function(t){var o=!0;return e&&(o=(t.nomeElemento||"").toLowerCase().includes(e)||(t.acaoTexto||t.acao||"").toLowerCase().includes(e)||(t.step||"").toLowerCase().includes(e)),n&&(o=o&&t.acao===n),o}));if(!r.length){var a=document.createElement("tr"),i=document.createElement("td");return i.colSpan=5,i.textContent="Nenhuma interação encontrada.",i.style.textAlign="center",a.appendChild(i),void c.appendChild(a)}r.forEach((function(e,n){var t=document.createElement("tr");t.tabIndex=0,t.setAttribute("role","button"),t.setAttribute("aria-label","Ver detalhes da interação ".concat(n+1)),t.style.cursor="pointer",t.style.transition="background 0.15s",t.onmouseenter=function(){return t.style.background="#f7faff"},t.onmouseleave=function(){return t.style.background=""},t.onfocus=function(){return t.style.background="#e3f2fd"},t.onblur=function(){return t.style.background=""};var o=document.createElement("td");o.textContent=e.step||"",o.style.fontWeight="bold",o.style.color="#0070f3",o.style.textAlign="center",t.appendChild(o);var r=document.createElement("td"),a=x[e.acao]||{};r.innerHTML='<span style="font-size:1.2em;margin-right:4px;color:'.concat(a.color||"#222",'">').concat(a.icon||"","</span>").concat(a.label||e.acao),t.appendChild(r);var i=document.createElement("td");i.textContent=e.nomeElemento||"",i.style.fontFamily="inherit",t.appendChild(i);var l=document.createElement("td"),s=document.createElement("button");s.innerHTML='<span aria-hidden="true">🔎</span>',s.title="Ver detalhes",s.style.background="none",s.style.border="none",s.style.cursor="pointer",s.style.fontSize="1.1em",s.setAttribute("aria-label","Ver detalhes"),s.onclick=function(n){n.stopPropagation(),b(e)},l.appendChild(s),t.appendChild(l);var d=document.createElement("td");d.style.textAlign="center",d.appendChild(function(e,n){var t=document.createElement("div");t.style.position="relative",t.style.display="inline-block";var o=document.createElement("button");o.innerHTML='<span aria-hidden="true">⋮</span>',o.title="Ações",o.style.background="none",o.style.border="none",o.style.cursor="pointer",o.style.fontSize="1.2em",o.setAttribute("aria-label","Ações rápidas"),t.appendChild(o);var r=document.createElement("div");r.className="gherkin-action-dropdown",r.style.display="none",r.style.position="absolute",r.style.background="#fff",r.style.border="1px solid #ccc",r.style.borderRadius="6px",r.style.boxShadow="0 8px 32px rgba(0,112,243,0.13), 0 1.5px 6px rgba(0,0,0,0.07)",r.style.zIndex="2147483647",r.style.minWidth="170px",r.style.maxWidth="90vw",r.style.maxHeight="320px",r.style.overflowY="auto",r.style.padding="8px 0";var a=document.createElement("button");a.textContent="Editar",a.onclick=function(e){e.stopPropagation(),r.style.display="none",function(e){var n=window.interactions[e];if(n){var t=document.getElementById("gherkin-modal");t&&t.remove();var o=document.createElement("div");o.id="gherkin-modal",o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.background="rgba(0,0,0,0.25)",o.style.display="flex",o.style.alignItems="center",o.style.justifyContent="center",o.style.zIndex="10003";var r=document.createElement("div");r.style.background="#fff",r.style.padding="28px 32px 22px 32px",r.style.borderRadius="12px",r.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="18px",r.style.minWidth="260px";var a=document.createElement("div");a.textContent="Editar interação",a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="center",r.appendChild(a);var i=document.createElement("label");i.textContent="Passo BDD:",i.style.fontWeight="bold",i.style.marginBottom="4px",r.appendChild(i);var l=document.createElement("select");l.style.width="100%",l.style.padding="7px",l.style.borderRadius="5px",l.style.border="1px solid #ccc",l.style.fontSize="14px",["Given","When","Then"].forEach((function(e){var t=document.createElement("option");t.value=e,t.textContent=e,n.step===e&&(t.selected=!0),l.appendChild(t)})),r.appendChild(l);var c,s=document.createElement("label");if(s.textContent="Ação:",s.style.fontWeight="bold",s.style.marginBottom="4px",r.appendChild(s),"acessa_url"===n.acao)(c=document.createElement("input")).type="text",c.value="acessa_url",c.disabled=!0,c.style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px",c.style.background="#f5f5f5";else{(c=document.createElement("select")).style.width="100%",c.style.padding="7px",c.style.borderRadius="5px",c.style.border="1px solid #ccc",c.style.fontSize="14px";var d=document.getElementById("gherkin-action-select");d&&d.innerHTML.trim()?c.innerHTML=d.innerHTML:c.innerHTML='<option value="clica">Clicar</option>',c.value=n.acao}r.appendChild(c);var u=document.createElement("label");u.textContent="Nome do elemento:",u.style.fontWeight="bold",u.style.marginBottom="4px",r.appendChild(u);var p=document.createElement("input");p.type="text",p.value=n.nomeElemento,p.style.width="100%",p.style.padding="7px",p.style.borderRadius="5px",p.style.border="1px solid #ccc",p.style.fontSize="14px",r.appendChild(p);var m=null;if("upload"===n.acao){var g=document.createElement("label");g.textContent="Nome do arquivo de exemplo:",g.style.fontWeight="bold",g.style.marginBottom="4px",r.appendChild(g),(m=document.createElement("input")).type="text",m.value=n.nomeArquivo||"",m.style.width="100%",m.style.padding="7px",m.style.borderRadius="5px",m.style.border="1px solid #ccc",m.style.fontSize="14px",r.appendChild(m)}var f=document.createElement("div");f.style.display="flex",f.style.gap="18px",f.style.marginTop="12px";var h=document.createElement("button");h.textContent="Salvar",h.style.background="#007bff",h.style.color="#fff",h.style.border="none",h.style.borderRadius="6px",h.style.padding="8px 22px",h.style.fontSize="15px",h.style.fontWeight="bold",h.style.cursor="pointer",h.onclick=function(){if(n.step=l.value,"acessa_url"===n.acao)n.acao="acessa_url",n.acaoTexto="Acessa";else{n.acao=c.value;var e=c.options?c.options[c.selectedIndex]:null;n.acaoTexto=e?e.text:c.value}n.nomeElemento=p.value.trim()||n.nomeElemento,"upload"===n.acao&&m&&(n.nomeArquivo=m.value.trim()||n.nomeArquivo),saveInteractionsToStorage(),v(),o.remove()};var x=document.createElement("button");x.textContent="Cancelar",x.style.background="#dc3545",x.style.color="#fff",x.style.border="none",x.style.borderRadius="6px",x.style.padding="8px 22px",x.style.fontSize="15px",x.style.fontWeight="bold",x.style.cursor="pointer",x.onclick=function(){return o.remove()},f.appendChild(h),f.appendChild(x),r.appendChild(f),o.appendChild(r),document.body.appendChild(o)}}(n)},r.appendChild(a);var i=document.createElement("button");i.textContent="Ver XPath",i.onclick=function(n){n.stopPropagation(),r.style.display="none",function(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="260px";var r=document.createElement("div");r.textContent="XPath do elemento",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a=document.createElement("textarea");a.value=e||"",a.readOnly=!0,a.style.width="100%",a.style.height="60px",a.style.fontSize="13px",a.style.padding="7px",a.style.borderRadius="5px",a.style.border="1px solid #ccc",a.style.marginTop="8px",o.appendChild(a);var i=document.createElement("button");i.textContent="Fechar",i.style.background="#007bff",i.style.color="#fff",i.style.border="none",i.style.borderRadius="6px",i.style.padding="8px 22px",i.style.fontSize="15px",i.style.fontWeight="bold",i.style.cursor="pointer",i.onclick=function(){return t.remove()},o.appendChild(i),t.appendChild(o),document.body.appendChild(t)}(e.xpath)},r.appendChild(i);var l=document.createElement("button");if(l.textContent="Excluir",l.style.color="#dc3545",l.onclick=function(e){e.stopPropagation(),r.style.display="none",h("Tem certeza que deseja excluir esta ação?",(function(){window.interactions.splice(n,1),"function"==typeof saveInteractionsToStorage&&saveInteractionsToStorage(),v()}))},r.appendChild(l),["login","espera_elemento","espera_nao_existe","upload"].includes(e.acao)){var c=document.createElement("button");c.textContent="Ver exemplo Selenium",c.onclick=function(n){n.stopPropagation(),r.style.display="none",function(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.gap="18px",o.style.minWidth="320px",o.style.maxWidth="90vw",o.style.maxHeight="80vh";var r=document.createElement("div");r.textContent="Exemplo Selenium (Python)",r.style.fontSize="17px",r.style.color="#0D47A1",r.style.textAlign="center",o.appendChild(r);var a="";"login"===e.acao?a="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\ndriver = webdriver.Chrome()\ndriver.get('URL_DA_PAGINA')\n\n# Preencher usuário\ndriver.find_element(By.CSS_SELECTOR, '".concat(e.userField||"SELETOR_USUARIO","').send_keys('SEU_USUARIO')\n# Preencher senha\ndriver.find_element(By.CSS_SELECTOR, '").concat(e.passField||"SELETOR_SENHA","').send_keys('SUA_SENHA')\n# Clicar no botão de login\ndriver.find_element(By.CSS_SELECTOR, '").concat(e.cssSelector||"SELETOR_BOTAO_LOGIN","').click()\n"):"espera_elemento"===e.acao?a="from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\n# Esperar até o elemento aparecer\nWebDriverWait(driver, 10).until(\n    EC.presence_of_element_located((By.CSS_SELECTOR, '".concat(e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO","'))\n)\n"):"espera_nao_existe"===e.acao?a="from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\n# Esperar até o elemento desaparecer\nWebDriverWait(driver, 10).until_not(\n    EC.presence_of_element_located((By.CSS_SELECTOR, '".concat(e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO","'))\n)\n"):"upload"===e.acao&&(a="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\ndriver = webdriver.Chrome()\ndriver.get('URL_DA_PAGINA')\n\n# Upload de arquivo\ndriver.find_element(By.CSS_SELECTOR, '".concat(e.cssSelector||"SELETOR_INPUT_FILE","').send_keys(r'C:/caminho/para/").concat(e.nomeArquivo||"ARQUIVO_EXEMPLO","')\n"));var i=document.createElement("textarea");i.value=a,i.readOnly=!0,i.style.width="100%",i.style.height="220px",i.style.fontSize="13px",i.style.padding="7px",i.style.borderRadius="5px",i.style.border="1px solid #ccc",i.style.marginTop="8px",i.style.resize="vertical",o.appendChild(i);var l=document.createElement("button");l.textContent="Fechar",l.style.background="#007bff",l.style.color="#fff",l.style.border="none",l.style.borderRadius="6px",l.style.padding="8px 22px",l.style.fontSize="15px",l.style.fontWeight="bold",l.style.cursor="pointer",l.onclick=function(){return t.remove()},o.appendChild(l),t.appendChild(o),document.body.appendChild(t)}(e)},r.appendChild(c)}return o.onclick=function(e){e.stopPropagation(),document.querySelectorAll(".gherkin-action-dropdown").forEach((function(e){e!==r&&(e.style.display="none")})),r.style.display="flex";var n=o.getBoundingClientRect();r.style.visibility="hidden",r.style.left="0",r.style.top="0",t.appendChild(r),r.getBoundingClientRect(),r.style.visibility="";var a=o.offsetLeft+o.offsetWidth/2-r.offsetWidth/2;a<0&&(a=0);var i=document.getElementById("gherkin-panel");if(i){var l=i.getBoundingClientRect(),c=n.left+o.offsetWidth/2-r.offsetWidth/2;c<l.left&&(a+=l.left-c),c+r.offsetWidth>l.right&&(a-=c+r.offsetWidth-l.right)}r.style.left=a+"px",r.style.top=o.offsetTop+o.offsetHeight+4+"px",setTimeout((function(){r.firstChild&&r.firstChild.focus&&r.firstChild.focus()}),0)},setTimeout((function(){document.addEventListener("click",(function e(n){r.contains(n.target)||n.target===o||(r.style.display="none",document.removeEventListener("click",e))}))}),0),t.appendChild(r),t}(e,n)),t.appendChild(d),t.onclick=function(){return b(e)},t.onkeydown=function(n){"Enter"!==n.key&&" "!==n.key||(b(e),n.preventDefault())},c.appendChild(t)}))}}function b(e){var n=document.getElementById("gherkin-modal");n&&n.remove();var t=document.createElement("div");t.id="gherkin-modal",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100vw",t.style.height="100vh",t.style.background="rgba(0,0,0,0.25)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.zIndex="10003";var o=document.createElement("div");o.style.background="#fff",o.style.padding="28px 32px 22px 32px",o.style.borderRadius="12px",o.style.boxShadow="0 4px 24px rgba(0,0,0,0.18)",o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="flex-start",o.style.gap="12px",o.style.minWidth="320px",o.style.maxWidth="96vw",o.style.maxHeight="80vh",o.style.overflowY="auto";var r=x[e.acao]||{},a=document.createElement("div");a.innerHTML='<span style="font-size:1.3em;color:'.concat(r.color||"#222",'">').concat(r.icon||"","</span> <b>").concat(r.label||e.acao,"</b> (").concat(e.step,")"),a.style.fontSize="17px",a.style.color="#0D47A1",a.style.textAlign="left",o.appendChild(a),[["Nome do elemento",e.nomeElemento||""],["Valor preenchido",e.valorPreenchido||e.nomeArquivo||""],["Selector CSS",e.cssSelector||""],["XPath",e.xpath||""],["Timestamp",e.timestamp?new Date(e.timestamp).toLocaleString():""],["Texto do passo",e.stepText||""]].forEach((function(e){var n=u(e,2),t=n[0],r=n[1];if(r){var a=document.createElement("div");a.innerHTML="<b>".concat(t,':</b> <span style="font-family:monospace">').concat(r,"</span>"),o.appendChild(a)}}));var i=document.createElement("button");i.textContent="Fechar",i.style.background="#007bff",i.style.color="#fff",i.style.border="none",i.style.borderRadius="6px",i.style.padding="8px 22px",i.style.fontSize="15px",i.style.fontWeight="bold",i.style.cursor="pointer",i.onclick=function(){return t.remove()},o.appendChild(i),t.appendChild(o),document.body.appendChild(t)}function w(e){var n=e.querySelector("#gherkin-minimize"),o=e.querySelector("#gherkin-reopen"),r=e.querySelector("#gherkin-close");n&&(n.onclick=function(){return toggleMinimizePanel(e)}),o&&(o.onclick=function(){return toggleMinimizePanel(e)}),r&&(r.onclick=function(){e.style.opacity="0",setTimeout((function(){return e.remove()}),300),window.panel=null});var a=e.querySelector("#start-feature");a&&(a.onclick=function(){var n=e.querySelector("#feature-name").value.trim();n?(window.currentFeature={name:n,cenarios:[]},window.currentCenario=null,window.gherkinPanelState="cenario",m(e),setTimeout((function(){return w(e)}),100)):t("Informe o nome da feature!","error")});var i=e.querySelector("#start-cenario");i&&(i.onclick=function(){var n=e.querySelector("#cenario-name").value.trim();if(n){var o={step:"Given",acao:"acessa_url",acaoTexto:"que o usuário acessa",nomeElemento:window.location.href,cssSelector:"",xpath:"",timestamp:Date.now()};window.currentCenario={name:n,interactions:[o]},window.interactions=window.currentCenario.interactions,window.gherkinPanelState="gravando",window.isRecording=!0,window.isPaused=!1,window.elapsedSeconds=0,m(e),setTimeout((function(){return w(e)}),100),"function"==typeof startTimer&&startTimer()}else t("Informe o nome do cenário!","error")});var c=e.querySelector("#end-cenario");c&&(c.onclick=function(){window.isRecording=!1,window.isPaused=!1,"function"==typeof stopTimer&&stopTimer(),window.currentFeature&&window.currentCenario&&window.currentFeature.cenarios.push(window.currentCenario),h("Deseja cadastrar um novo cenário?",(function(){window.currentCenario=null,window.interactions=[],window.gherkinPanelState="cenario",m(e),setTimeout((function(){return w(e)}),100)}),(function(){var n=e.querySelector("#end-feature");n&&(n.disabled=!1,n.style.backgroundColor="#dc3545"),t("Cenário encerrado! Você pode encerrar a feature.","success")}))});var s=e.querySelector("#export-project");s&&(s.onclick=d(l().m((function n(){var o,r;return l().w((function(n){for(;;)switch(n.n){case 0:if(o=e.querySelector("#export-form"),0!==(r=Array.from(o.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}))).length){n.n=1;break}return t("Selecione ao menos uma feature!","error"),n.a(2);case 1:"function"==typeof exportSelectedFeatures&&exportSelectedFeatures(r);case 2:return n.a(2)}}),n)}))));var u=e.querySelector("#end-feature");u&&(u.onclick=function(){h("Deseja cadastrar uma nova feature?",(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),t("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",m(e),setTimeout((function(){return w(e)}),100)):t("Adicione pelo menos um cenário!","error")}),(function(){window.currentFeature&&window.currentFeature.cenarios&&window.currentFeature.cenarios.length>0?(window.gherkinFeatures=window.gherkinFeatures||[],window.gherkinFeatures.push(window.currentFeature),t("Feature salva com sucesso!","success"),window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="exportar",m(e),setTimeout((function(){return w(e)}),100)):t("Adicione pelo menos um cenário!","error")}))});var p=e.querySelector("#export-selected");p&&(p.onclick=function(){var n=e.querySelector("#export-form");if(n){var o=Array.from(n.querySelectorAll('input[type="checkbox"]:checked')).map((function(e){return parseInt(e.value,10)}));0!==o.length?"function"==typeof exportSelectedFeatures?exportSelectedFeatures(o):window.exportSelectedFeatures&&window.exportSelectedFeatures(o):t("Selecione ao menos uma feature!","error")}else t("Formulário de exportação não encontrado!","error")});var g=e.querySelector("#new-feature");g&&(g.onclick=function(){window.currentFeature=null,window.currentCenario=null,window.gherkinPanelState="feature",m(e),setTimeout((function(){return w(e)}),100)})}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function C(e,n,t){return(n=function(e){var n=function(e){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,"string");if("object"!=k(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}if(window.gherkinFeatures||(window.gherkinFeatures=[]),window.currentFeature||(window.currentFeature=null),window.currentCenario||(window.currentCenario=null),window.gherkinPanelState||(window.gherkinPanelState="feature"),void 0===window.isRecording&&(window.isRecording=!1),void 0===window.isPaused&&(window.isPaused=!1),void 0===window.timerInterval&&(window.timerInterval=null),void 0===window.elapsedSeconds&&(window.elapsedSeconds=0),window.interactions||(window.interactions=[]),!window.panel){window.panel=function(){var e=document.getElementById("gherkin-panel");e&&e.remove();var n=document.createElement("div");return n.id="gherkin-panel",n.className="gherkin-panel",n.style.position="fixed",n.style.top="10px",n.style.left="10px",n.style.width="480px",n.style.height="700px",n.style.background="#ffffff",n.style.border="1px solid #ccc",n.style.borderRadius="12px",n.style.boxShadow="0 8px 16px rgba(0, 0, 0, 0.2)",n.style.padding="10px",n.style.zIndex="10000",n.style.fontFamily="Roboto, Arial, sans-serif",n.style.transition="opacity 0.3s ease, transform 0.3s ease",n.setAttribute("role","dialog"),n.setAttribute("aria-label","Painel Gherkin Generator"),m(n),document.body.appendChild(n),n}(),m(window.panel);var D=document.createElement("style");D.id="gherkin-panel-modern-style",D.innerHTML='\n    #gherkin-panel, .gherkin-panel {\n        font-family: \'Segoe UI\', Arial, sans-serif !important;\n        background: #fff;\n        color: #222;\n        border-radius: 12px;\n        box-shadow: 0 4px 24px rgba(0,0,0,0.10);\n        max-width: 480px;\n        min-width: 320px;\n        width: 96vw;\n        min-height: 320px;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        z-index: 2147483647;\n    }\n    .gherkin-panel-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: #f7faff;\n        border-bottom: 1px solid #e0e6ed;\n        padding: 18px 20px 12px 20px;\n        font-size: 1.25rem;\n        font-weight: bold;\n        color: #0070f3;\n        letter-spacing: 0.01em;\n        user-select: none;\n    }\n    .gherkin-panel-header .gherkin-panel-title {\n        font-size: 1.18rem;\n        font-weight: 700;\n        letter-spacing: 0.01em;\n    }\n    .gherkin-panel-header .gherkin-panel-actions {\n        display: flex;\n        gap: 8px;\n    }\n    .gherkin-panel-header button, .gherkin-panel-header .gherkin-close, .gherkin-panel-header .gherkin-minimize {\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 1.2rem;\n        padding: 2px 6px;\n        color: #e74c3c;\n        transition: color 0.2s;\n    }\n    .gherkin-panel-header .gherkin-minimize { color: #f1c40f; }\n    .gherkin-panel-header .gherkin-close:hover { color: #c0392b; }\n    .gherkin-panel-header .gherkin-minimize:hover { color: #b7950b; }\n\n    .gherkin-panel-content {\n        flex: 1 1 auto;\n        padding: 24px 24px 12px 24px;\n        display: flex;\n        flex-direction: column;\n        gap: 18px;\n        background: #fff;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content h2, .gherkin-panel-content h3 {\n        margin: 0 0 8px 0;\n        font-weight: 600;\n        color: #0070f3;\n    }\n    .gherkin-panel-content label {\n        font-weight: 500;\n        margin-bottom: 4px;\n        display: block;\n        color: #222;\n    }\n    .gherkin-panel-content input[type="text"], .gherkin-panel-content input[type="number"], .gherkin-panel-content textarea, .gherkin-panel-content select {\n        width: 100%;\n        padding: 10px 12px;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 6px;\n        font-size: 1rem;\n        margin-bottom: 10px;\n        background: #f9fbfd;\n        transition: border-color 0.2s;\n    }\n    .gherkin-panel-content input:focus, .gherkin-panel-content textarea:focus, .gherkin-panel-content select:focus {\n        outline: none;\n        border-color: #0070f3;\n        background: #fff;\n    }\n    .gherkin-panel-content input[aria-invalid="true"], .gherkin-panel-content textarea[aria-invalid="true"] {\n        border-color: #e74c3c;\n        background: #fff6f6;\n    }\n    .gherkin-panel-content .gherkin-actions-row {\n        display: flex;\n        gap: 12px;\n        margin: 12px 0 0 0;\n        flex-wrap: wrap;\n    }\n    .gherkin-panel-content button, .gherkin-panel-content .gherkin-btn {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        padding: 10px 18px;\n        border: none;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 600;\n        cursor: pointer;\n        transition: background 0.2s, color 0.2s, box-shadow 0.2s;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        margin-bottom: 0;\n        outline: none;\n    }\n    .gherkin-panel-content .gherkin-btn-primary {\n        background: #0070f3;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-primary:hover, .gherkin-panel-content .gherkin-btn-primary:focus {\n        background: #005bb5;\n    }\n    .gherkin-panel-content .gherkin-btn-success {\n        background: #28a745;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-success:hover, .gherkin-panel-content .gherkin-btn-success:focus {\n        background: #218838;\n    }\n    .gherkin-panel-content .gherkin-btn-danger {\n        background: #e74c3c;\n        color: #fff;\n    }\n    .gherkin-panel-content .gherkin-btn-danger:hover, .gherkin-panel-content .gherkin-btn-danger:focus {\n        background: #c0392b;\n    }\n    .gherkin-panel-content .gherkin-btn-warning {\n        background: #ffc107;\n        color: #222;\n    }\n    .gherkin-panel-content .gherkin-btn-warning:hover, .gherkin-panel-content .gherkin-btn-warning:focus {\n        background: #e0a800;\n    }\n    .gherkin-panel-content .gherkin-btn[disabled], .gherkin-panel-content button[disabled] {\n        opacity: 0.6;\n        cursor: not-allowed;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n        margin-bottom: 12px;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list label {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 400;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n    }\n    .gherkin-panel-content .gherkin-checkbox-list input[type="checkbox"] {\n        accent-color: #0070f3;\n        width: 18px;\n        height: 18px;\n    }\n    .gherkin-panel-content .gherkin-feedback {\n        margin: 8px 0;\n        padding: 10px 14px;\n        border-radius: 6px;\n        font-size: 1rem;\n        font-weight: 500;\n        background: #eafaf1;\n        color: #218838;\n        border: 1.5px solid #28a745;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        min-height: 40px;\n        transition: background 0.2s, color 0.2s;\n    }\n    .gherkin-panel-content .gherkin-feedback.error {\n        background: #fff6f6;\n        color: #e74c3c;\n        border-color: #e74c3c;\n    }\n    .gherkin-panel-content .gherkin-feedback.info {\n        background: #f7faff;\n        color: #0070f3;\n        border-color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-feedback .gherkin-feedback-icon {\n        font-size: 1.3em;\n        display: inline-block;\n        vertical-align: middle;\n    }\n    .gherkin-panel-content .gherkin-tip {\n        background: #f7faff;\n        border-left: 4px solid #0070f3;\n        padding: 10px 16px;\n        border-radius: 6px;\n        color: #0070f3;\n        font-size: 0.98rem;\n        margin-bottom: 8px;\n        margin-top: 0;\n        display: flex;\n        align-items: flex-start;\n        gap: 8px;\n    }\n    .gherkin-panel-content .gherkin-tip .gherkin-tip-icon {\n        font-size: 1.2em;\n        margin-right: 4px;\n        color: #0070f3;\n    }\n    .gherkin-panel-content .gherkin-summary {\n        background: #f9fbfd;\n        border: 1.5px solid #e0e6ed;\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 10px;\n        font-size: 0.98rem;\n        color: #222;\n        max-height: 180px;\n        overflow-y: auto;\n    }\n    .gherkin-panel-content .gherkin-summary-title {\n        font-weight: 600;\n        color: #0070f3;\n        margin-bottom: 6px;\n        font-size: 1.05rem;\n    }\n    .gherkin-panel-content .gherkin-summary-list {\n        list-style: disc inside;\n        margin: 0;\n        padding: 0 0 0 10px;\n    }\n    .gherkin-panel-content .gherkin-summary-list li {\n        margin-bottom: 2px;\n        font-size: 0.97rem;\n    }\n    .gherkin-panel-content .gherkin-footer {\n        text-align: right;\n        font-size: 0.92rem;\n        color: #888;\n        margin-top: 10px;\n        margin-bottom: 2px;\n    }\n    /* Dropdown de ações (três pontos) */\n    .gherkin-action-dropdown {\n        position: absolute !important;\n        min-width: 170px;\n        background: #fff;\n        border-radius: 10px;\n        box-shadow: 0 8px 32px rgba(0,112,243,0.13), 0 1.5px 6px rgba(0,0,0,0.07);\n        border: 1.5px solid #e0e6ed;\n        z-index: 2147483646 !important;\n        padding: 8px 0;\n        display: none;\n        flex-direction: column;\n        animation: fadeInDropdown 0.18s;\n        /* Novo: ajuste para garantir que o dropdown nunca fique fora da janela */\n        right: auto !important;\n        left: 0 !important;\n        top: 36px !important;\n        max-width: 90vw;\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    .gherkin-action-dropdown.open {\n        display: flex !important;\n    }\n    .gherkin-action-dropdown button,\n    .gherkin-action-dropdown .gherkin-action-item {\n        background: none;\n        border: none;\n        width: 100%;\n        text-align: left;\n        padding: 10px 18px;\n        font-size: 1rem;\n        color: #222;\n        cursor: pointer;\n        transition: background 0.18s, color 0.18s;\n        border-radius: 0;\n        display: flex;\n        align-items: center;\n        gap: 10px;\n    }\n    .gherkin-action-dropdown button:hover,\n    .gherkin-action-dropdown .gherkin-action-item:hover {\n        background: #f7faff;\n        color: #0070f3;\n    }\n    .gherkin-action-dropdown .gherkin-action-separator {\n        height: 1px;\n        background: #e0e6ed;\n        margin: 4px 0;\n        border: none;\n    }\n    @keyframes fadeInDropdown {\n        from { opacity: 0; transform: translateY(-8px);}\n        to { opacity: 1; transform: translateY(0);}\n    }\n\n    /* Painel de logs aprimorado */\n    .gherkin-log-panel {\n        background: #f9fbfd;\n        border-radius: 10px;\n        border: 1.5px solid #e0e6ed;\n        padding: 12px 0 6px 0;\n        margin-bottom: 10px;\n        max-height: 260px;\n        overflow-y: auto;\n        box-shadow: 0 2px 8px rgba(0,112,243,0.04);\n        font-size: 0.98rem;\n        scrollbar-width: thin;\n        scrollbar-color: #0070f3 #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar {\n        width: 8px;\n        background: #f9fbfd;\n    }\n    .gherkin-log-panel::-webkit-scrollbar-thumb {\n        background: #e0e6ed;\n        border-radius: 6px;\n    }\n    .gherkin-log-list {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n    }\n    .gherkin-log-item {\n        display: flex;\n        align-items: flex-start;\n        gap: 12px;\n        padding: 10px 18px 10px 16px;\n        border-bottom: 1px solid #e0e6ed;\n        background: transparent;\n        transition: background 0.15s;\n        position: relative;\n    }\n    .gherkin-log-item:last-child {\n        border-bottom: none;\n    }\n    .gherkin-log-item:hover {\n        background: #f7faff;\n    }\n    .gherkin-log-icon {\n        font-size: 1.25em;\n        width: 28px;\n        height: 28px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        background: #eaf6ff;\n        color: #0070f3;\n        flex-shrink: 0;\n    }\n    .gherkin-log-item[data-action="preenche"] .gherkin-log-icon { background: #f6f9e8; color: #28a745; }\n    .gherkin-log-item[data-action="upload"] .gherkin-log-icon { background: #fff6e6; color: #f39c12; }\n    .gherkin-log-item[data-action="login"] .gherkin-log-icon { background: #f6e8f9; color: #8e44ad; }\n    .gherkin-log-item[data-action="clica"] .gherkin-log-icon { background: #eafaf1; color: #218838; }\n    .gherkin-log-item[data-action="espera"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-item[data-action="espera_elemento"] .gherkin-log-icon { background: #f7faff; color: #0070f3; }\n    .gherkin-log-item[data-action="acessa_url"] .gherkin-log-icon { background: #eaf6ff; color: #0070f3; }\n    .gherkin-log-item[data-action="seleciona"] .gherkin-log-icon { background: #f6f9e8; color: #218838; }\n    .gherkin-log-item[data-action="espera_nao_existe"] .gherkin-log-icon { background: #fff6f6; color: #e74c3c; }\n    .gherkin-log-content {\n        flex: 1 1 auto;\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n    }\n    .gherkin-log-title {\n        font-weight: 600;\n        color: #222;\n        font-size: 1.01em;\n        margin-bottom: 2px;\n    }\n    .gherkin-log-desc {\n        color: #555;\n        font-size: 0.97em;\n        margin-bottom: 0;\n    }\n    .gherkin-log-meta {\n        color: #888;\n        font-size: 0.93em;\n        margin-top: 2px;\n    }\n    /* Ajuste para dropdown não sair da tela */\n    .gherkin-action-dropdown {\n        max-height: 320px;\n        overflow-y: auto;\n    }\n    @media (max-width: 600px) {\n        .gherkin-action-dropdown {\n            left: 0 !important;\n            right: auto !important;\n            max-width: 96vw;\n        }\n        .gherkin-log-panel {\n            max-height: 40vw;\n        }\n    }\n    ',document.head.appendChild(D)}function S(e){if(!e)return!1;if("INPUT"===e.tagName){var n=(e.type||"").toLowerCase();return["text","email","password","search","tel","url","number","date","datetime-local","month","time","week"].includes(n)}return"TEXTAREA"===e.tagName||!!e.isContentEditable}function _(e){try{if(!window.isRecording||window.isPaused)return;if(!r())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if(!S(e.target))return;var n=o(e.target),t=F(e.target),a=(e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.id||e.target.className||e.target.tagName).toString().trim();a||(a=e.target.tagName);var i=document.getElementById("gherkin-action-select"),l=i?i.options[i.selectedIndex].text:"Preencher",c=i?i.value:"preenche",s=e.target.value||(e.target.textContent?e.target.textContent.trim():""),d="Then",u=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(u=1),0===window.interactions.length?d="Given":1===window.interactions.length&&0===u||1===window.interactions.length&&1===u?d="When":2===window.interactions.length&&1===u&&(d="Then"),window.inputDebounceTimeout&&clearTimeout(window.inputDebounceTimeout),window.inputDebounceTimeout=setTimeout((function(){var e=window.interactions[window.interactions.length-1],o=Date.now();e&&e.acao===c&&e.cssSelector===n&&e.nomeElemento===a&&e.valorPreenchido===s&&o-e.timestamp<1e3||(window.interactions.push({step:d,acao:c,acaoTexto:l,nomeElemento:a,cssSelector:n,xpath:t,valorPreenchido:s,timestamp:o}),v(),"function"==typeof saveInteractionsToStorage&&saveInteractionsToStorage(),window.lastInputTarget=null)}),700)}catch(e){console.error("Erro no handleInputEvent:",e)}}if(void 0===window.lastInputTarget&&(window.lastInputTarget=null),void 0===window.inputDebounceTimeout&&(window.inputDebounceTimeout=null),void 0===window.lastInputValue&&(window.lastInputValue=""),setTimeout((function(){w(window.panel),window.panel.querySelector(".gherkin-panel-header")&&f(window.panel);var e=document.getElementById("gherkin-action-select");e&&(e.addEventListener("change",(function(){return g(window.panel)})),g(window.panel))}),100),document.addEventListener("click",(function(e){if(window.isRecording&&!window.isPaused)try{if(!r())return;if(!e.target||e.target.closest("#gherkin-panel")||e.target.closest("#gherkin-modal")||e.target.closest(".gherkin-content"))return;if("INPUT"===e.target.tagName&&"file"===e.target.type){var n=o(e.target),a=F(e.target),l=(e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.id||e.target.className||e.target.tagName).toString().trim();return l||(l=e.target.tagName),void("function"==typeof window.showUploadModal?window.showUploadModal(l,n,a,(function(e){e&&i((function(t){var o=(t.templateUpload||'When faz upload do arquivo "{arquivo}" no campo {elemento}').replace("{arquivo}",e).replace("{elemento}",l);window.interactions.push({step:"When",acao:"upload",acaoTexto:"Upload de arquivo",nomeElemento:l,cssSelector:n,xpath:a,nomeArquivo:e,stepText:o,timestamp:Date.now()}),v()}))})):t("Função de upload não disponível!","error"))}if("INPUT"===e.target.tagName&&"file"!==e.target.type||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)return;var c=!1;if("BUTTON"===e.target.tagName||"submit"===e.target.type){var s=e.target.closest("form");if(s){var d=s.querySelectorAll("input"),u=!1,p=!1;d.forEach((function(e){var n=e.getAttribute("type")||"",t=(e.getAttribute("name")||"").toLowerCase();("password"===n||t.includes("senha")||t.includes("password"))&&(p=!0),("text"===n||"email"===n||t.includes("user")||t.includes("email"))&&(u=!0)})),u&&p&&(c=!0)}}var m=o(e.target),g=F(e.target),f=(e.target.innerText||e.target.value||e.target.getAttribute("aria-label")||e.target.getAttribute("name")||e.target.tagName).trim();f||(f=e.target.tagName);var h=document.getElementById("gherkin-action-select"),x=h?h.options[h.selectedIndex].text:"Clicar",y=h?h.value:"clica";if("preenche"===y&&!S(e.target))return void t('A ação "Preencher" só pode ser usada em campos editáveis como input, textarea ou elementos contenteditable.',"error");var b={};if("espera_segundos"===y){var w=document.getElementById("gherkin-wait-seconds"),k=1;w&&w.value&&(k=parseInt(w.value,10),(isNaN(k)||k<1)&&(k=1)),b.tempoEspera=k}if("espera_elemento"===y&&(b.esperaSeletor=m),"login"===y||c){var D="",_="",A=e.target.closest("form");return A&&A.querySelectorAll("input").forEach((function(e){var n=e.getAttribute("type")||"",t=(e.getAttribute("name")||"").toLowerCase();D||"text"!==n&&"email"!==n&&!t.includes("user")&&!t.includes("email")||(D=o(e)),_||"password"!==n&&!t.includes("senha")&&!t.includes("password")||(_=o(e))})),void i((function(e){var n=e.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"';window.interactions.push({step:"Given",acao:"login",acaoTexto:"Login",nomeElemento:"login",userField:D,passField:_,cssSelector:m,xpath:g,stepText:n,timestamp:Date.now()}),v()}))}var T=window.interactions[window.interactions.length-1],z=T&&T.acao===y&&T.cssSelector===m&&T.nomeElemento===f;if("espera_segundos"===y&&T&&void 0!==T.tempoEspera&&(z=z&&T.tempoEspera===b.tempoEspera),"espera_elemento"===y&&T&&T.esperaSeletor&&(z=z&&T.esperaSeletor===b.esperaSeletor),z)return;var q="Then",B=0;window.interactions.length>0&&"acessa_url"===window.interactions[0].acao&&(B=1),0===window.interactions.length?q="Given":1===window.interactions.length&&0===B||1===window.interactions.length&&1===B?q="When":2===window.interactions.length&&1===B&&(q="Then"),window.givenAcessaUrlAdded=!1,window.interactions.push(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){C(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({step:q,acao:y,acaoTexto:x,nomeElemento:f,cssSelector:m,xpath:g,timestamp:Date.now()},b)),v()}catch(e){console.error("Erro ao registrar clique:",e)}})),document.removeEventListener("input",_,!0),document.addEventListener("input",_,!0),void 0!==m){var A=m;m=function(e){A(e),"gravando"===window.gherkinPanelState&&setTimeout(v,10),e.querySelector(".gherkin-panel-header")&&f(e)}}function F(e){if(!e||1!==e.nodeType)return"";if(e.id&&1===document.querySelectorAll("#".concat(CSS.escape(e.id))).length)return'//*[@id="'.concat(e.id,'"]');if(e.name&&1===document.querySelectorAll('[name="'.concat(e.name,'"]')).length)return'//*[@name="'.concat(e.name,'"]');function n(e){return-1===e.indexOf('"')?'"'+e+'"':-1===e.indexOf("'")?"'"+e+"'":'concat("'+e.replace(/"/g,'", \'"\', "')+'")'}function t(e){var t=[];if(e.getAttribute("type")&&t.push("@type=".concat(n(e.getAttribute("type")))),e.getAttribute("role")&&t.push("@role=".concat(n(e.getAttribute("role")))),e.getAttribute("aria-label")&&t.push("@aria-label=".concat(n(e.getAttribute("aria-label")))),e.getAttribute("placeholder")&&t.push("@placeholder=".concat(n(e.getAttribute("placeholder")))),e.getAttribute("data-testid")&&t.push("@data-testid=".concat(n(e.getAttribute("data-testid")))),e.className&&"string"==typeof e.className){var o=e.className.trim().split(/\s+/).filter(Boolean);1===o.length&&t.push("contains(concat(' ',normalize-space(@class),' '), ' ".concat(o[0]," ')"))}return t.length?"["+t.join(" and ")+"]":""}for(var o="",r=e;r&&1===r.nodeType&&r!==document.body&&r!==document.documentElement;){var a=r.tagName.toLowerCase(),i=t(r);if(i){var l="//"+a+i;try{if(1===document.evaluate(l,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength){o="/"+a+i+o;break}}catch(e){}}var c=Array.from(r.parentNode?r.parentNode.children:[]).filter((function(e){return e.tagName===r.tagName}));if(1===c.length)o="/"+a+o;else{var s=c.indexOf(r)+1;o="/"+a+"[".concat(s,"]")+o}r=r.parentNode}return"."+o}window.exportSelectedFeatures=function(o){i((function(r){var a="";if(window.gherkinFeatures&&Array.isArray(window.gherkinFeatures)){var i=window.gherkinFeatures.filter((function(e,n){return o.includes(n)}));if(0!==i.length){i.forEach((function(e){a+="Feature: ".concat(e.name,"\n"),(e.cenarios||[]).forEach((function(e){a+="  Scenario: ".concat(e.name,"\n"),(e.interactions||[]).forEach((function(e){var n="";e.stepText?n=e.stepText:"acessa_url"===e.acao?n=(r.templateStep&&r.templateStep.Given||"Given que o usuário acessa {url}").replace("{url}",e.nomeElemento||"URL"):"login"===e.acao?n=r.templateLogin||'Given que o usuário faz login com usuário "<usuario>" e senha "<senha>"':"upload"===e.acao?n=(r.templateUpload||'{step} faz upload do arquivo "{arquivo}" no campo {elemento}').replace("{step}",e.step||"When").replace("{arquivo}",e.nomeArquivo||"ARQUIVO_EXEMPLO").replace("{elemento}",e.nomeElemento||"CAMPO_UPLOAD"):"preenche"===e.acao?(n=(r.templateStep&&r.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():"preenche"," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"preenche").replace("{elemento}",e.nomeElemento||"ELEMENTO"),void 0!==e.valorPreenchido&&(n+=' (valor: "'.concat(e.valorPreenchido,'")'))):"espera_segundos"===e.acao?(n=(r.templateStep&&r.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():"espera"," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"espera").replace("{elemento}",e.nomeElemento||"ELEMENTO"),void 0!==e.tempoEspera&&(n+=" (".concat(e.tempoEspera," segundos)"))):n="espera_elemento"===e.acao?(r.templateEspera||"{step} espera o elemento aparecer: {seletor}").replace("{step}",e.step||"When").replace("{seletor}",e.esperaSeletor||e.cssSelector||"SELETOR_ELEMENTO"):(r.templateStep&&r.templateStep[e.step]||"".concat(e.step," ").concat(e.acaoTexto?e.acaoTexto.toLowerCase():""," no {elemento}")).replace("{acao}",e.acaoTexto?e.acaoTexto.toLowerCase():"").replace("{elemento}",e.nomeElemento||"ELEMENTO"),a+="    ".concat(n,"\n")})),a+="\n"})),a+="\n"}));var l=new Blob([a],{type:"text/plain"}),c=URL.createObjectURL(l),s=document.createElement("a");s.href=c,s.download="features_exportadas.feature",document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),URL.revokeObjectURL(c)}),100),i.forEach((function(t){var o="# Feature: ".concat(t.name,"\n\n");o+="## Descrição do fluxo\n",o+="Esta feature cobre o(s) seguinte(s) cenário(s):\n\n",(t.cenarios||[]).forEach((function(e){o+="### Cenário: ".concat(e.name,"\n"),o+="**Fluxo resumido:**\n",(e.interactions||[]).forEach((function(e){var n=e.step||"",t=e.acaoTexto||e.acao||"",r=e.nomeElemento||"",a=e.valorPreenchido?' (valor: "'.concat(e.valorPreenchido,'")'):"",i="";"upload"===e.acao&&e.nomeArquivo&&(i=" (arquivo: ".concat(e.nomeArquivo,")")),o+="- ".concat(n," ").concat(t,' em "').concat(r,'"').concat(a).concat(i,"\n")})),o+="\n"})),o+="## Pré-requisitos\n",o+="- Navegador Google Chrome com extensão Selenium WebDriver instalada (ou ambiente Python/Selenium configurado)\n",o+="- Acesso ao ambiente de testes\n\n",o+="## Exemplo de execução (Python + Selenium)\n",o+="```python\n",o+="# Exemplo básico de inicialização do Selenium\n",o+="from selenium import webdriver\nfrom selenium.webdriver.common.by import By\n\n",o+="driver = webdriver.Chrome()\n",o+='driver.get("URL_DO_SISTEMA")\n',o+="# ...seguir os passos do cenário conforme descrito acima...\n",o+="```\n\n",o+="## Observações\n",o+="- Adapte os seletores e valores conforme necessário para o seu ambiente.\n",o+="- Prints das telas podem ser adicionados manualmente após a execução dos testes.\n",n("README_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".md"),o);var r=new Set,a={};(t.cenarios||[]).forEach((function(e){(e.interactions||[]).forEach((function(e){if(e.cssSelector&&e.nomeElemento){var n=e.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();r.add(n),a[n]=e.cssSelector}}))}));var i="from selenium.webdriver.common.by import By\n\nclass Locators".concat(e(t.name),":\n");0===r.size?i+="    # Nenhum locator identificado\n":r.forEach((function(e){i+="    ".concat(e," = (By.CSS_SELECTOR, '").concat(a[e],"')\n")}));var l="\nclass Page".concat(e(t.name),":\n    def __init__(self, driver):\n        self.driver = driver\n\n    def acessar_url(self, url):\n        self.driver.get(url)\n\n    def clicar(self, locator):\n        self.driver.find_element(*locator).click()\n\n    def preencher(self, locator, valor):\n        el = self.driver.find_element(*locator)\n        el.clear()\n        el.send_keys(valor)\n\n    def selecionar(self, locator, valor):\n        from selenium.webdriver.support.ui import Select\n        select = Select(self.driver.find_element(*locator))\n        select.select_by_visible_text(valor)\n\n    def upload_arquivo(self, locator, caminho_arquivo):\n        self.driver.find_element(*locator).send_keys(caminho_arquivo)\n\n    def esperar_elemento(self, locator, timeout=10):\n        from selenium.webdriver.support.ui import WebDriverWait\n        from selenium.webdriver.support import expected_conditions as EC\n        WebDriverWait(self.driver, timeout).until(EC.presence_of_element_located(locator))\n\n    def esperar_elemento_desaparecer(self, locator, timeout=10):\n        from selenium.webdriver.support.ui import WebDriverWait\n        from selenium.webdriver.support import expected_conditions as EC\n        WebDriverWait(self.driver, timeout).until_not(EC.presence_of_element_located(locator))\n\n    # Adicione outros métodos genéricos conforme necessário\n"),c='# pages.py gerado automaticamente para a feature "'.concat(t.name,'"\n\n').concat(i,"\n").concat(l,"\n");n("pages_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".py"),c);var s='# steps.py gerado automaticamente para a feature "'.concat(t.name,'"\nfrom behave import given, when, then\nfrom pages_').concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()," import Page").concat(e(t.name),", Locators").concat(e(t.name),"\n\ndef get_page(context):\n    if not hasattr(context, 'page'):\n        context.page = Page").concat(e(t.name),"(context.driver)\n    return context.page\n\n"),d=new Map;(t.cenarios||[]).forEach((function(n){(n.interactions||[]).forEach((function(n){var o=(n.step||"").toLowerCase(),r="";n.stepText?r=n.stepText:"acessa_url"===n.acao?r="que o usuário acessa ".concat(n.nomeElemento):"login"===n.acao?r='que o usuário faz login com usuário "<usuario>" e senha "<senha>"':"upload"===n.acao?r='faz upload do arquivo "'.concat(n.nomeArquivo||"ARQUIVO_EXEMPLO",'" no campo ').concat(n.nomeElemento):"preenche"===n.acao?(r="".concat(n.acaoTexto?n.acaoTexto.toLowerCase():"preenche"," no ").concat(n.nomeElemento),void 0!==n.valorPreenchido&&(r+=' (valor: "'.concat(n.valorPreenchido,'")'))):"espera_segundos"===n.acao?(r="".concat(n.acaoTexto?n.acaoTexto.toLowerCase():"espera"," no ").concat(n.nomeElemento),void 0!==n.tempoEspera&&(r+=" (".concat(n.tempoEspera," segundos)"))):r="espera_elemento"===n.acao?"espera o elemento aparecer: ".concat(n.nomeElemento):"".concat(n.acaoTexto?n.acaoTexto.toLowerCase():""," no ").concat(n.nomeElemento);var a=r.replace(/"/g,'\\"'),i=function(n){return e(n.replace(/["'<>\(\)\[\]\.]/g,""))}(r);if(!d.has(a)){d.set(a,!0);var l;l="given"===o?"@given('".concat(a,"')"):"when"===o?"@when('".concat(a,"')"):"@then('".concat(a,"')");var c="";if("acessa_url"===n.acao)c='    page = get_page(context)\n    page.acessar_url("'.concat(n.nomeElemento,'")\n');else if("login"===n.acao)c="    # Implemente o login conforme o contexto do sistema\n    pass\n";else if("upload"===n.acao){var u=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c="    page = get_page(context)\n    page.upload_arquivo(Locators".concat(e(t.name),".").concat(u,', "CAMINHO/DO/ARQUIVO/').concat(n.nomeArquivo||"ARQUIVO_EXEMPLO",'")\n')}else if("preenche"===n.acao){var p=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c=void 0!==n.valorPreenchido?"    page = get_page(context)\n    page.preencher(Locators".concat(e(t.name),".").concat(p,', "').concat(n.valorPreenchido,'")\n'):"    # Preencher campo: ajuste o valor conforme necessário\n    pass\n"}else if("clica"===n.acao){var m=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c="    page = get_page(context)\n    page.clicar(Locators".concat(e(t.name),".").concat(m,")\n")}else if("seleciona"===n.acao){var g=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c="    page = get_page(context)\n    page.selecionar(Locators".concat(e(t.name),".").concat(g,', "VALOR_DESEJADO")\n')}else if("espera_elemento"===n.acao){var f=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c="    page = get_page(context)\n    page.esperar_elemento(Locators".concat(e(t.name),".").concat(f,")\n")}else if("espera_nao_existe"===n.acao){var h=n.nomeElemento.replace(/[^a-zA-Z0-9_]/g,"_").toUpperCase();c="    page = get_page(context)\n    page.esperar_elemento_desaparecer(Locators".concat(e(t.name),".").concat(h,")\n")}else if("espera_segundos"===n.acao){var x=n.tempoEspera||1;c="    import time\n    time.sleep(".concat(x,")\n")}else c="    # Implemente a ação correspondente\n    pass\n";s+="\n".concat(l,"\ndef step_").concat(i,"(context):\n").concat(c,"\n")}}))})),n("steps_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".py"),s);var u='# environment.py gerado automaticamente para a feature "'.concat(t.name,'"\nimport os\nimport logging\nfrom selenium import webdriver\nfrom selenium.common.exceptions import WebDriverException\nfrom webdriver_manager.chrome import ChromeDriverManager\nfrom webdriver_manager.firefox import GeckoDriverManager\nfrom webdriver_manager.microsoft import EdgeChromiumDriverManager\n\ndef before_all(context):\n    # Configuração de logging\n    logging.basicConfig(\n        level=logging.INFO,\n        format="%(asctime)s [%(levelname)s] %(message)s",\n        handlers=[logging.StreamHandler()]\n    )\n    browser = os.getenv("BROWSER", "chrome").lower()\n    try:\n        if browser == "chrome":\n            from selenium.webdriver.chrome.service import Service as ChromeService\n            from selenium.webdriver.chrome.options import Options as ChromeOptions\n            options = ChromeOptions()\n            options.add_argument("--start-maximized")\n            context.driver = webdriver.Chrome(service=ChromeService(ChromeDriverManager().install()), options=options)\n        elif browser == "firefox":\n            from selenium.webdriver.firefox.service import Service as FirefoxService\n            from selenium.webdriver.firefox.options import Options as FirefoxOptions\n            options = FirefoxOptions()\n            options.add_argument("--width=1920")\n            options.add_argument("--height=1080")\n            context.driver = webdriver.Firefox(service=FirefoxService(GeckoDriverManager().install()), options=options)\n        elif browser == "edge":\n            from selenium.webdriver.edge.service import Service as EdgeService\n            from selenium.webdriver.edge.options import Options as EdgeOptions\n            options = EdgeOptions()\n            context.driver = webdriver.Edge(service=EdgeService(EdgeChromiumDriverManager().install()), options=options)\n        else:\n            raise ValueError(f"Navegador não suportado: {browser}")\n        logging.info(f"Driver iniciado com sucesso ({browser})")\n    except WebDriverException as e:\n        logging.error(f"Erro ao iniciar o driver: {e}")\n        raise\n    except Exception as e {\n        logging.error(f"Erro inesperado: {e}")\n        raise\n    }\n\ndef after_step(context, step):\n    if step.status == "failed":\n        try:\n            screenshots_dir = os.path.join(os.getcwd(), "screenshots")\n            os.makedirs(screenshots_dir, exist_ok=True)\n            filename = f"{step.name.replace(\' \', \'_\')}.png"\n            filepath = os.path.join(screenshots_dir, filename)\n            context.driver.save_screenshot(filepath)\n            logging.error(f"Step falhou. Screenshot salvo em: {filepath}")\n        except Exception as e:\n            logging.error(f"Erro ao salvar screenshot: {e}")\n\ndef after_all(context):\n    try:\n        if hasattr(context, "driver"):\n            context.driver.quit();\n            logging.info("Driver finalizado com sucesso.")\n    except Exception as e:\n        logging.error(f"Erro ao finalizar o driver: {e}")\n');n("environment_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".py"),u),n("requirements_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".txt"),"# requirements.txt gerado automaticamente\nselenium\nbehave\nwebdriver-manager\npytest\npython-dotenv\ncolorama\npytest-bdd\nrequests\n")})),t("Exportação realizada com sucesso!")}else t("Selecione ao menos uma feature!","error")}else t("Nenhuma feature para exportar!","error")}))},"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener((function(e,n,t){"keepAlive"===e.action&&t({status:"alive"})})),window.renderLogWithActions=function(){var e=document.getElementById("gherkin-log-panel");if(e){e.innerHTML="";var n=document.createElement("ul");n.className="gherkin-log-list",window.interactions.forEach((function(e){var t=document.createElement("li");if(t.className="gherkin-log-item",t.dataset.action=e.acao||"","preenche"===e.acao){t.style.alignItems="center",t.style.gap="0";var o=document.createElement("span");o.style.flex="0 0 70px",o.style.fontWeight="bold",o.style.color="#0070f3",o.innerText=e.step||"",t.appendChild(o);var r=document.createElement("span");r.style.flex="0 0 110px",r.style.display="inline-flex",r.style.alignItems="center",r.innerHTML='<span class="gherkin-log-icon" style="margin-right:6px;">📝</span>'.concat(e.acaoTexto||"Preencher"),t.appendChild(r);var a=document.createElement("span");a.style.flex="0 0 120px",a.style.fontWeight="500",a.style.background="#f7faff",a.style.borderRadius="5px",a.style.padding="2px 10px",a.style.margin="0 8px 0 0",a.style.color="#222",a.style.fontSize="0.97em",a.innerText=e.nomeElemento||"",t.appendChild(a);var i=document.createElement("span");i.style.flex="0 0 auto",i.style.color="#555",i.style.fontSize="0.97em",i.style.marginRight="4px",i.innerText="o valor",t.appendChild(i);var l=document.createElement("span");l.style.flex="1",l.style.fontWeight="bold",l.style.background="#fff",l.style.border="1.5px solid #e0e6ed",l.style.borderRadius="5px",l.style.padding="2px 10px",l.style.color="#222",l.style.fontSize="0.97em",l.style.wordBreak="break-all",l.innerText=void 0!==e.valorPreenchido?e.valorPreenchido:"",t.appendChild(l)}else{var c=document.createElement("span");c.className="gherkin-log-icon",c.innerText=function(){switch(e.acao){case"preenche":return"📝";case"upload":return"📤";case"login":return"🔑";case"clica":return"🖱️";case"espera":return"⏳";case"espera_elemento":return"👁️";case"acessa_url":return"🌐";case"seleciona":return"✅";case"espera_nao_existe":return"🚫";default:return"🔹"}}(),t.appendChild(c);var s=document.createElement("div");s.className="gherkin-log-content";var d=document.createElement("div");d.className="gherkin-log-title",d.innerText="".concat(e.step||""," ").concat(e.acaoTexto||e.acao||""),s.appendChild(d);var u=document.createElement("div");if(u.className="gherkin-log-desc",u.innerText=e.nomeElemento||"",s.appendChild(u),void 0!==e.valorPreenchido&&"preenche"!==e.acao){var p=document.createElement("div");p.className="gherkin-log-meta",p.innerText='Valor: "'.concat(e.valorPreenchido,'"'),s.appendChild(p)}t.appendChild(s)}n.appendChild(t)})),e.appendChild(n)}},window.showEditModal=function(e,n){var t=null;if("preenche"===e.acao){var o=document.createElement("label");o.innerText="Valor preenchido:",o.setAttribute("for","gherkin-edit-valor-preenchido"),o.style.marginTop="8px",(t=document.createElement("input")).type="text",t.id="gherkin-edit-valor-preenchido",t.value=void 0!==e.valorPreenchido?e.valorPreenchido:"",t.style.marginBottom="12px",t.autocomplete="off",modalContent.appendChild(o),modalContent.appendChild(t)}saveBtn.onclick=function(){"preenche"===e.acao&&t&&(e.valorPreenchido=t.value)}}})();